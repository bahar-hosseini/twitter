(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"3EFP":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return n})),s.d(t,"f",(function(){return c}));const o="ArrowDown",i="ArrowUp",r="Enter",a="Escape",n="ESC",c="Tab"},"4e/K":function(e,t,s){"use strict";s.r(t),s.d(t,"TypeaheadInput",(function(){return k})),s.d(t,"styles",(function(){return N}));var o=s("KEM+"),i=s.n(o),r=s("3EFP"),a=s("ERkP"),n=s("ZUOq"),c=s("ZNx0"),l=s("SrCX"),d=s("3XMw"),h=s.n(d),u=s("VwDm"),p=s("oQhu"),m=s("WPfJ"),f=s("N5qz"),_=s("Es6L"),y=s("OEYw"),b=s("GZwR"),w=s("rHpw"),g=w.a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),I=s("v6aA"),v=s("k/Ka"),x=s("MWbm"),E=s("oEoC"),C=s("xoZN"),R=s("pf9B"),S=s("cHvH");const T=h.a.f065ba8c,D=Object(p.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${w.a.theme.spaces.space64})`,position:"fixed",top:`${e}px`,transform:[{translate3d:"0,0,0"}]}))),O=e=>f.a.isTwoColumnNormalLayout(e)?{width:n.a.columnWidths.secondary.normal+w.a.theme.spacesPx.space24,left:-w.a.theme.spacesPx.space24/2}:f.a.isTwoColumnSmallLayout(e)?{width:n.a.columnWidths.secondary.small+w.a.theme.spacesPx.space16,left:-w.a.theme.spacesPx.space16/2}:void 0,P=e=>Object(v.a)("form",{...e,action:"#",style:[g.initial,N.wrapper]});let F=1;class k extends a.Component{constructor(e,t){super(e,t),i()(this,"_withNewTypeaheadUI",!1),i()(this,"_render",(({windowWidth:e})=>{const{alwaysOpen:t,disableClearButton:s,forceVdlDisable:o,inputStyle:i,isCompact:r,placeholder:n,rounded:d,renderInSearchField:h,shouldAutoFocus:p,shouldFocusOnClear:m,style:f,testID:_}=this.props,y=this.state.showTypeaheadDropdown||t;return a.createElement(c.a,{viewType:"typeahead_input"},a.createElement(x.a,{onLayout:this._handleLayout,ref:this._setRootContainerNode,style:[N.root,f]},a.createElement(C.a,{onKeyDown:this._handleKeyDown,style:N.keydownInputListener},a.createElement(P,{accessibilityLabel:n,accessibilityRole:"search",onSubmit:this._handleFormSubmit},a.createElement(x.a,{ref:this._setInputContainerNode,style:i},a.createElement(l.a,{Icon:u.a,ariaActiveDescendant:this.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:y,ariaLabel:T,ariaOwns:this._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:p,contentBelow:h&&h(),focusOnClear:m,forceVdlDisable:o,isCompact:r,onChange:this._handleInputChange,onClear:this._handleInputClear,onFocus:this._handleInputFocus,onLayout:this._handleInputLayoutChanged,placeholder:n,ref:this._setInputRef,returnKeyType:"search",spellCheck:"false",styleType:d?"legacyPill":"selection",testID:_,value:this.state.query,withClearButton:!s&&this.state.showTypeaheadDropdown})),a.createElement(x.a,{style:[N.typeaheadContainer,!d&&N.topBorder]},y?this._renderDropdown(e):null)))))})),i()(this,"_renderDropdown",(e=>{const{communityId:t,filter:s,getItemDisabledMessage:o,getItemIsDisabled:i,getTopicExactMatch:r,getUserExactMatch:n,injectedItems:c,isModal:l,isInSidebar:d,maxEvents:h,maxTopics:u,orderResults:p,renderEmptyState:m,renderHeader:f,renderNoResultsState:b,renderUserDecoration:g,selectedItems:I,shouldDeferPrefetch:v,shouldShowPrefetchResults:x,source:E,userLimit:C,withFixedPositioning:R,withSectionDivider:S,onItemsChanged:T}=this.props,P=e>=w.a.theme.breakpoints.medium||Object(_.a)(),{dropdownOffset:F,query:k}=this.state,j=l?N.modalDropdown:[N.dropdown,!P&&R&&F?D(F):null,P&&N.wideModeDropdown,this._withNewTypeaheadUI&&d&&O(e)],U={ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,onDismiss:this._handleOnEmptyStateDismiss,onItemFocusChanged:this._handleItemFocusChanged,ref:this._handleDropdownRef,style:j};return m&&!k?m(U):a.createElement(y.a,{ariaDescendantId:this.state.ariaDescendantId,communityId:t,domId:this._dropdownDomId,filter:s,getItemDisabledMessage:o,getItemIsDisabled:i,getTopicExactMatch:r,getUserExactMatch:n,injectedItems:c,maxEvents:h,maxTopics:u,onItemClick:this._handleItemClick,onItemFocusChanged:this._handleItemFocusChanged,onItemsChanged:T,orderResults:p,query:k,ref:this._handleDropdownRef,renderHeader:f,renderNoResultsState:b,renderUserDecoration:g,selectedItems:I,shouldDeferPrefetch:v,shouldShowPrefetchResults:x,source:E,style:j,userLimit:C,withSectionDivider:S})})),i()(this,"_dismissDropdown",(()=>{this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss()})),i()(this,"_handleOnEmptyStateDismiss",(()=>{this._dismissDropdown(),this._inputRef&&this._inputRef.blur()})),i()(this,"_handleLayout",(()=>{this._updatePosition()})),i()(this,"_handleInputLayoutChanged",(()=>{this._updatePosition()})),i()(this,"_updatePosition",(()=>{if(!this._inputContainerNode)return;const{bottom:e}=this._inputContainerNode.getBoundingClientRect();e!==this.state.dropdownOffset&&this.setState({dropdownOffset:e})})),i()(this,"_handleDropdownRef",(e=>{this._dropdownRef=e})),i()(this,"_setRootContainerNode",(e=>{this._rootContainerNode=e||null})),i()(this,"_setInputRef",(e=>{this._inputRef=e})),i()(this,"_setInputContainerNode",(e=>{this._inputContainerNode=e||null,this._inputContainerNode&&this._updatePosition()})),i()(this,"_handleFocusChange",(e=>{const t=R.a.getCount()>0;this._rootContainerNode&&this._rootContainerNode.contains(e.target)||t||this.state.showTypeaheadDropdown&&this._dismissDropdown()})),i()(this,"_handleKeyDown",(e=>{const{key:t}=e,{showTypeaheadDropdown:s}=this.state;if(Object(E.e)(e)){if(t===r.a)return this._focusNext(),void e.preventDefault();if(t===r.b)return this._focusPrevious(),void e.preventDefault();if(t===r.d)return this._dismissDropdown(),void e.preventDefault();if(t!==r.f)return t===r.c&&this._hasFocusedItem()?(this._selectFocusedItem(),void e.preventDefault()):void(s||this.setState({showTypeaheadDropdown:!0}));this._dismissDropdown()}})),i()(this,"_handleItemFocusChanged",(()=>{this.setState({ariaDescendantId:Object(E.b)()})})),i()(this,"_handleInputClear",(()=>{this.setQuery("")})),i()(this,"_handleInputFocus",(()=>{this.setState({showTypeaheadDropdown:!0}),this._updatePosition(),this.props.onFocus&&this.props.onFocus()})),i()(this,"_handleInputChange",(e=>{this.setQuery(e.target.value),this._updatePosition()})),i()(this,"_handleFormSubmit",(e=>{e.preventDefault(),e.stopPropagation(),this._inputRef&&this._inputRef.blur(),this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss(),this.props.onSubmit&&this.props.onSubmit()})),i()(this,"_handleItemClick",((e,t)=>{const{shouldClearOnSelect:s,shouldFocusOnClear:o,onDismiss:i,onItemClick:r}=this.props,a=s?"":this.state.query;this.setState({showTypeaheadDropdown:!1}),this._inputRef&&(s&&o?this._inputRef.focus():this._inputRef.blur()),this.setQuery(a),i&&i(),r&&r(e,t)})),i()(this,"_hasFocusedItem",(()=>this._dropdownRef&&this._dropdownRef.hasFocusedItem())),i()(this,"_selectFocusedItem",(()=>{this._dropdownRef&&this._dropdownRef.selectFocusedItem()})),i()(this,"_focusNext",(()=>{this._dropdownRef&&this._dropdownRef.focusNext()})),i()(this,"_focusPrevious",(()=>{this._dropdownRef&&this._dropdownRef.focusPrevious()})),this.state={ariaDescendantId:Object(E.b)(),query:e.initialValue,showTypeaheadDropdown:!1},this._dropdownDomId=`typeaheadDropdown-${F}`,F+=1,this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}componentDidMount(){window.document.addEventListener("click",this._handleFocusChange,!0)}componentWillUnmount(){window.document.removeEventListener("click",this._handleFocusChange,!0)}render(){return a.createElement(S.a,null,this._render)}focus(){this._inputRef&&this._inputRef.focus()}setQuery(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}i()(k,"defaultProps",{disableClearButton:!1,filter:[b.a.Users,b.a.Topics],isInSidebar:!1,initialValue:"",withSectionDivider:!0}),i()(k,"contextType",I.a);const N=w.a.create((e=>({root:{flex:1,flexDirection:"column",position:"relative",zIndex:m.d+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flexShrink:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:`calc(80vh - ${e.componentDimensions.appBarHeight})`},wrapper:{alignItems:"stretch",flex:1},topBorder:{borderTopColor:e.colors.gray200,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small}})));t.default=k},"5T6p":function(e,t,s){"use strict";var o=s("ERkP"),i=s("MWbm"),r=s("TIdA"),a=s("A91F"),n=s("t62R");const c=s("rHpw").a.create((e=>({root:{flexDirection:"row",flexShrink:1,flexGrow:1},bodyColumn:{justifyContent:"center",flexDirection:"column",marginRight:e.spaces.space4,marginLeft:e.spaces.space12,flexShrink:1},coverContainer:{borderRadius:e.borderRadii.large,overflow:"hidden"},cellThumbnail:{height:e.spaces.space48,width:e.spaces.space48},largeCellThumbnail:{height:e.spaces.space56,width:e.spaces.space56}})));t.a=function(e){const{image:t,title:s,supportText:l,withNewTypeaheadUI:d,style:h}=e;return o.createElement(i.a,{style:[c.root,h]},o.createElement(i.a,{style:[c.coverContainer,d?c.largeCellThumbnail:c.cellThumbnail]},t?o.createElement(r.a,{accessibilityLabel:"",aspectMode:a.a.SQUARE,image:t}):null),o.createElement(i.a,{style:c.bodyColumn},l?o.createElement(n.c,{color:"gray700",numberOfLines:1,size:"subtext2"},l):null,o.createElement(n.c,{numberOfLines:2,weight:"bold"},s)))}},AQOc:function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return d}));s("kYxP");var o=s("lnti"),i=s("aWyx");const r={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},a=(e=[],t={})=>e.map((e=>{if(e.proof_type===i.d.MUTUAL_FRIENDS){const{users:s,...i}=e;return{...i,users:Object(o.a)(s.map((e=>t[e])))}}return e})),n=(e=[],t={})=>e.reduce(((e,s)=>{const o=s.user_id,i=t[o]||{id_str:o};return e[o]={...s,user:i},e}),{}),c=(e,{entries:t,entryIdsByConversationId:s})=>(s[e]||[]).map((e=>t[e]&&t[e].data)).filter(Boolean),l=(e,t=r,s)=>{const{conversation_id:o,participants:i,...a}=e;return{conversation_id:o,...a,entries:t.entryIdsByConversationId[o]||[],participants:n(i,s)}},d=(e,t,s)=>{const{conversation_id:o,participants:i,social_proof:r,...l}=e;return{conversation_id:o,...l,entries:c(o,t),participants:n(i,s),...r?{social_proof:a(r,s)}:{}}}},OEYw:function(e,t,s){"use strict";var o=s("97Jx"),i=s.n(o),r=s("KEM+"),a=s.n(r),n=s("ERkP"),c=(s("kYxP"),s("hqKg")),l=s("oEoC"),d=s("o52z"),h=s("kGix"),u=s("M0jS"),p=s("Qyxo"),m=s("lnti"),f=s("rxPX"),_=s("0KEI"),y=(s("MvUL"),s("/kEJ")),b=s("oEOe"),w=s("vy4g"),g=s("3A2y"),I=s("Y6L+"),v=s("9EWH"),x=s("Ssj5"),E=s("GZwR");const C="typeaheadV2",R=[],S=Object.freeze({REQUEST:"rweb/typeaheadV2/FETCH_REQUEST",SUCCESS:"rweb/typeaheadV2/FETCH_SUCCESS",FAILURE:"rweb/typeaheadV2/FETCH_FAILURE"}),T=({q:e,result_type:t,src:s},o)=>{let i=t;return null!=o&&o.communityId&&(i=`${t}_${o.communityId}`),`${e}_${i}_${s}`},D={remoteResults:{},cachedIds:[]};const O=e=>e.map((({tokens:e,rounded_score:t,...s})=>{const{topic:o,topic_type:i}=s,r=i||E.b.Topic;return{id:`${r}_${o.replace(" ","_")}`,type:r,tokens:e,rounded_score:t,data:s}})),P=e=>e.map((({tokens:e,rounded_score:t,...s})=>{var o;const i=s.topic_type||E.b.Event,r=null==s||null==(o=s.url)?void 0:o.match(I.w.id);return{id:(null==r?void 0:r[0])||"",type:i,tokens:e,rounded_score:t,data:s}})),F=(e,t)=>e.typeaheadV2.remoteResults[t],k=(e,t)=>(s,o)=>{const i=F(o(),T(e,t)),r=i&&i.timestamp;return r&&Date.now()-r<=3e5?Promise.resolve():s(N(e,t))},N=(e,t)=>(s,o,{api:i})=>{if(!e||!e.q||""===e.q.trim())return Promise.resolve();const r={queryId:T(e,t)},{communityId:a}=t||{},n=e.result_type.split(","),c={actionTypes:S,context:"FETCH_TYPEAHEAD",meta:r};if(n.includes(E.a.CommunityUsers)&&a){const t=e=>{const{entities:t}=(null==e?void 0:e.invite_action_results)||{};return t?[Object(y.c)(t)]:void 0};return Object(b.b)(s,{params:{communityId:a,prefix:e.q},request:i.Typeahead.fetchCommunityInviteUsers})(c,t)}return Object(b.b)(s,{params:e,request:i.Typeahead.fetch})(c)};x.a.register({[C]:function(e=D,t){switch(t.type){case S.REQUEST:{const{meta:{queryId:s}}=t;return Object(v.a)(e,(e=>{e.remoteResults[s]||(e.remoteResults[s]={fetchStatus:h.a.NONE}),e.remoteResults[s].fetchStatus=h.a.LOADING}))}case S.SUCCESS:{const{meta:{queryId:s},payload:o}=t;if(!o)return e;const i=o.users.map((e=>Object(w.a)(e,E.c.Remote))),r={fetchStatus:h.a.LOADED,id:s,orderedSections:o.ordered_sections,events:P(o.events),topics:O(o.topics),users:Object(E.g)(i),timestamp:Date.now()};return Object(v.a)(e,(e=>{e.cachedIds=e.cachedIds.filter((e=>e!==s)),e.cachedIds.push(s),e.cachedIds.length>=25&&(e.remoteResults=Object(g.a)(e.remoteResults,e.cachedIds.splice(0,1))),e.remoteResults[s]=r}))}case S.FAILURE:{const{meta:{queryId:s}}=t;return Object(v.a)(e,(e=>{e.remoteResults[s].fetchStatus=h.a.FAILED}))}default:return e}}});var j=s("UQTn");const U=[E.a.Users],L=e=>{const{filter:t,query:s,source:o,communityId:i}=e;return T({q:s,result_type:(t||U).join(","),src:o},{communityId:i})},A=(e,t)=>((e,t)=>{const s=F(e,t);return s&&s.fetchStatus})(e,L(t)),M=(e,t)=>((e,t)=>{const s=F(e,t);return s&&s.users||R})(e,L(t)),H=(e,t)=>((e,t)=>{const s=F(e,t);return s&&s.topics||R})(e,L(t)),q=(e,t)=>((e,t)=>{const s=F(e,t);return s&&s.events||R})(e,L(t)),B=(e,t)=>(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0),W=()=>Object(c.createSelector)(M,Object(c.createSelector)(((e,t)=>t.query),((e,t)=>t.filter),j.d,j.e,((e,t,s,o)=>{if(!e||!t||t.indexOf(E.a.Users)<0)return Object(d.a)();const i=Object(j.f)(s,e);return Object(E.g)(i.map((e=>o[e])).sort(B).slice(0,10))})),A,((e,t)=>t.injectedItems),((e,t)=>t.query),((e,t)=>t.getUserExactMatch),((e,t)=>t.userLimit),((e,t,s,o,i,r,a)=>{const n=Object(p.a)(o||[],(e=>e.type===E.b.User?e.data.id_str:void 0)),c=t.filter((e=>n.indexOf(e.id)<0)),u=e.filter((e=>n.indexOf(e.id)<0)),m=Object(l.a)(c,u).slice(0,a||10),f=s===h.a.LOADED,_=r&&r({query:i,hasResults:!!e.length,isLoaded:f}),y=_?[...m,_]:m;return y.length?y:Object(d.a)()})),V=()=>Object(c.createSelector)(W(),Object(c.createSelector)(H,A,((e,t)=>t.query),((e,t)=>t.maxTopics),((e,t)=>t.getTopicExactMatch),((e,t,s,o,i)=>{const r=t===h.a.LOADED,a=i&&i({query:s,hasResults:!!e.length,isLoaded:r}),n=e.slice(0,o||3);return a&&n.push(a),n.length?n:Object(d.a)()})),Object(c.createSelector)(q,A,((e,t)=>t.query),((e,t)=>t.maxEvents),((e,t)=>t.filter),((e,t,s,o,i)=>{const r=s&&i&&i.indexOf(E.a.Events)>=0,a=e.slice(0,o||1);return a.length&&r?a:Object(d.a)()})),((e,t)=>t.injectedItems),((e,t)=>t.orderResults),((e,t,s,o,i)=>{const r=o&&o.length?o:null,a=i?i(r,e,t,s):Object(m.a)([r,s.length?s:void 0,t.length?t:void 0,e.length?e:void 0]);return t.length||e.length||s.length?a:r?[r]:Object(d.a)()}));var z=Object(f.a)().propsFromState((()=>({fetchStatus:A,items:V()}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(_.d)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:k,fetchUsersPresenceIfNeeded:u.b.fetchManyIfNeeded,prefetchTypeaheadUsersIfNeeded:j.b}))).withAnalytics({element:"typeahead"}),G=s("8UdT"),Q=s("kIAd"),$=s("Rp9C"),Y=s("ZNx0"),X=s("7nmT"),Z=s.n(X),K=s("ZcYN"),J=s("MWbm"),ee=s("oQhu"),te=s("w6IS"),se=s("JYMr"),oe=s("0yYu"),ie=s("rHpw"),re=s("MXDK");class ae extends n.Component{constructor(e,t){super(e),a()(this,"_setFocusedItemRef",(e=>{this._shouldScrollToFocusedItem&&e&&(Object(re.c)(this._getScrollParent(),e),this._shouldScrollToFocusedItem=!1)})),a()(this,"_resetScroll",(()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)})),a()(this,"_getFlattenedItems",Object(ee.a)((e=>Object(te.a)(e)))),a()(this,"_handleItemClick",((e,t)=>{const{items:s,onItemClick:o}=this.props,i=this._getFlattenedItems(s).indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&o(e,i),this._resetFocus()})),a()(this,"_getResultCount",(()=>{const{items:e}=this.props;return this._getFlattenedItems(e).length})),a()(this,"_setFocusIndex",((e,t)=>{const{items:s,onItemFocusChanged:o}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),o&&o(this._getFlattenedItems(s)[e])})),a()(this,"_resetFocus",(()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)})),a()(this,"focusNext",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)})),a()(this,"focusPrevious",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)})),a()(this,"hasFocusedItem",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();return e>=0&&t>e})),a()(this,"selectFocusedItem",(()=>{const{focusIndex:e}=this.state,{items:t,getItemIsDisabled:s}=this.props;if(this.hasFocusedItem()){const o=this._getFlattenedItems(t)[e],i=!!s&&s(o,o.data);this._handleItemClick(o,i)}})),this.state={focusIndex:e.withItemAlwaysSelected?0:-1,showProgressBar:!1}}componentDidMount(){this._resetFocus(),this.props.isLoading&&(this._delayedProgressTimeout=setTimeout((()=>this.setState({showProgressBar:!0})),Q.a))}componentWillUnmount(){clearTimeout(this._interactivityTimeout),clearTimeout(this._delayedProgressTimeout)}UNSAFE_componentWillReceiveProps(e){!this.props.isLoading&&e.isLoading&&(this._delayedProgressTimeout=setTimeout((()=>this.setState({showProgressBar:!0})),Q.a)),this.props.isLoading&&!e.isLoading&&(clearTimeout(this._delayedProgressTimeout),this.setState({showProgressBar:!1}))}componentDidUpdate(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout((()=>{this._shouldBlockInteractivity=!1}),500))}render(){const{domId:e,isLoading:t,items:s,renderHeader:o,selectedItems:i,style:r,renderNoResultsState:a}=this.props,{showProgressBar:c}=this.state,l=t||s.length;let d=0;const h=!!i;return l?n.createElement(Y.a,{viewType:"typeahead_dropdown"},n.createElement(J.a,{accessibilityMultiSelectable:h,accessibilityRole:"listbox",nativeID:e,style:r},n.createElement(se.a,{ariaValueText:c?"Loading results":"",indeterminate:c,style:!c&&ne.hidden}),o?o():null,s.length?s.map(((e,t)=>{const o=!Array.isArray(s[t-1])&&t>0,i=t<s.length-1,r=Array.isArray(e)?this._renderTypeaheadGroup(e,d,o,i):this._renderTypeaheadItem(e,d);return d+=Array.isArray(e)?e.length:1,r})):null)):a?a():null}_renderTypeaheadGroup(e,t,s,o){const{withSectionDivider:i}=this.props;return n.createElement(n.Fragment,{key:`typeaheadGroup-${t}`},i&&s?n.createElement(oe.a,{key:`typeaheadDividerTop-${t}`}):null,e.map(((e,s)=>this._renderTypeaheadItem(e,t+s))),i&&o?n.createElement(oe.a,{key:`typeaheadDividerBottom-${t}`}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:s,getItemDisabledMessage:o,getItemIsDisabled:i,renderUserDecoration:r,selectedItems:a,source:c}=this.props,{focusIndex:l}=this.state,d=!(!a||!e.id)&&a.indexOf(e.id)>=0,h=!!a,u=l===t,p=i&&i(e,e.data),m=o&&o(e,e.data);return n.createElement(K.b,{disabledMessage:m,domId:u?s:void 0,isDisabled:p,isFocused:u,isInMultiSelect:h,isSelected:d,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:u?this._setFocusedItemRef:void 0,renderUserDecoration:r,source:c})}_getScrollParent(){if(!this._scrollParent){const e=Object(re.a)(Z.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}const ne=ie.a.create((e=>({hidden:{visibility:"hidden"}})));var ce=s("v6aA"),le=s("VY6S");class de extends n.Component{constructor(e,t){super(e,t),a()(this,"_fetchTypeaheadResultsIfNeeded",(e=>{e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType},{communityId:e.communityId}).catch(e.createLocalApiErrorHandler({}))})),a()(this,"_handleItemClick",((e,t)=>{const{analytics:s,onItemClick:o,query:i}=this.props;o(e,t);const r=$.a.forTypeaheadResult(e,t),a=r?[r]:void 0;s.scribe({action:"click",data:{search_details:{query:i},targets:a}})})),a()(this,"_scribeResults",(()=>{const{analytics:e,items:t,query:s}=this.props;e.scribe({action:"impression",data:{items:$.a.forTypeaheadResults(t),search_details:{query:s}}})})),this._debouncedFetchTypeaheadResultsIfNeeded=Object(le.a)(this._fetchTypeaheadResultsIfNeeded,250),this.state={shouldShowPrefetchResults:void 0===this.props.shouldShowPrefetchResults||this.props.shouldShowPrefetchResults}}componentDidMount(){const{createLocalApiErrorHandler:e,prefetchTypeaheadUsersIfNeeded:t}=this.props;this._debouncedFetchTypeaheadResultsIfNeeded(this.props),t().catch(e({}))}componentWillUnmount(){clearTimeout(this._prefetchResultsTimer)}componentDidUpdate(e){const{createLocalApiErrorHandler:t,fetchUsersPresenceIfNeeded:s,items:o,onItemsChanged:i,shouldDeferPrefetch:r,shouldShowPrefetchResults:a,query:n,filter:c,source:l}=this.props,{query:d,filter:u,source:p}=e,{loggedInUserId:m}=this.context,f=(this.context.featureSwitches.isTrue("responsive_web_fleets_user_presence_enabled")||this.context.featureSwitches.isTrue("voice_rooms_typeahead_audiospace_ring_enabled"))&&m;if(null!=o&&o.length&&o!==e.items&&(this._scribeResults(),i&&i(o),f)){const e=Object(te.a)(o).filter((e=>e.type===G.b.User)).map((e=>e.id));e&&s(e).catch(t({}))}n===d&&c===u&&l===p||(this._debouncedFetchTypeaheadResultsIfNeeded(this.props),r&&!1!==a&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout((()=>{this.props.query&&this.props.fetchStatus!==h.a.LOADED&&this.setState({shouldShowPrefetchResults:!0})}),Q.a)))}render(){const{analytics:e,communityId:t,contextText:s,dropdownRef:o,filter:r,fetchUsersPresenceIfNeeded:a,getTopicExactMatch:c,getUserExactMatch:l,injectedItems:d,items:u,onItemClick:p,onItemsChanged:m,query:f,shouldDeferPrefetch:_,shouldShowPrefetchResults:y,topicType:b,userLimit:w,fetchStatus:g,createLocalApiErrorHandler:I,fetchTypeaheadIfNeeded:v,maxEvents:x,maxTopics:E,orderResults:C,prefetchTypeaheadUsersIfNeeded:R,...S}=this.props,T=f&&g!==h.a.LOADED,D=T&&!this.state.shouldShowPrefetchResults?d:u;return n.createElement(ae,i()({},S,{isLoading:!!T,items:D,onItemClick:this._handleItemClick,ref:o}))}}a()(de,"contextType",ce.a),a()(de,"defaultProps",{filter:[E.a.Users],injectedItems:[],maxEvents:3,maxTopics:1});const he=n.forwardRef(((e,t)=>n.createElement(de,i()({},e,{dropdownRef:t})))),ue=z.forwardRef(he);t.a=ue},OhSZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return _}));s("kYxP");var o=s("ERkP"),i=s("aWyx"),r=s("XnpN"),a=s("3XMw"),n=s.n(a),c=s("jV+4"),l=s("pjBI"),d=s("t62R"),h=s("rHpw"),u=s("p9G8");const p=n.a.cfd94063,m=(e=[])=>e.map((({data:e})=>e)),f=h.a.create((e=>({title:{maxWidth:"50%"}}))),_=({conversation:e,newConversationParticipants:t,perspective:s})=>{if(e){if(e.type===i.a.ONE_TO_ONE){const[t]=Object(r.a)(e,s).map((({user:e})=>e));return t.name}return Object(u.a)(e,s)}{const e=m(t);return Object(u.b)(e,s)}};t.b=({conversation:e,newConversationParticipants:t,perspective:s,titleWeight:a="bold",textColor:n="normal",withScreenName:h=!0,isSearchTitle:_=!1})=>{if(e){if(e.type===i.a.ONE_TO_ONE){const[t]=Object(r.a)(e,s).map((({user:e})=>e));return o.createElement(c.a,{color:n,isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,weight:a,withLink:!1,withScreenName:h})}{const{participants:t}=e,i=Object.keys(t).length;return _?o.createElement(l.a,{color:n},o.createElement(d.c,{color:n,numberOfLines:1,style:f.title,weight:a},Object(u.a)(e,s,_)),o.createElement(d.c,{color:"gray700",numberOfLines:1,weight:"normal"},p({peopleCount:i}))):o.createElement(d.c,{color:n,numberOfLines:1,weight:a},Object(u.a)(e,s,_))}}{const e=m(t);return o.createElement(d.c,{color:n,numberOfLines:1,weight:a},Object(u.b)(e,s))}}},V5Qi:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var o=s("AQ79");const i=(e,t)=>e[o.a]?e[o.a].conversations[t]:null},ZcYN:function(e,t,s){"use strict";s.d(t,"a",(function(){return ie}));var o=s("KEM+"),i=s.n(o),r=s("ERkP"),a=s("ZNx0"),n=s("IMYl"),c="typeaheadResult",l=s("AQOc"),d=s("V5Qi"),h=s("G6rE"),u=s("rxPX");const p=(e,t)=>t.conversationId,m=(e,t)=>Object(d.a)(e,p(0,t));var f=Object(u.a)().propsFromState((()=>({conversationId:p,conversation:m,users:h.e.selectAll}))).adjustStateProps((({conversationId:e,conversation:t,users:s})=>({conversation:t&&Object(l.b)(t.data,void 0,s)}))),_=s("aA19"),y=s("OhSZ"),b=s("5mJL"),w=s("rHpw");const g=w.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.space40,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}})));var I=f((({conversation:e,perspective:t,isDisabled:s,isSelected:o})=>e?r.createElement(b.a,{avatarCell:r.createElement(_.a,{conversation:e,perspective:t,size:"xLarge"}),avatarCellStyle:g.avatarColumn,avatarSize:"xLarge",cellStyle:g.bodyColumn,style:[g.root,!o&&s&&g.disabled]},r.createElement(y.b,{conversation:e,perspective:t}),ie({isSelected:o})):null)),v=s("MWbm"),x=s("LbZ7"),E=s("t62R"),C=s("9Xij"),R=s("TIdA"),S=s("A91F");class T extends r.PureComponent{render(){const{image:e,event:t,supportText:s}=this.props;return r.createElement(v.a,{style:O.root},r.createElement(x.a,{withGutter:!0},r.createElement(v.a,{style:O.bodyColumn},s?r.createElement(E.c,{color:"gray700",size:"subtext2"},s):null,r.createElement(E.c,{numberOfLines:1},t)),e?r.createElement(v.a,{style:O.coverContainer},r.createElement(C.a,{ratio:1},r.createElement(R.a,{accessibilityLabel:"",aspectMode:S.a.SQUARE,image:e}))):null))}}const D="100px",O=w.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.gray200,borderRadius:e.borderRadii.small,flexGrow:1,justifyContent:"flex-end",maxHeight:D,maxWidth:D,overflow:"hidden",width:"25%"}})));var P=T,F=s("5T6p"),k=s("EHV7");class N extends r.PureComponent{render(){const{isDisabled:e,resultContext:t,topic:s}=this.props;return r.createElement(v.a,{style:[j.root,e&&j.disabled]},r.createElement(E.c,{weight:"bold",withHashflags:!0},s),t?r.createElement(v.a,{style:j.context},this._renderIcon(),r.createElement(E.c,{color:"gray700"},t.display_string)):null)}_renderIcon(){const{resultContext:e}=this.props;return e&&e.types[0]&&"followable_topic"===e.types[0].type?r.createElement(k.a,{style:j.icon}):null}}const j=w.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.subtext2,paddingRight:e.spaces.space4,width:e.fontSizes.subtext2},disabled:{backgroundColor:e.colors.gray0}})));var U=N,L=(s("kYxP"),s("M0jS"));const A=(e,t)=>Object(L.d)(e,t.userId),M=(e,t)=>Object(L.e)(e,t.userId);var H=Object(u.a)().propsFromState((()=>({userFleets:A,userSpace:M}))),q=s("3XMw"),B=s.n(q),W=s("tocL"),V="TypeaheadUser",z=s("GZwR"),G=s("v6aA"),Q=s("GjuJ"),$=s("IMA+");const Y=B.a.ae2205d1,X=B.a.d960b55b,Z=B.a.fd06b02f,K=Object.freeze({num_of_followers:W.a.Follow,bio:W.a.TextOnly,location:W.a.Location,num_tweets:W.a.NewTweets,follow_relationship:W.a.Follow,followers_follow:W.a.Follow,social_proof:W.a.SocialProof,follow_relationship_mutual_follow:W.a.FollowMutual,follow_relationship_followed:W.a.FollowFollowed,follow_relationship_following:W.a.FollowFollowing});class J extends r.PureComponent{constructor(...e){super(...e),i()(this,"_handleAvatarClick",(()=>{const{userFleets:e,userSpace:t}=this.props;e||t||this._handleClick()})),i()(this,"_handleClick",(()=>{const{isDisabled:e,item:t,onItemClick:s}=this.props;s&&s(t,!!e)}))}render(){const{avatarUri:e,disabledMessage:t,isDisabled:s,isProtected:o,isVerified:i,name:a,screenName:n,source:c,decoration:l,userId:d,userFleets:h,userSpace:u,withNewTypeaheadUI:p}=this.props,{featureSwitches:m}=this.context,f=this._getSocialContext(),_=this._getResultContext()||f,y=c===z.d.SearchBox,b=((e,t,s)=>s.isTrue("responsive_web_fleets_user_presence_enabled")&&e?{presenceRingType:e.fully_read?Q.a.FleetRead:Q.a.FleetUnread,link:`/${t}/fleets/`}:void 0)(h,n,m),w=u&&m.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")?u:void 0,g=w||b;return w&&(w.accessibilityLabel=Z({screenName:n})),r.createElement($.a,{avatarSize:"xLarge",avatarUri:e,decoration:l,disabledMessage:s?t:void 0,displayMode:p?"ExperimentalUserTypeahead":"UserCompact",isProtected:o,isVerified:i,name:a,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:y?g:void 0,screenName:n,socialContext:_,testID:V,userId:d,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?Y:X;return{contextType:W.a.Follow,text:t}}_getResultContext(){const{resultContext:e,source:t}=this.props;if(!e||!e.display_string||!e.types||t!==z.d.SearchBox)return;return{contextType:(e.types.length?K[e.types[0].type]:void 0)||W.a.TextOnly,text:e.display_string}}}i()(J,"contextType",G.a),i()(J,"defaultProps",{withNewTypeaheadUI:!1});var ee=H.forwardRef(J),te=s("htQn");class se extends r.Component{constructor(e,t){super(e,t),i()(this,"_onViewRef",(e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)})),i()(this,"_handleClick",(()=>{const{item:e}=this.props;e.type!==z.b.User&&this.props.onClick&&this.props.onClick(e,this.isDisabled)})),this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")&&e.source===z.d.SearchBox}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame((()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})})))}componentDidUpdate(e){const{onRef:t}=this.props;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef)}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:s,isInMultiSelect:o,isSelected:i,style:n}=this.props;return r.createElement(a.a,{viewType:"typeahead_result"},r.createElement(v.a,{accessibilityRole:"option",accessibilityState:{checked:!(!o||!i)||void 0,selected:t?void 0:o&&i||!o&&!!s},nativeID:e,testID:c},r.createElement(te.a,{accessibilityRole:o?"checkbox":"button",disabled:t,focusable:!0,onPress:this._handleClick,style:[!this._withNewTypeaheadUI&&!w.a.isVdlRefreshEnabled()&&oe.border,s&&oe.focused,oe.transitionStyles,this._loaded&&oe.loaded,n],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{item:e,disabledMessage:t,isDisabled:s,isSelected:o,onClick:i,renderUserDecoration:a,source:n}=this.props;switch(e.type){case z.b.User:{const{data:c}=e,l=a?a({userId:c.id_str,isSelected:o}):void 0;return r.createElement(ee,{avatarUri:c.profile_image_url_https,canDm:!!c.can_dm,canMediaTag:!!c.can_media_tag,decoration:l||void 0,disabledMessage:t,isDisabled:s,isProtected:!!c.protected,isVerified:!!c.verified,item:e,name:c.name,onItemClick:i,resultContext:c.result_context,screenName:c.screen_name,socialContext:c.social_context,source:n,userId:c.id_str,withNewTypeaheadUI:this._withNewTypeaheadUI})}case z.b.Event:{const{data:t}=e;return this._withNewTypeaheadUI?r.createElement(F.a,{image:t.primary_image&&t.primary_image.original_info,style:oe.itemPadding,supportText:t.supporting_text,title:t.topic,withNewTypeaheadUI:!0}):r.createElement(P,{event:t.topic,image:t.primary_image&&t.primary_image.original_info,supportText:t.supporting_text})}case z.b.Hashtag:case z.b.Topic:{const{data:t}=e;return r.createElement(U,{isDisabled:s,resultContext:t.result_context,topic:t.topic})}case z.b.DMConversation:return!!this.context.loggedInUserId&&r.createElement(I,{conversationId:e.id,isDisabled:s,isSelected:o,perspective:this.context.loggedInUserId});case z.b.NoResult:{const{data:t}=e,{text:s}=t;return r.createElement(E.c,{style:oe.noResult},s)}default:return null}}get isDisabled(){return!!this.props.isDisabled}}i()(se,"contextType",G.a);const oe=w.a.create((e=>({border:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},checkIcon:{color:e.colors.primary},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},loaded:{opacity:1},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}}))),ie=({isSelected:e})=>e?r.createElement(n.a,{accessibilityHidden:!0,style:oe.checkIcon}):null;t.b=se},aA19:function(e,t,s){"use strict";var o=s("ERkP"),i=s("aWyx"),r=s("XnpN"),a=s("rHpw"),n=s("9Xij"),c=s("cm6r"),l=s("TIdA"),d=s("A91F"),h=s("oSwX"),u=s("U+bB"),p=s("MWbm");const m=a.a.create((e=>({root:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",overflow:"hidden",width:"100%"},image:{borderRadius:e.borderRadii.none}}))),f=a.a.create((e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:`calc(-1 * ${e.borderWidths.small})`}}))),_=a.a.create((e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}}))),y=({left:e,right:t})=>o.createElement(p.a,{style:f.container},o.createElement(p.a,{style:f.left},e),o.createElement(p.a,{style:f.right},t)),b=({top:e,bottom:t})=>o.createElement(p.a,{style:_.container},o.createElement(p.a,{style:_.top},e),o.createElement(p.a,{style:_.bottom},t));class w extends o.Component{render(){const{link:e,conversation:t,perspective:s}=this.props,i=t&&t.avatar_image_https,a=t?Object(r.a)(t,s).map((({user:e})=>e)):[],l=a.slice(0,3),d=this._avatarFromGroup(t)||this._avatarFromSrc(i)||this._avatarFromParticipants(l),h=e||this._defaultLink(t,a);return d?o.createElement(n.a,{ratio:1,style:m.root},h?o.createElement(c.a,{interactiveStyles:null,link:h},d):d):null}_defaultLink(e,t){if(e)return e.type===i.a.GROUP?`/messages/${e.conversation_id}/participants`:e.type===i.a.ONE_TO_ONE?`/${t[0].screen_name}`:void 0}_avatarFromGroup(e){const t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?o.createElement(l.a,{accessibilityLabel:"",aspectMode:d.a.SQUARE,backgroundColor:a.a.theme.colors.gray50,image:t,rounded:!0}):null}_avatarFromSrc(e){return e?o.createElement(u.a,{source:e}):null}_avatarFromParticipants(e){const t=e.length;return 0===t?null:1===t?this._singleParticipantAvatar(e[0]):this._multipleParticipantAvatar(e)}_singleParticipantAvatar(e){const{size:t}=this.props;return o.createElement(p.a,{key:e.id_str,style:m.container},o.createElement(h.default,{accessibilityHidden:!0,focusable:!1,size:t||"xxLarge",style:m.image,uri:e.profile_image_url_https}))}_multipleParticipantAvatar(e){const t=e.length,s=e.map(((e,s)=>{const i=2===t||3===t&&0===s?.5:1;return o.createElement(p.a,{key:e.id_str,style:m.container},o.createElement(h.default,{accessibilityHidden:!0,aspectRatio:i,circle:!1,focusable:!1,size:"custom",style:m.image,uri:e.profile_image_url_https}))}));if(2===t)return o.createElement(y,{left:s[1],right:s[0]});{const e=o.createElement(b,{bottom:s[2],top:s[1]}),t=s[0];return o.createElement(y,{left:e,right:t})}}}t.a=w},o52z:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var o=s("VPAj");const i=Object(o.a)([]);Object(o.a)({})},p9G8:function(e,t,s){"use strict";s.d(t,"b",(function(){return h}));s("kYxP");var o=s("Xrkv"),i=s("aWyx"),r=s("XnpN"),a=s("3XMw"),n=s.n(a);const c=n.a.b5b7fb93,l=n.a.g755fcde,d=n.a.f6b1ff81;t.a=(e,t,s)=>{const{type:o,name:a,participants:n={}}=e;if(o===i.a.GROUP&&a)return a;if(!Object.keys(n).length)return;if(o===i.a.GROUP&&s)return c;const l=Object(r.a)(e,t).map((({user:e})=>e));return h(l,t,o)};const h=(e=[],t,s=i.a.GROUP)=>{const r=e.filter((e=>e.id_str!==t)).map((e=>e.name));switch(r.length){case 0:return l;case 1:{const[e]=r;return s===i.a.GROUP?d({name:e}):e}default:{const e=!0;return Object(o.a)(r,e)}}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.Communities~bundle.Explore~bundle.UserLists.dc395e15.js.map