(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0nhk":function(e,t,n){"use strict";var a=n("97Jx"),r=n.n(a),i=n("ERkP"),o=n("1YZw"),s=n("rxPX"),c=Object(s.a)().propsFromActions((()=>({addToast:o.b}))).withAnalytics(),l=n("3XMw"),u=n.n(l),d=n("I6Uj"),p=n("dgjd"),h=n("/yvb"),m=n("fn9Y"),f=n("rHpw");function g(e){return i.createElement(h.a,r()({},e,{borderColor:"transparent",style:w.shareButton,type:"neutral"}),k.share)}function b(e){return i.createElement(h.a,r()({accessibilityLabel:k.share,borderColor:"transparent",color:"text",hoverLabel:{label:k.share},icon:i.createElement(m.a,null),size:"normal",type:"neutral"},e))}const y=e=>`https://twitter.com/i/spaces/${e}`,S={page:"audiospace",component:"share_sheet"},v={share:{element:void 0,action:"impression"},copyLink:{element:"link",action:"click"},dm:{element:"send_dm",action:"click"},tweet:{element:"send_tweet",action:"click"}},w=f.a.create((e=>({shareButton:{width:"100%"}}))),k={share:u.a.ifea3114},x=c((function(e){const{audioSpaceId:t,type:n,isFixed:a}=e,{utils:r}=Object(p.b)(t),o=r.hashtags().join(" ");return i.createElement(d.a,{ButtonComponent:"icon"===n?b:g,isFixed:a,scribeNamespace:S,scribeNamespaceOverrides:v,shareText:o,url:y(t)})}));t.a=x},"2C8o":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return k}));n("kYxP"),n("MvUL");var a=n("ERkP"),r=n("Chkh"),i=n("ssnq"),o=n("Xda3");const s=new i.a({liveCaptions:[],pastCaptions:[],currentCaptionSequenceId:0}),c=s;function l(){c.reset()}function u(){return a.useEffect((()=>{const e=r.a.subscribe(o.a.ChatCaption,m),t=r.a.subscribe(o.a.ServerAudioTranscription,f);return function(){e(),t()}}),[]),s.useSlice((e=>[...e.pastCaptions,...e.liveCaptions]))}function d(){return s.useSlice((e=>{const{liveCaptions:t,pastCaptions:n}=e;return 0!==t.length||0!==n.length}))}function p(e){s.setState((t=>{e.filter(w).forEach((e=>{const n=e.body.body,a=e.data.sender.twitter_id,r=v(t,a);-1===r?g(t,e):function(e,t){const{longer:n,shorter:a}=e.length<t.length?{longer:t,shorter:e}:{longer:e,shorter:t};if(0===n.length)return 1;return(n.length-function(e="",t=""){const n=Array(t.length+1).fill(null).map((()=>Array(e.length+1).fill(null)));for(let t=0;t<=e.length;t+=1)n[0][t]=t;for(let e=0;e<=t.length;e+=1)n[e][0]=e;for(let a=1;a<=t.length;a+=1)for(let r=1;r<=e.length;r+=1){const i=e[r-1]===t[a-1]?0:1;n[a][r]=Math.min(n[a][r-1]+1,n[a-1][r]+1,n[a-1][r-1]+i)}return n[t.length][e.length]}(n,a))/parseFloat(n.length)}(n,t.liveCaptions[r].text)>.1?b(t,e,r):S(t,e,r)}))}))}function h(e){s.setState((t=>{e.filter(w).forEach((e=>{const n=e.data.sender.twitter_id,a=v(t,n);e.body.final?function(e,t,n){const a=t.data.sender.twitter_id;let r;if(n>-1){const[t]=e.liveCaptions.splice(n,1);r=t.sequenceId}else e.currentCaptionSequenceId+=1,r=e.currentCaptionSequenceId;const i=x(t,{final:!0,sequenceId:r});e.pastCaptions=[...e.pastCaptions,i],y(e,a,t.timestamp)}(t,e,a):-1===a?g(t,e):!function(e,t,n){let a=!1;const r=e.liveCaptions[n].text,i=t.body.body;if(!t.body.final&&i.length>0&&r.length>0){a=i.length/r.length<.2}return a}(t,e,a)?b(t,e,a):S(t,e,a)}))}))}function m(e){return p(e),Promise.resolve(!0)}function f(e){return h(e),Promise.resolve(!0)}function g(e,t){const n=t.data.sender.twitter_id;e.currentCaptionSequenceId+=1;const a=x(t,{sequenceId:e.currentCaptionSequenceId});return e.liveCaptions.push(a),y(e,n,t.timestamp),a}function b(e,t,n){const[a]=e.liveCaptions.splice(n,1),{sequenceId:r,timestamp:i}=a,o=x(t,{sequenceId:r,timestamp:i});return e.liveCaptions.push(o),o}function y(e,t,n){e.liveCaptions.filter((e=>!(e.speaker.id_str===t)&&n-e.timestamp>250)).forEach((t=>{const n=e.liveCaptions.findIndex((e=>e.sequenceId===t.sequenceId)),[a]=e.liveCaptions.splice(n,1);e.pastCaptions.push(a)}))}function S(e,t,n){const a=t.data.sender.twitter_id,[r]=e.liveCaptions.splice(n,1);r.final=!0,e.pastCaptions=[...e.pastCaptions,r];const i=g(e,t);return y(e,a,t.timestamp),i}function v(e,t){return e.liveCaptions.findIndex((e=>e.speaker.id_str===t))}function w(e){const{body:{body:t}}=e;return!!t&&t.length>0}function k(e){const{body:{body:t},type:n}=e;return o.a.Chat===n&&t.startsWith("[cc]")}function x(e,t){const{body:{final:n},data:{sender:a,sender:{twitter_id:r}},timestamp:i}=e;let{body:{body:o}}=e;const{sequenceId:s}=t;return o=o.replace(/^\[cc\]\s?/,""),{final:n,sequenceId:s||i,speaker:{id_str:r,name:a.display_name,profile_image_url_https:a.profile_image_url,screen_name:a.username},text:o,timestamp:i,...t}}},"89tF":function(e,t,n){"use strict";function a(e){const t={};return Object.keys(e).forEach((e=>{t[e]=e})),Object.freeze(t)}n.d(t,"a",(function(){return a}))},A7Vd:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return u}));const a=new(n("ssnq").a)({id:null,api:null,state:null,guests:{lookup:{},signature:""},chatToken:null}),r=a;function i(e,t,n){var r;let i="SPEAKERS";const o={host:{audioLevel:0}};if(n){o.host.audioLevel=d(n.audioLevels.host);const e=Object.keys(n.guests);for(let t=0;t<e.length;t++){const a=e[t],r=n.guests[a],s=r.UserId,c=d(n.audioLevels.guests[a]);o[s]={guest:r,audioLevel:c},i+=`-${s}`}}const s={signature:i,lookup:o},c=(null==(r=t.tracks[t.currentTrackId])?void 0:r.chatToken)||null;a.setState((n=>({...n,id:e,state:t,guests:s,chatToken:c})))}function o(e,t){a.setState((n=>({...n,id:e,api:t})))}function s(e){return a.useSlice((t=>{const n=e.isHost?"host":e.periscopeUserId;if(!n)return 0;const a=t.guests.lookup[n],r=null==a?void 0:a.audioLevel;return"number"==typeof r?r:0}))}function c(){return a.useSlice((e=>e.guests.lookup))}function l(){const e=a.useSlice((e=>e.guests.lookup),{equalityFn:(e,t,n,a)=>n.guests.signature===a.guests.signature});return{get:t=>e[t]}}function u(){const{state:e}=a.getState();return null==e?void 0:e.tracks[e.currentTrackId]}function d(e){return e/100}},Chkh:function(e,t,n){"use strict";n("kYxP");var a=n("A7Vd"),r=n("2C8o"),i=n("ssnq"),o=n("Xda3");function s(e,t){let n,a=0,r=e.length-1,i=-1,o=-1;if(a>r)return-1;for(;a<=r;){if(i=Math.floor((a+r)/2),o=t(e[i]),void 0!==n&&0!==o)return n;o>=0?a=i+1:r=i-1,0===o&&(n=i)}return void 0!==n||o>0?i:i-1}t.a=new function(){let e,t=0,n=0,c=0,l=0;const u={},d=new i.a({});function p(){clearTimeout(e)}function h(e,t){if(Array.isArray(u[e])){const n=s(u[e],(e=>t.ntpTimeInSeconds-e.ntpTimeInSeconds));u[e].splice(n+1,0,t)}else u[e]=[t]}function m(){!function(){function e(){return Object.keys(u).filter((e=>u[e]&&u[e].length>0)).map((e=>Number(e))).map((e=>e))}d.setState((a=>{let r={...a};return n===t?(l+=1,c=t+100*l/1e3):(l=0,c=n=t),e().forEach((e=>{const t=u[e];if(!t||0===t.length)return;const n=a[e]||[],i=s(t,(e=>c-e.ntpTimeInSeconds));if(i<0)return;const o=t.splice(0,i+1);r={...r,[e]:[...n,...o]}})),r}))}(),e=setTimeout(m,100)}return a.d.subscribe((e=>{var t;const n=e.state;return null==n||null==(t=n.tracks[n.currentTrackId])?void 0:t.id3NtpTime})).onUpdate((e=>{e&&(t=e)})),{publish:function(e){setTimeout((()=>{!function(e){switch(e.type){case o.a.Chat:Object(r.a)(e)&&h(o.a.ChatCaption,e);break;case o.a.ServerAudioTranscription:h(e.type,e)}}(e)}))},reset:function(){p();for(const e in u)delete u[e];t=0,n=0,c=0,l=0,d.reset()},setCurrentNtpTimeSeconds:function(e){t=e},stacks:u,start:function(){m()},stop:p,store:d,subscribe:function(e,t){return d.subscribe((t=>t[e]||[])).onUpdate((n=>{n&&n.length>0&&t(n).then((t=>{var n;t&&(n=e,d.setState((e=>({...e,[n]:[]}))))}))}))}}}},I6Uj:function(e,t,n){"use strict";var a=n("97Jx"),r=n.n(a),i=n("KEM+"),o=n.n(i),s=(n("kYxP"),n("ERkP")),c=n("CaKu"),l=n("1YZw"),u=n("rxPX");var d=Object(u.a)().propsFromActions((()=>({addToast:l.b}))).withAnalytics({element:"share"}),p=n("3XMw"),h=n.n(p),m=n("fn9Y"),f=n("/yvb");const g=h.a.c0530da5,b=h.a.ifea3114;var y=({renderMenu:e,onPress:t,style:n,testID:a})=>{const r=s.createElement(m.a,null);return s.createElement(f.a,{accessibilityLabel:g,hoverLabel:{label:b},icon:r,onPress:t,pullRight:!0,renderMenu:e,style:n,testID:a,type:"experimentalText"})},S="share-button",v="share-by-tweet",w=n("TnY3"),k=n("mjJ+"),x=n("rHpw");n("Cm4o");var E=n("I/9y"),C=n("SOvA"),P=n("jwTb");const T=h.a.if23a251,R=h.a.f61c4bbf,I=h.a.fcc684a9,L=h.a.e05c00b4,_=h.a.f88553c8;class A extends s.Component{constructor(...e){super(...e),o()(this,"_handleSharePress",(()=>{const{analytics:e,scribeNamespace:t,scribeNamespaceOverrides:n}=this.props;let a={...t,action:"share_menu_click"};null!=n&&n.share&&(a={...a,...n.share}),e.scribe(a)})),o()(this,"_renderMenu",(e=>{const t=this._getActionItems();return s.createElement(k.a,{isFixed:this.props.isFixed,items:t,onCloseRequested:e,shouldCloseOnClick:!0})})),o()(this,"_getActionItems",(()=>{const e=[];return e.push(this._getTweetShareAction()),e.push(this._getDmShareAction()),c.a.isAvailable()&&e.push(this._getCopyLinkAction()),void 0!==window.navigator.share&&e.push(this._getShareAction()),e})),o()(this,"_getShareAction",(()=>{const{externalShareLabel:e}=this.props;return{text:e,onClick:this._handleShare,Icon:m.a}})),o()(this,"_handleShare",(()=>{const{analytics:e,url:t,scribeNamespace:n,shareText:a}=this.props,r={text:a,url:t};window.navigator.share&&window.navigator.share(r).then((()=>{e.scribe({...n,action:"share_via"})})).catch((()=>{e.scribe({...n,action:"share_error"})}))})),o()(this,"_getCopyLinkAction",(()=>{const{copyLinkShareLabel:e}=this.props;return{text:e,onClick:this._handleCopyLink,Icon:E.a}})),o()(this,"_handleCopyLink",(()=>{const{analytics:e,url:t,addToast:n,scribeNamespace:a,scribeNamespaceOverrides:r}=this.props;c.a.setString((e=>{const t=new URL(e,"https://twitter.com");return t.searchParams.has("s")||t.searchParams.set("s","20"),t.href})(t));let i={...a,action:"copy_link"};null!=r&&r.copyLink&&(i={...i,...r.copyLink}),e.scribe(i),n({text:_})})),o()(this,"_getDmShareAction",(()=>{const{dmShareLabel:e}=this.props;return{text:e,onClick:this._handleDMShare,Icon:C.a}})),o()(this,"_handleDMShare",(()=>{const{analytics:e,history:t,url:n,scribeNamespace:a,scribeNamespaceOverrides:r}=this.props;let i={...a,action:"share_via_dm"};null!=r&&r.dm&&(i={...i,...r.dm}),e.scribe(i),t.push({query:{text:n},pathname:"/messages/compose"})})),o()(this,"_getTweetShareAction",(()=>{const{tweetShareLabel:e}=this.props;return{text:e,onClick:this._handleTweetShare,Icon:P.a,testID:v}})),o()(this,"_handleTweetShare",(()=>{const{analytics:e,history:t,url:n,scribeNamespace:a,shareText:r,scribeNamespaceOverrides:i}=this.props;let o={...a,action:"share_via_tweet"};null!=i&&i.tweet&&(o={...o,...i.tweet}),e.scribe(o),t.push({pathname:"/compose/tweet",query:{text:`${""+(r?` ${r}`:"")} ${n}`},state:{positionCursorAtBeginning:!0}})}))}render(){const{ButtonComponent:e}=this.props;return s.createElement(e,{onPress:this._handleSharePress,renderMenu:this._renderMenu})}}o()(A,"defaultProps",{externalShareLabel:T,dmShareLabel:R,tweetShareLabel:I,copyLinkShareLabel:L,ButtonComponent:function(e){return s.createElement(y,r()({},e,{style:M.button,testID:S}))}});const M=x.a.create((e=>({button:{marginRight:e.spaces.space4}})));t.a=Object(w.a)(d(A))},"JH+F":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("FgXs");function r(e){return"object"!=typeof e||null===e?e:Array.isArray(e)?e.map(r):Object(a.a)(e,(e=>r(e)))}},LxAE:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a={};n.r(a),n.d(a,"buildPlayerProps",(function(){return b})),n.d(a,"buildDockConfig",(function(){return y}));var r={};n.r(r),n.d(r,"buildPlayerProps",(function(){return x})),n.d(r,"buildDockConfig",(function(){return E}));n("kYxP");var i=n("Nsgw"),o=n("OoQt"),s=n("Xda3"),c=n("ERkP"),l=n("QEWO"),u=n("v6aA"),d=n("97Jx"),p=n.n(d),h=n("lKRO"),m=n("A7Vd"),f=n("qOS+");function g(e){const[t]=e.activeItem;return t?{activeItem:t}:null}function b({context:e,commonApi:t}){const n=g(e);if(!n)return{media:null};const{activeItem:a}=n;return{broadcastId:a.id,disablePlaybackCoordination:!0,mediaKey:a.mediaKey,onPlayerApi:function(e){m.b(a.id,e)},onPlayerState:function(e,t){m.c(a.id,e,t)}}}function y({history:e,context:t,commonApi:n,audioDockProps:a}){const r=g(t);if(!r)return null;const{activeItem:i}=r;return c.createElement(f.a,p()({audioSpaceId:i.id,onRequestClose:function(){n.clear(),h.e.reset()}},a))}n("MvUL");var S=n("zrc3"),v=n("qzrz"),w=n("WRe9");function k(e){var t;const[n]=e.activeItem,a=e.hydrateVoiceTweetTrack(n.conversationId),r=Object(S.a)(a.tweets,(e=>e.id_str===n.id)),i=a.tweets[r];if(!i)return null;const[o]=(null==(t=i.extended_entities)?void 0:t.media)||[],s="photo"!==(null==o?void 0:o.type)?o:null;return{activeItem:n,track:a,media:s,activeIndex:r,activeTweet:i}}function x({context:e,commonApi:t}){const n=k(e);if(!n)return{media:null};const{activeItem:a,activeIndex:r,media:i,track:o}=n,s=o.tweets[r+1];return{media:i,requestedTimecode:a.startTimeMs,onEnded:()=>{s&&t.load.voiceTweet(s)}}}function E({history:e,context:t,commonApi:n,audioDockProps:a}){const[r]=t.playerApi,[i]=t.playerState,o=n.currentTrack;if(!i||!r||!o)return null;const s=k(t);if(!s)return null;const{media:l,track:u,activeIndex:d,activeTweet:p}=s,{isMuted:h,isPlaying:m,volume:f,isScrubbing:g}=i;let b=0,y=0;C(u.tweets,(({i:e,endMs:t})=>{e===d-1&&(y=t),b=t}));const S=l&&l.id_str===o.contentId&&o.currentTimeMs||0,w=y+S,x=null==l?void 0:l.url,E=p.full_text,P=x&&E?E.replace(x,"").trim():E,T=p.user;return c.createElement(v.a,{isWide:a.isSideNavLayout,width:a.width,isMuted:h,isPlaying:m,isScrubbing:g,progressMs:w,durationMs:b,volume:100*f,title:P,user:T,onRequestClose:n.clear,onTogglePlayback:n.togglePlayback,onDockPress:()=>e.push(p.permalink),onMuteToggle:n.toggleMute,onVolumeChange:n.setVolume,onSeek:function(e){C(u.tweets,(({i:t,tweet:a,startMs:i,endMs:o,durationMs:s})=>{if(e>=i&&e<=o){const o=e-i;if(t===d){const e=o/s;r.scrubToFraction(e)}else n.load.voiceTweet(a,o);return!0}}))}})}function C(e,t){let n=0;for(let a=0;a<e.length;a++){const r=e[a],i=w.a.getVoiceTweetDuration(r),o=n+i;if(t({i:a,tweet:r,startMs:n,endMs:o,durationMs:i}))break;n=o}}const P={default:{buildDockConfig:()=>null},space:a,voiceTweet:r};function T(){const e=c.useRef({}),{history:t}=c.useContext(u.a),n=c.useContext(o.a),[a,r]=n.activeItem,[d,p]=n.playerApi,[h,m]=n.playerState,[f,g]=n.guestsState,b=R(h);e.current.playerApi=d,e.current.playerState=h;const y=c.useMemo((()=>function(){s.b(),r(null)}),[r]),S=c.useMemo((()=>function(){const{playerApi:t,playerState:n}=e.current;if(t&&n){(n.isPlaying?t.pause:t.play)()}}),[]),v=c.useMemo((()=>function(){const{playerApi:t,playerState:n}=e.current;if(t&&n){(n.isMuted?t.unmute:t.mute)()}}),[]),w={space:function(e,t){r({type:l.a.space,id:e,mediaKey:t})},voiceTweet:function(e,t){r({type:l.a.voiceTweet,id:e.id_str,conversationId:i.a(e),startTimeMs:t})}},k={load:w,clear:y,currentTrack:b,toggleMute:v,togglePlayback:S,setVolume:c.useMemo((()=>function(t){const{playerApi:n}=e.current;n&&n.setVolume(t/100)}),[])};return{activeItem:a,load:w,clear:y,player:{api:d,state:h,guests:f,currentTrack:b,toggleMute:v,togglePlayback:S},config:{dock:function(e){if(!a)return P.default.buildDockConfig();switch(a.type){case l.a.space:return P.space.buildDockConfig({history:t,context:n,commonApi:k,audioDockProps:e});case l.a.voiceTweet:return P.voiceTweet.buildDockConfig({history:t,context:n,commonApi:k,audioDockProps:e});default:return P.default.buildDockConfig()}},player:function(){const e={media:null,onPlayerApi:function(e){p(e)},onPlayerState:function(e,t){m(e),t&&g(t)}};if(!a)return e;let t;switch(a.type){case l.a.space:t=P.space.buildPlayerProps({context:n,commonApi:k});break;case l.a.voiceTweet:t=P.voiceTweet.buildPlayerProps({context:n,commonApi:k});break;default:throw new Error(`[AudioContext:Player] unhandled active item type [${a.type}]`)}return{...e,...t}}},audioSpaces:{cache:n.audioSpaceCache}}}const R=e=>e&&e.tracks[e.currentTrackId]},"Pc/x":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const a=new(n("qrPT").a);var r=n("G6rE");let i;const o=new Error("[AudioModule] config not initialized");var s=new class{constructor(){this.proxsee=a}init(e){i=e,a.init(i)}initialized(){return!!i}loggedInUser(){if(this.initialized()){const e=i.store.getState();return r.e.selectLoggedInUser(e)}}audioSpace(e){return i?i.api.AudioSpaces.byId(e):Promise.reject(o)}subscribeToScheduledSpace(e){return i?i.api.AudioSpaces.subscribeToScheduledSpaceById(e):Promise.reject(o)}unsubscribeFromScheduledSpace(e){return i?i.api.AudioSpaces.unsubscribeFromScheduledSpaceById(e):Promise.reject(o)}}},QEWO:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("ERkP"),n("qrPT"),n("qOS+"),n("v6aA"),n("c0YY");var a=n("89tF");n("XOJV");const r=Object(a.a)({space:!0,voiceTweet:!0,voiceMessage:!0})},Rumh:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var a=n("97Jx"),r=n.n(a),i=n("ERkP"),o=n("3XMw"),s=n.n(o);const c={truncate0:s.a.g08cbaba,truncate1:s.a.d58baa7e};function l(e){if(e<1e3)return String(e);return 2===Math.floor(Math.log10(e))%3?c.truncate0(e):c.truncate1(e)}var u=n("cm6r"),d=n("wD1h"),p=n("Oe3h"),h=n("0FVZ"),m=n("FBXD");function f(e){return Object(m.a)((t=>{"function"==typeof e&&e()}))}var g=n("t62R"),b=n("/yvb"),y=n("hOZg"),S=n("21zW");function v(e){const t=Math.max(0,e.count-1),n=i.useMemo((()=>{const e=l(t);return w.plusOthers({count:e})}),[t]);return i.createElement(g.c,{numberOfLines:1},n)}const w={others:s.a.gfe2830e,here:s.a.bfb44f89,plusOthers:s.a.dc718e53};var k=n("Xyrk"),x=n("rHpw"),E=n("MWbm");function C(e){const t=f(e.onRequestClose);return i.createElement(E.a,{style:T.container},i.createElement(E.a,{style:T.gradientBar},i.createElement(k.a.Animated,null)),i.createElement(E.a,{style:T.content},i.createElement(E.a,{style:T.text},i.createElement(E.a,{style:T.participantsRow},e.activeSpeakers),i.createElement(g.c,{color:"gray700",numberOfLines:1},i.createElement(v,{count:e.totalParticipants}),i.createElement(S.a,null),e.title)),i.createElement(b.a,{accessibilityLabel:P.close,borderColor:"transparent",color:"text",icon:i.createElement(y.a,null),onPress:t,size:"normal",testID:"close"})))}const P={close:s.a.af8fa2ad},T=x.a.create((e=>({container:{borderRadius:"inherit",overflow:"hidden"},gradientBar:{position:"absolute",height:"50%",width:"100%"},content:{borderRadius:"inherit",marginTop:3,backgroundColor:e.colors.navigationBackground,paddingVertical:e.spaces.space8,paddingHorizontal:e.spaces.space4,flexDirection:"row",justifyContent:"center",alignItems:"center"},participantsRow:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},text:{marginHorizontal:e.spaces.space12,marginVertical:e.spaces.space4,flexDirection:"column",flex:1}})));function R(e){const{isWide:t,wideDockMaxWidth:n}=e,a=t?h.a.DesktopVoiceTweetDock:h.a.MobileVoiceTweetDock,o=t?[A.root,{maxWidth:n}]:null;return i.createElement(a,null,i.createElement(p.a,{id:"SpaceDock"},((t,n)=>i.createElement(E.a,r()({ref:t()},n({style:o})),i.createElement(I,e)))))}function I(e){const t=i.useRef(null),n=e.isWide&&A.borderRadius;const a=i.useMemo((()=>function(){t.current&&t.current.focus()}),[]);return i.useEffect((()=>{const e=function(e){e.code};return t.current&&t.current.addEventListener("keydown",e),function(){t.current&&t.current.removeEventListener("keydown",e)}}),[t.current]),i.createElement(d.a,{enabled:!0,handlers:{[d.a.shortcuts.audio.dock]:a}},i.createElement(u.a,{accessibilityLabel:L.dock,onPress:f(e.onDockPress),ref:function(e){t.current=e},style:[_.container,n]},i.createElement(E.a,{style:[_.innerContainer,n]},i.createElement(C,e))))}R.formatCountShort=l;const L={dock:s.a.jbc5f47a},_=x.a.create((e=>({container:{backgroundColor:e.colors.navigationBackground,boxShadow:e.boxShadows.xSmall},innerContainer:{backgroundColor:e.colors.navigationBackground}}))),A=x.a.create((e=>({root:{alignSelf:"flex-end",width:"100%",marginVertical:e.spaces.space20,marginRight:e.spaces.space20},borderRadius:{borderRadius:e.borderRadii.xLarge}})))},TCYy:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("kYxP");var a=n("ERkP"),r=n("rHpw"),i=n("MWbm");function o(e){const{max:t,selectedIndex:n,count:o}=e,d=function(){const{theme:e}=r.a;return 2*l(e).px+e.borderWidthsPx.small}(),p=a.useRef({left:0,right:t-1}),h=a.useRef(0),[m,f]=a.useState(c(p.current,o,d));a.useEffect((()=>{function e(){const e=o-1,{left:t,right:a}=p.current,r=a-n+1<=2&&a!==e,i=n+1-t<=2&&0!==t;return!(!r&&!i)&&(r?(p.current.left=t+1,p.current.right=a+1):i&&(p.current.left=t-1,p.current.right=a-1),!0)}for(;e(););f(c(p.current,o,d)),h.current=n}),[n,o,t,d]);const g=new Array(o).fill(1).map(((e,r)=>{const i=r===n;if(o<=t)return a.createElement(s,{key:r,selected:i});const c=m[r];return a.createElement(s,{continuation:Boolean(c),continuationType:c,key:r,selected:i})}));return a.createElement(i.a,{style:[u.indicatorWindowContainer,{width:`calc(${t} * ${d}px)`,height:`${d}px`}]},a.createElement(i.a,{style:[u.indicatorsContainer,{height:`${d}px`,width:`calc(${d}px * ${o})`},m.style]},g))}function s(e){let t=u.indicator;if(e.selected)t=u.indicatorSelected;else if(e.continuation)switch(e.continuationType){case d.small:t=u.indicatorContinuationSmall;break;case d.medium:t=u.indicatorContinuationMedium}return a.createElement(i.a,{style:t})}function c(e,t,n){const{left:a,right:r}=e,i={style:{transform:[{translateX:-1*n*a}]}};return i[a-1]=d.small,i[a]=d.small,i[a+1]=d.medium,i[r-1]=d.medium,i[r]=d.small,i[r+1]=d.small,0===a?(delete i[0],delete i[1]):r>t-2&&(delete i[t-1],delete i[t-2]),i}function l(e){return{style:e.spaces.space8,px:e.spacesPx.space8}}const u=r.a.create((e=>{const t=l(e).style,n={transition:"transform 200ms"},a={...n,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:e.borderRadii.infinite,marginHorizontal:e.spaces.space4,width:t,height:t,transform:[{scale:.5}]},r={...a,backgroundColor:e.colors.gray300};return{indicatorWindowContainer:{marginVertical:e.spaces.space12,overflow:"hidden",margin:"auto"},indicatorsContainer:{...n,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",margin:"auto"},indicatorSelected:{...a,borderWidth:e.borderWidths.small,borderColor:e.colors.gray300,borderStyle:"solid",backgroundColor:e.colors.white,transform:[{scale:1}]},indicator:{...a,backgroundColor:e.colors.gray300},indicatorContinuationSmall:{...r,transform:[{scale:.3}]},indicatorContinuationMedium:{...r,transform:[{scale:.4}]}}})),d=Object.freeze({small:"small",medium:"medium"})},VKFJ:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));n("kYxP");var a=n("A7Vd"),r=n("ERkP"),i=n("dgjd");function o(e){const{space:t}=Object(i.b)(e),n=a.e();return r.useMemo((()=>{const e=new Map,a=[],r=[];function i(){return{all:[...a,...r],speakers:a,listeners:r}}function c(t,n,i){const s=n.twitter_screen_name;if(!s)return;if(e.has(s))return;e.set(s,!0);const c={key:s,user:n,kind:t,periscopeUserId:i};o.canParticipantSpeak(t)?a.push(c):r.push(c)}if(!t)return i();t.host&&c(s.host,t.host);const l=[...t.cohosts,...t.participants.speakers,...t.participants.listeners];for(let e=0;e<l.length;e++){const a=l[e],r=a.periscope_user_id;if(r){n.get(r)?e<t.cohosts.length?c(s.cohost,a,r):c(s.speaker,a,r):c(s.listener,a,r)}}return i()}),[t,n])}o.canParticipantSpeak=function(e){return Boolean(e&&c[e])},o.isParticipantHost=function(e){return e===s.host};const s=Object.freeze({host:"host",cohost:"cohost",speaker:"speaker",listener:"listener"}),c={[s.host]:!0,[s.cohost]:!0,[s.speaker]:!0}},Xda3:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return C}));var a=n("KEM+"),r=n.n(a),i=(n("MvUL"),n("2C8o")),o=n("A7Vd"),s=n("Pc/x"),c=n("Chkh"),l=n("ssnq"),u=n("dgjd"),d=n("SrIh"),p=n("fEA7"),h=n.n(p);const m="/chatapi/v1/chatnow",f=new l.a({chatmanClient:null});function g(){const{chatmanClient:e}=f.getState();e&&e.disconnect(),c.a.reset(),i.b(),f.reset()}o.d.subscribe((e=>e.chatToken)).onUpdate((e=>{e&&function(e){g(),new b(e).connect().then((e=>{c.a.start(),f.setState((t=>({...t,chatmanClient:e})))}))}(e)}));class b{constructor(e){r()(this,"session",null),r()(this,"socket",null),r()(this,"socketState",k.Uninitialized),r()(this,"handleOnOpen",(()=>{this.authAndJoinRoom(),this.socketState=k.Connected})),r()(this,"handleOnMessage",(e=>{if("string"==typeof e.data){const t=JSON.parse(e.data);if(t.kind===x.Chat){const{payload:e,signature:n}=t,a=new w(e,{signature:n});c.a.publish(a)}}})),this.chatToken=e}connect(){return new Promise(((e,t)=>{s.a.proxsee.accessChat(this.chatToken).then((t=>(this.session=t,this.openSocket(),e(this))),(e=>t(e))).catch((e=>{Object(d.a)(e)}))}))}disconnect(){this.closeSocket(),this.session=null}openSocket(){if(this.session){const e=this.session.endpoint.replace("https://","wss://")+m;this.closeSocket();try{this.socketState=k.Opening,this.socket=new WebSocket(e),this.socket.onopen=this.handleOnOpen,this.socket.onmessage=this.handleOnMessage}catch(e){Object(d.a)(e),this.socketState=k.Error}}}closeSocket(){this.socket&&(this.socket.onopen=()=>{},this.socket.onmessage=()=>{},this.socket.onclose=()=>{},this.socket.close()),this.socket=null,this.socketState=k.Closed}authAndJoinRoom(){if(this.session){var e,t;const{access_token:n,room_id:a}=this.session;null==(e=this.socket)||e.send(v.build(n).toString()),null==(t=this.socket)||t.send(S.buildJoin(a).toString())}}}class y{constructor(e,t){this.payload=e,this.kind=t}toString(){const e=this.payload,t=this.kind;return JSON.stringify({payload:e,kind:t})}}class S extends y{constructor(e){super(e,x.Control),r()(this,"data",{}),this.data=JSON.parse(e)}static buildJoin(e){return new S(JSON.stringify({body:JSON.stringify({room:e}),kind:E.Join}))}}class v extends y{constructor(e){super(e,x.Auth)}static build(e){return new v(JSON.stringify({access_token:e}))}}class w extends y{constructor(e,t={}){var n;super(e,x.Chat),r()(this,"data",{}),r()(this,"body",{});const{currentNtpTimeInSeconds:a,isReplay:i,signature:o}=t;this.data=JSON.parse(e),this.body=(null==(n=this.data)?void 0:n.body)&&JSON.parse(this.data.body)||{},this.setUuid(o),this.setTime(a,i),this.type=this.body.type,this.ntpTimeInSeconds=this.body.ntpTimeInSeconds,this.timestamp=this.body.timestamp}setUuid(e){this.body.uuid=e||this.body.uuid||h.a.v4()}setTime(e=0,t=!1){const n=t&&!!this.body.ntpForBroadcasterFrame?this.body.ntpForBroadcasterFrame:this.body.ntpForLiveFrame||e,a=parseFloat(n/4294967296);this.body.ntpTimeInSeconds=a,this.body.timestamp=Object(u.a)(a).getTime()}isEqual(e){return!(!this.body.uuid||!e.body.uuid)&&this.body.uuid===e.body.uuid}}const k=Object.freeze({Uninitialized:"UNINITIALIZED",Opening:"OPENING",Connected:"CONNECTED",Error:"ERROR",Closed:"CLOSED"}),x=Object.freeze({Chat:1,Control:2,Auth:3}),E=Object.freeze({Join:1,Leave:2,Roster:3,Presence:4,Ban:8}),C=Object.freeze({Unknown:0,Chat:1,Heart:2,Join:3,Location:4,BroadcastEnded:5,InviteFollowers:6,BroadcastStartedLocally:7,BroadcasterUploadedReplay:8,Timestamp:9,LocalPromptToFollowBroadcaster:10,LocalPromptToShareBroadcast:11,BroadcasterBlockedViewer:12,SubscriberSharedOnTwitter:13,SubscriberBlockedViewer:14,SubscriberSharedOnFacebook:15,Screenshot:16,Sentence:29,Sparkle:36,FirstSparkle:37,CommentMuted:39,HydraControlMessage:40,CommentMutedByModerator:41,CommentUnmutedByModerator:42,LocalShouldReportGuestUser:43,UserIsTyping:44,ServerAudioTranscription:45,ChatCaption:201})},dgjd:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v}));n("kYxP");var a=n("A7Vd"),r=n("ERkP"),i=n("QEWO"),o=n("Pc/x"),s=n("nmVb"),c=n.n(s),l=n("kGix"),u=n("3XMw"),d=n.n(u),p=n("AooF"),h=n("LxAE");function m(e){var t,n;const s=function(e){const{fetchAudioSpace:t,getAudioSpace:n,audioContext:r,subscribeToScheduledSpace:i,unsubscribeFromScheduledSpace:s,reportSpaceFor:c}=function(){const e=Object(h.a)(),[t,n]=e.audioSpaces.cache;return{getAudioSpace:a,fetchAudioSpace:s,subscribeToScheduledSpace:r,unsubscribeFromScheduledSpace:i,reportSpaceFor:o.a.proxsee.reportSpaceFor,audioContext:e};function a(e){const n=t[e];return n||f(l.a.NONE)}function r(e){return o.a.subscribeToScheduledSpace(e).then((()=>s(e)))}function i(e){return o.a.unsubscribeFromScheduledSpace(e).then((()=>s(e)))}function s(e,t){const r=a(e);if("number"==typeof t&&r.status!==l.a.NONE){if(!((Date.now()-r.time)/1e3>t))return Promise.resolve(r)}function i(t,a={}){const r=f(t,a);n((t=>{const n=Object.assign({},t[e],r);return t[e]=n,Object.assign({},t)}))}if(!o.a.initialized())return Promise.reject(new Error("[useAudioSpaceMetadata] AudioModule not initialized"));let s;return i(l.a.LOADING),o.a.audioSpace(e).catch((e=>{s=e})).then((e=>{e?i(l.a.LOADED,{data:e,error:void 0}):s&&i(l.a.FAILED,{error:s})}))}}();function u(n){return t(e,n)}function d(){return n(e)}function p(){return i(e)}function m(){return s(e)}function g(){const t={};return Object.keys(c).forEach((n=>{t[n]=()=>{var t;const r=a.a(),i=null==(t=d().data)?void 0:t.started_at;if(r&&r.id3NtpTime&&i){const t=Math.floor(r.id3NtpTime),a={broadcast_id:e,ntp_timestamp:t,timecode:Math.floor((v(t)-i)/1e3)};return c[n](a)}}})),t}return{fetch:u,get:d,subscribe:p,unsubscribe:m,audioContext:r,report:g()}}(e),{audioContext:u,subscribe:d,unsubscribe:m,report:y}=s,S=s.get(),w=S.data,k=null==w?void 0:w.state;function x(){var e;const t=null==w?void 0:w.title,n=null==w||null==(e=w.host)?void 0:e.display_name;return t||(n?b.title({name:n}):b.titleFallback)}const E={is:{NotStarted:k===p.a.SpaceState.NotStarted,PrePublished:k===p.a.SpaceState.PrePublished,Running:k===p.a.SpaceState.Running,TimedOut:k===p.a.SpaceState.TimedOut,Ended:k===p.a.SpaceState.Ended,loaded:!!w||S.status===l.a.FAILED,loading:S.status===l.a.LOADING,error:S.status===l.a.FAILED&&S.error,joined:(null==(t=u.activeItem)?void 0:t.type)===i.a.space&&(null==(n=u.activeItem)?void 0:n.id)===e},title:x,hashtags:function(){return c()(x()).map((e=>`#${e}`))}},C=o.a.initialized(),P=r.useRef({});P.current.utils=E,P.current.audioSpaceMetadata=s,r.useEffect((()=>{let e;const t=g;return C&&function n(){const a=P.current.utils.is.loaded,r=P.current.utils.is.Running;a&&!r||(P.current.audioSpaceMetadata.fetch(t),e=setTimeout(n,1e3*t))}(),function(){clearTimeout(e)}}),[C,e,k]);const T={subscribe:d,unsubscribe:m,report:y,join:function(){o.a.proxsee.login().then((()=>{w&&w.media_key&&E.is.Running&&u.load.space(e,w.media_key)}))}};return{space:w,audioContext:u,utils:E,handlers:T}}function f(e,t={}){const n={status:e,time:Date.now()};return t.data&&(n.data=t.data),t.error&&(n.error=t.error),n}const g=15,b={title:d.a.b6d3e0ee,titleFallback:d.a.ab4fc8bb},y=new Date("Jan 01 1900 GMT").getTime(),S=new Date("Jan 01 1970 GMT").getTime()-y,v=e=>new Date(1e3*e-S)},kRXa:function(e,t,n){"use strict";var a=n("97Jx"),r=n.n(a),i=n("KEM+"),o=n.n(i),s=(n("kYxP"),n("ERkP")),c=n("/yvb"),l=n("mAwA"),u=n("3XMw"),d=n.n(u),p=n("py1r"),h=n("oLZl"),m=n("9RkS"),f=n("rHpw"),g=n("MWbm"),b=n("A53h"),y=n("sTSP");const S=d.a.b3160a69;class v extends s.PureComponent{constructor(...e){super(...e),o()(this,"state",{showSlider:!1,isSliderActive:!1}),o()(this,"_handleButtonLayoutChange",(e=>{const{containerHeight:t}=this.props,{sliderMaxHeight:n}=this.state,{height:a}=e.nativeEvent.layout;if(t){const e=t-a-f.a.theme.spacesPx.space20+"px";e!==n&&this.setState({sliderMaxHeight:e})}})),o()(this,"_handleSliderActive",(e=>this.setState({isSliderActive:e}))),o()(this,"_showSlider",(()=>this.setState({showSlider:!0}))),o()(this,"_hideSlider",(()=>this.setState({showSlider:!1}))),o()(this,"_shouldShowSlider",(e=>e.showSlider||e.isSliderActive)),o()(this,"_normalizeValue",(e=>Math.max(0,Math.min(e,100)))),o()(this,"_getSliderMarginStyles",(e=>{const t=null!=e?e:"normal",n=Object(l.a)("large"===t?"normalLarge":t);return k[n]})),o()(this,"_handleKeyDown",(e=>{const{volumePercent:t,onSliderChange:n}=this.props,{altKey:a,ctrlKey:r,metaKey:i}=e;if(a||r||i)return;const o=e.key===h.a.ArrowUp||e.key===h.a.ArrowRight,s=e.key===h.a.ArrowDown||e.key===h.a.ArrowLeft;if(o||s){const a=this._normalizeValue(t+10*(o?1:-1));n&&n(a),e.preventDefault()}}))}componentDidUpdate(e,t){const{onSliderChange:n,onShowSlider:a,onHideSlider:r}=this.props;if(n){const e=this._shouldShowSlider(t),n=this._shouldShowSlider(this.state);!e&&n&&a&&a(),e&&!n&&r&&r()}}render(){const{accessibilityLabelIcon:e,accessibilityLabelSlider:t,containerHeight:n,isMuted:a,onMuteToggle:i,onSliderChange:o,pullRight:l,volumePercent:u,onShowSlider:d,onHideSlider:h,sliderColor:v,withGraySliderTrack:k,withNavigationSliderBackground:x,...E}=this.props,C=a?s.createElement(b.a,null):s.createElement(y.a,null),P=x?w.sliderWithNavigationBackground:w.sliderWithDefaultBackground;return s.createElement(p.a,{disabled:!o,onFocusRingGained:o?this._showSlider:void 0,onFocusRingLost:o?this._hideSlider:void 0,onHoverIn:o?this._showSlider:void 0,onHoverOut:o?this._hideSlider:void 0},s.createElement(g.a,{onKeyDown:o?this._handleKeyDown:void 0},s.createElement(c.a,r()({accessibilityLabel:e,icon:C,onLayout:this._handleButtonLayoutChange,onPress:i,pullRight:l,type:"invertedText"},E)),o&&s.createElement(p.a,{onFocusRingGained:d,onFocusRingLost:h},(({isFocusedWithin:e})=>s.createElement(g.a,{style:[w.sliderBackground,P,this._getSliderMarginStyles(E.size),e||this._shouldShowSlider(this.state)?null:f.a.visuallyHidden,n&&{maxHeight:this.state.sliderMaxHeight}]},s.createElement(m.a,{accessibilityLabel:t,accessibilityLabelValueText:S({volumePercent:u}),color:v||"white",isVertical:!0,keyboardStep:10,max:100,min:0,onActive:this._handleSliderActive,onChange:o,step:1,value:a?0:u||0,withGrayBackground:k}))))))}}o()(v,"defaultProps",{pullRight:!1});const w=f.a.create((e=>({sliderBackground:{bottom:0,borderRadius:e.borderRadii.xLarge,height:`calc(${e.spaces.space64}*2)`,left:e.spaces.space4,position:"absolute",padding:e.spaces.space12,paddingVertical:e.spaces.space16,right:e.spaces.space4},sliderWithDefaultBackground:{backgroundColor:e.colors.translucentBlack30},sliderWithNavigationBackground:{backgroundColor:e.colors.navigationBackground,boxShadow:e.boxShadows.xSmall}}))),k=f.a.create((({spacesPx:e,spaces:t})=>{const n=`${e.space16+e.space4+e.space2}px`,a=`${e.space20+e.space24}px`,r=`${e.space12+e.space40}px`;return{experimentalXSmall:{marginBottom:t.space24},experimentalSmall:{marginBottom:t.space32},experimentalMedium:{marginBottom:t.space36},experimentalLarge:{marginBottom:a},experimentalXLarge:{marginBotom:r},smallCompact:{marginBottom:n},small:{marginBottom:t.space32},normalCompact:{marginBottom:t.space32},normal:{marginBottom:t.space40},normalLarge:{marginBottom:t.space48},xLarge:{marginBottom:t.space64}}}));t.a=v},lKRO:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));const a=new(n("ssnq").a)({springTo:()=>Promise.resolve(),springToState:null,sheet:{id:null,hasDismissRequest:!1}});function r(){return{sheet:a.useSlice((e=>e.sheet.id)),openSheet:u,requestSheetDismissal:p}}function i(){const{id:e,hasDismissRequest:t}=a.useSlice((e=>e.sheet));return{sheet:e,hasDismissRequest:t,clearSheet:d}}function o(){return a.useSlice((e=>e.springTo))}function s(){return a.useSlice((e=>e.springToState))}function c(e){a.setState((t=>({...t,springToState:e})))}function l(e){a.setState((t=>({...t,springTo:e})))}function u(e){const{sheet:t}=a.getState();t.hasDismissRequest||a.setState((t=>({...t,sheet:{id:e,hasDismissRequest:!1}})))}function d(){const{sheet:e}=a.getState();e.id&&a.setState((e=>({...e,sheet:{id:null,hasDismissRequest:!1}})))}function p(){const{sheet:e}=a.getState();e.id&&a.setState((t=>({...t,sheet:{...e,hasDismissRequest:!0}})))}const h=Object.freeze({full:"full",collapse:"collapse",exit:"exit"}),m=Object.freeze({report:"report"})},ndUM:function(e,t,n){"use strict";var a=n("97Jx"),r=n.n(a),i=n("ERkP"),o=n("21zW"),s=n("rHpw"),c=n("MH+I"),l=n("jV+4"),u=n("MWbm");function d(e){const{speaker:t,speakerAvatarSize:n="small",speakerNameSize:a="subtext2",speakerScreenNameSize:r="subtext2",timestamp:o,withSpeakerAvatar:s=!0,withSpeakerScreenName:c=!0,withTimestamp:d=!1}=e,m=Date.now()-o;return i.createElement(u.a,{style:h.root},i.createElement(l.a,{avatarSize:n,name:t.name,nameSize:a,profileImageUrl:s?t.profile_image_url_https:"",screenName:t.screen_name,screenNameSize:r,style:h.userName,withScreenName:c}),d?i.createElement(p,{size:a,timeMs:m}):null)}function p({size:e="small",timeMs:t}){return i.createElement(i.Fragment,null,i.createElement(o.a,{size:e}),i.createElement(c.a,{color:"gray700",humanReadable:!0,size:e,timeMs:t}))}const h=s.a.create((e=>({root:{flexDirection:"row",flexShrink:1,marginTop:"0.25em"},userName:{marginBottom:e.spaces.space4,paddingRight:e.spaces.space4}})));var m=n("t62R");function f(e){const{caption:t,captionTextSize:n,withSpeaker:a=!0,...o}=e,{speaker:s}=t;return i.createElement(u.a,{style:[g.root,!a&&g.missingSpeakerSpacer]},a?i.createElement(d,r()({},o,{speaker:s,timestamp:t.timestamp})):null,i.createElement(m.c,{lang:t.lang,size:n,style:g.captionText},t.text))}const g=s.a.create((e=>({root:{paddingBottom:"0.25em",flex:1},missingSpeakerSpacer:{paddingTop:"0.1em"},captionText:{lineHeight:"1.5em",paddingVertical:"0.1em",fontWeight:e.highContrastEnabled?e.fontWeights.heavy:e.fontWeights.regular}}))),b=e=>({width:e,height:e});function y(e){const{size:t}=e,n=Math.floor(t/4.5);return i.createElement(u.a,{style:[k.root,v(t)]},i.createElement(S,{width:n}))}function S({width:e}){return i.createElement(i.Fragment,null,Array(3).fill(0).map(((t,n)=>i.createElement(u.a,{key:n,style:[k.dot,w(n,e)]}))))}function v(e){return{...b(e)}}function w(e,t){return{animationDelay:.5*e+"s",borderRadius:"100%",...b(t)}}const k=s.a.create((e=>({root:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"center"},dot:{position:"relative",backgroundColor:e.colors.purple500,display:"inline-block",margin:"auto",pointerEvents:"none",willChange:"transform",animationKeyframes:[{"0%":{backgroundColor:e.colors.purple500},"50%":{backgroundColor:e.colors.purple200},"100%":{backgroundColor:e.colors.purple200}}],animationDirection:"alternate",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}})));var x=n("sIe2");const E=28,C=28;function P(e){const{headerHeight:t}=e;return i.createElement(u.a,{style:{height:t}})}function T(e){const{footerHeight:t,unintelligible:n}=e;return i.createElement(i.Fragment,null,n?i.createElement(y,{size:20}):null,i.createElement(u.a,{style:{height:t}}))}const R=s.a.create((e=>({root:{height:"100%",width:"100%",flex:1},captionsContainer:{maxHeight:"100%",height:"100%"}})));t.a=function(e){const{captions:t,footerHeight:n=E,headerHeight:a=C,scrollContainerStyle:o,unintelligible:s=!1,withFrequentSpeakerAnnouncement:c=!1,...l}=e,d=i.useRef(null),p=i.useRef(null),h=i.useRef({containerHeight:void 0,hasUserScrolledUp:!1});function m(){var e,t;null!=(e=h.current)&&e.hasUserScrolledUp||(null==(t=p.current)||t.scrollToEnd({animated:!0}))}return i.useEffect((()=>{var e;h.current.containerHeight=null==d||null==(e=d.current)?void 0:e.getBoundingClientRect().height}),[]),i.useEffect((()=>{let e=null;return function t(){m(),e=setTimeout(t,1500)}(),function(){clearTimeout(e)}}),[]),i.createElement(u.a,{ref:d,style:R.root},i.createElement(x.a,{ListFooterComponent:i.createElement(T,{footerHeight:n,unintelligible:s}),ListHeaderComponent:i.createElement(P,{headerHeight:a}),accessibilityRole:"listbox",contentContainerStyle:{marginBottom:0},data:t,keyExtractor:e=>e.sequenceId,maintainVisibleContentPosition:{minIndexForVisible:0},onEndReached:function(){m()},onScroll:function({nativeEvent:{contentOffset:e,contentSize:t,layoutMeasurement:a}}){const r=2*(h.current.containerHeight||0)+n,i=t.height-a.height-e.y-r>0;h.current.hasUserScrolledUp=i},ref:p,renderItem:function({index:e,item:n}){let a=!0;var o,s,u;return c||(s=n.speaker,u=null==(o=t[e-1])?void 0:o.speaker,a=!(s&&u&&s.id_str&&u.id_str?s.id_str===u.id_str:s&&u&&s.screen_name&&u.screen_name&&s.screen_name===u.screen_name)),i.createElement(f,r()({},l,{caption:n,key:n.sequenceId,withSpeaker:a}))},scrollEventThrottle:100,style:[R.captionsContainer,o]}))}},nmVb:function(e,t,n){"use strict";var a=n("HJWM");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=(0,r.default)(e),a=0;a<n.length;a++)t.push(n[a].hashtag);return t};var r=a(n("yyPN"));e.exports=t.default},p3P5:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var a=n("ERkP"),r=n("3XMw"),i=n.n(r),o=n("MWbm"),s=n("TIdA"),c=n("oSwX"),l=n("t62R"),u=n("jV+4"),d=n("rHpw"),p=n("VKFJ");const h=s.a.createLayoutCache();function m(e){const{children:t,isVerified:n,kind:r,name:i,screenName:s,width:d}=e,p=r?f[r]:null,m=e.profile_image_url_https||"",b=t||a.createElement(c.default,{accessibilityHidden:!0,focusable:!1,imageLayoutCache:h,screenName:s,size:y,style:g.participantAvatarSize,uri:m,withHoverCard:!0,withLink:!0});return a.createElement(o.a,{style:[{width:d},g.participantCell]},a.createElement(o.a,{style:g.participantAvatarSize},b),a.createElement(l.c,{numberOfLines:1,size:"subtext2",style:g.participantCellUsername,weight:"bold"},a.createElement(u.a,{isVerified:n,name:i})),a.createElement(o.a,{style:g.participantCellKindContainer},e.speakingIndicator,a.createElement(l.c,{color:"gray700",numberOfLines:1,size:"subtext2",style:g.participantCellKind},p||a.createElement("span",null," "))))}const f={[p.a.host]:i.a.cededf29,[p.a.cohost]:i.a.f77997bf,[p.a.speaker]:i.a.i48f4ed8,[p.a.listener]:i.a.a77c8e02},g=d.a.create((e=>{const t=S(e),n={width:t.avatar.size,height:t.avatar.size};return{participantCell:{justifyContent:"center",alignItems:"center",...t.participantCell},participantCellUsername:t.participantCellUsername,participantCellKindContainer:{position:"relative",justifyContent:"center"},participantCellKind:{lineHeight:t.kind.lineHeight},participantAvatarSize:n}}));function b(e){const t=S(e);return{getWidth:function(){return t.participantCell.minWidth+2*t.participantCell.paddingHorizontal},getHeight:function(){return t.participantCell.height+t.participantCell.marginBottom}}}const y="xxLarge";function S(e){const t=parseInt(c.default.getSizeStyle("xxLarge").width,10),n=e.spacesPx.space20,a=e.spacesPx.space8,r=e.spacesPx.space80+2*a,i=e.spacesPx.space4,o=e.lineHeightsPx.headline2,s=e.lineHeightsPx.headline2;return{participantCell:{marginBottom:n,paddingHorizontal:a,minWidth:r,height:t+i+o+s+n},avatar:{size:t},participantCellUsername:{lineHeight:o,paddingTop:i},kind:{lineHeight:s}}}},"qOS+":function(e,t,n){"use strict";n.d(t,"a",(function(){return We}));n("kYxP");var a=n("lKRO"),r=n("ERkP"),i=n("v6aA"),o=n("A7Vd"),s=n("VKFJ"),c=n("MWbm"),l=n("tno6"),u=n("rHpw"),d=n("t62R");function p(e){const t=function(e){const t=r.useRef({lastActive:{displayName:"",audioLevel:0}}),{speakers:n}=Object(s.b)(e),a=o.g(),i={displayName:"",audioLevel:0};if(n.forEach((e=>{const t=e.periscopeUserId||"host",n=a[t];n&&n.audioLevel>i.audioLevel&&e.user.display_name&&(i.displayName=e.user.display_name,i.audioLevel=n.audioLevel)})),i.audioLevel>0)return t.current.lastActive=i,t.current.lastActive;if(t.current.lastActive.displayName)return{...t.current.lastActive,audioLevel:0};const[c]=n;return{...i,displayName:c.user.display_name||""}}(e.audioSpaceId);return r.createElement(h,t)}function h(e){const t=[m.activeSpeakerIndicatorName,0===e.audioLevel&&m.activeSpeakerIndicatorNameInactive];return r.createElement(c.a,{style:m.activeSpeakerIndicatorContainer},r.createElement(l.a,{audioLevel:e.audioLevel,size:u.a.theme.spacesPx.space16,withPersistZeroLevel:!0}),r.createElement(d.c,{style:t},e.displayName))}const m=u.a.create((e=>({activeSpeakerIndicatorContainer:{flexDirection:"row",alignItems:"center"},activeSpeakerIndicatorName:{color:e.colors.purple500,marginLeft:e.spacesPx.space4},activeSpeakerIndicatorNameInactive:{opacity:.6}})));var f=n("Rumh"),g=n("97Jx"),b=n.n(g),y=n("2C8o"),S=n("3XMw"),v=n.n(S),w=n("dgjd"),k=n("6iuV"),x=n("TCYy"),E=n("uCxL"),C=n("jV+4");function P(e){const{space:t}=Object(w.b)(e.audioSpaceId);if(!t)return null;const{sharings:n}=t,a=[...n].reverse().filter((e=>e&&e.tweet&&e.user));return a.length?r.createElement(T,{items:a}):null}function T(e){const{items:t}=e,n=t.reduce(((e,t)=>t.tweet?e.length?`${e}.${t.id}`:t.id:e),"");const[a,i]=r.useState(),o=Math.max(0,t.findIndex((e=>e.id===a)));return r.createElement(r.Fragment,null,r.createElement(k.a,{childrenStyle:_.carouselChildrenStyles,key:n,onVisibleRangeChange:({index:e,intersectionRatio:n})=>{1===n&&i(t[e].id)},updateObserverWithChildren:!0,visibleItemIndex:o},t.map(((e,t)=>r.createElement(R,{item:e,key:e.id||t})))),r.createElement(x.a,{count:t.length,key:`${n}-indicators`,max:I,selectedIndex:o}))}function R(e){if(!e.item)return null;const{tweet:t,user:n}=e.item;return r.createElement(c.a,{key:t.id_str,style:_.sharedContentContainer},r.createElement(E.a,{isCondensed:!0,tweet:t}),r.createElement(C.a,{avatarSize:"small",name:L.sharedBy({name:null==n?void 0:n.name}),nameSize:"subtext2",profileImageUrl:null==n?void 0:n.profile_image_url_https,style:_.sharedContentBy,weight:"normal"}))}const I=8,L={sharedBy:v.a.bdfa93eb},_=u.a.create((e=>({sharedContentContainer:{paddingHorizontal:Be(e).container.paddingHorizontal,width:"100%"},carouselChildrenStyles:{scrollSnapAlign:"center",scrollSnapStop:"always",width:"100%"},sharedContentBy:{marginTop:e.spaces.space8}})));var A=n("ndUM"),M=n("vbJ7");function O(e){const{height:t}=e,n=y.c();return y.d()?r.createElement(c.a,{style:[H.container,{height:t}]},r.createElement(c.a,{style:H.fadeIn}),r.createElement(A.a,{captionTextSize:"body",captions:n,footerHeight:28,headerHeight:28,scrollContainerStyle:H.scrollContainerStyle,withSpeakerAvatar:!0,withSpeakerScreenName:!0}),r.createElement(c.a,{style:H.fadeOut})):null}const H=u.a.create((e=>{const t=M.a.hexToCss(e.colors.navigationBackground,0),n=M.a.hexToCss(e.colors.navigationBackground,.8);return{container:{width:"100%",paddingTop:e.spaces.space2,paddingHorizontal:e.spaces.space8,backgroundColor:e.colors.navigationBackground,boxShadow:`0 0 ${e.spacesPx.space4}px 0 ${e.colors.gray50}`,position:"relative"},scrollContainerStyle:{paddingHorizontal:e.spaces.space8},fadeIn:{position:"absolute",top:0,left:0,width:"100%",height:e.spaces.space16,backgroundImage:e.highContrastEnabled?void 0:`linear-gradient(to top, ${t}, ${n})`,pointerEvents:"none",zIndex:1},fadeOut:{position:"absolute",bottom:0,left:0,width:"100%",height:e.spaces.space8,backgroundImage:e.highContrastEnabled?void 0:`linear-gradient(to bottom, ${t}, ${n})`,pointerEvents:"none",zIndex:1}}})),z=.7,D=.7635,B=.5,j=812,N=300;function V(e,t,n){let a=e;if(t){a=Math.min(j,e);const{top:t,height:r}=n||{},i=t+r;if(i-a<0){const e=i-F(u.a.theme).marginVerticalPx;e>N&&(a=e)}}return{collapse:a*B,half:a*D,sheetMaxHeight:a*z,full:a}}function F(e){const t=e.borderRadiiPx.large,n=e.spaces.space16,a=e.spacesPx.space8;return{borderRadius:t,paddingHorizontal:n,marginVertical:e.spaces.space20,marginVerticalPx:e.spacesPx.space20,shadowOffset:a}}var q=n("CKsB"),U=n("/yvb");function W(e){const{requestSheetDismissal:t}=Object(a.f)(),{handlers:{report:n}}=Object(w.b)(e.audioSpaceId),i=r.useMemo((()=>Object.keys(n).map((e=>({text:$[e],onClick:()=>{n&&n[e]()}})))),[n]);return r.createElement(c.a,{style:J.container},r.createElement(c.a,{style:J.menu},r.createElement(d.c,{align:"center",size:"headline1",style:J.description,weight:"bold"},$.reportThisSpace),r.createElement(d.c,{align:"center",style:J.description},$.describeTheIssue),null==i?void 0:i.map((e=>r.createElement(q.a,{actionText:e.text,key:e.text,onClick:()=>{e.onClick(),t()},textColor:"red500"})))),r.createElement(U.a,{onClick:t,type:"neutral"},$.cancel))}const $={reportThisSpace:v.a.b3481ffd,describeTheIssue:v.a.d0aebc27,cancel:v.a.cfd2f35d,SelfHarm:v.a.g971a4e8,Violence:v.a.b96e6682,SexualContent:v.a.e5bf9b39,ChildSafety:v.a.d2a34320,PrivateInformation:v.a.a9ba3e27,AbusiveBehavior:v.a.d5519f4a},J=u.a.create((e=>{const t=F(e);return{container:{display:"flex",justifyContent:"space-between",height:"100%",paddingVertical:e.spaces.space16},menu:{marginBottom:e.spaces.space20},description:{marginTop:e.spaces.space4,marginBottom:e.spaces.space16,paddingHorizontal:t}}}));var X=n("WrBE"),K=n("i4Oy");function G(e){const{requestSheetDismissal:t}=Object(a.f)();return r.createElement(X.a.View,{onClick:t,style:[Z.dockSheetOverlayBase,e.isSideNavLayout?Q.dockSheetOverlay:Z.dockSheetOverlay,{opacity:e.animation.animatedPan.interpolate({inputRange:[e.animation.shellHeights.half,e.animation.shellHeights.full],outputRange:[1,0]})}]})}function Y(e){return r.createElement(c.a,{style:[e.style,e.hasDismissRequest&&Z.pointerEventsNone]},r.createElement(X.a.View,{style:[Z.contentAnimatedContainer,{maxHeight:e.maxHeight,transform:[{translate3d:"0, 0, 0"},{translateY:e.animation.animatedPan}]}]},r.createElement(c.a,{style:Z.contentWrapperContainer},r.createElement(c.a,{style:Z.contentWrapper},e.children))))}const Z=u.a.create((e=>{const t=F(e),n=t.paddingHorizontal,a=t.borderRadius;return{dockSheetContainer:{position:"absolute",left:0,bottom:0,width:"100%",borderRadius:t.borderRadius},contentAnimatedContainer:{overflowY:"auto",width:"100%",height:"100%",borderRadius:"inherit"},contentContainer:{position:"fixed",width:"100%",bottom:"0",margin:0,padding:0,borderTopRightRadius:a,borderTopLeftRadius:a},contentWrapperContainer:{paddingHorizontal:n,height:"100%",width:"100%",borderRadius:"inherit",backgroundColor:e.colors.navigationBackground},contentWrapper:{height:"100%"},dockSheetOverlayBase:{backgroundColor:e.colors.maskColor,width:"100%"},dockSheetOverlay:{height:"100vh",position:"fixed",top:"0"},pointerEventsNone:{pointerEvents:"none"}}})),Q=u.a.create((e=>{const t=F(e);return{dockSheetContainer:{position:"absolute",left:t.shadowOffset,bottom:-1*t.shadowOffset/2,width:`calc(100% - ${t.shadowOffset}px)`,borderRadius:t.borderRadius},dockSheetOverlay:{borderRadius:"inherit",height:"100%",position:"absolute",left:"0"},contentContainer:{boxShadow:e.boxShadows.xSmall,position:"absolute",left:0,bottom:0,width:"100%",borderRadius:t.borderRadius,overflow:"hidden"}}}));var ee=function(e){const{dockAnimation:t,audioSpaceId:n,isSideNavLayout:i}=e,{sheet:o,clearSheet:s,hasDismissRequest:c}=Object(a.g)(),l=function(e){const t=V(K.a.get("window").height,e),n=r.useRef(new X.a.Value(t.full)).current;return{animatedPan:n,shellHeights:t,springToOpen:e=>X.a.spring(n,{toValue:0,bounciness:2}).start(e),springToClose:e=>X.a.spring(n,{toValue:t.full}).start(e)}}(i),u=t.shellHeights.sheetMaxHeight,d=i?Q.contentContainer:Z.contentContainer,p=r.useMemo((()=>{switch(o){case a.b.report:return r.createElement(W,{audioSpaceId:n});default:return null}}),[o,n]);if(r.useEffect((()=>{p&&l.springToOpen()}),[p,l]),r.useEffect((()=>{c&&l.springToClose(s)}),[l,s,c]),!p)return null;const h=i?Q.dockSheetContainer:Z.dockSheetContainer;return r.createElement(X.a.View,{style:[h,c&&Z.pointerEventsNone,{height:t.shellHeights.full-t.animatedPan._value,opacity:l.animatedPan.interpolate({inputRange:[0,l.shellHeights.half],outputRange:[1,0]})}]},r.createElement(G,{animation:l,isSideNavLayout:i}),r.createElement(Y,{animation:l,hasDismissRequest:c,maxHeight:u,style:d},p))},te=n("Xyrk"),ne=n("k/Ka");function ae(e={}){return Object(ne.a)("svg",{...e,style:[re.root,e.style],viewBox:"0 0 24 24"},r.createElement(r.Fragment,null,r.createElement(te.a.SVGLinearGradient,null),r.createElement("g",{fill:te.a.SVGLinearGradient.fill},r.createElement("path",{d:"M17.97 7.585c-.552 0-1 .448-1 1v3.417c0 2.588-2.156 4.693-4.806 4.693h-.328c-2.65 0-4.806-2.105-4.806-4.693V8.585c0-.552-.448-1-1-1s-1 .448-1 1v3.417c0 3.416 2.618 6.237 5.983 6.64l-.01 1.858H8.27c-.553 0-1 .448-1 1s.447 1 1 1h7.46c.552 0 1-.448 1-1s-.448-1-1-1h-2.726l.01-1.863c3.35-.413 5.955-3.228 5.955-6.635V8.585c0-.552-.448-1-1-1z"}),r.createElement("path",{d:"M12 15.42c2.077 0 3.766-1.688 3.766-3.765v-6.14c0-2.076-1.69-3.765-3.766-3.765S8.234 3.44 8.234 5.516v6.14c0 2.075 1.69 3.765 3.766 3.765z"}))))}ae.metadata={width:24,height:24};const re=u.a.create((e=>({root:{display:"inline-block",fill:"currentcolor",height:"1.25em",maxWidth:"100%",position:"relative",userSelect:"none",textAlignVertical:"text-bottom"}})));var ie=n("0nhk"),oe=n("0FVZ"),se=n("Oe3h"),ce=n("cm6r"),le=n("cTG8"),ue=n("mjJ+"),de=n("U7kY"),pe=n("sIe2"),he=n("7ep7"),me=n("yyPN"),fe=n.n(me),ge=n("GiKA"),be=n.n(ge),ye=n("p3P5"),Se=n("Lsrn");const ve=(e={})=>Object(ne.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Se.a.root,e.style],viewBox:"0 0 17 9.5"},r.createElement("g",null,r.createElement("path",{d:"M16.707.293c-.39-.39-1.023-.39-1.414 0L8.5 7.086 1.707.293c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414l7.5 7.5c.195.195.45.293.707.293s.512-.098.707-.293l7.5-7.5c.39-.39.39-1.023 0-1.414z"})));ve.metadata={width:17,height:9.5};var we=ve,ke=n("DlVf"),xe=n("FXw/");function Ee(e){return r.createElement(Ce,e)}function Ce(e){const t=e.isSideNavLayout?oe.a.WideExpandedSpaceDock:oe.a.NarrowExpandedSpaceDock,n=F(u.a.theme),a=e.width+n.shadowOffset,i=e.isSideNavLayout?[Ve.root,{width:a}]:null,[o,s]=r.useState(),l=r.useRef(null),d=K.a.get("window");return r.useLayoutEffect((()=>{var e;s(null==(e=l.current)?void 0:e.getBoundingClientRect())}),[d.height]),r.createElement(t,null,r.createElement(c.a,{onLayout:function({nativeEvent:{layout:e}}){s(e)},ref:l,style:i},r.createElement(Ie,b()({},e,{layout:o}))))}function Pe(e){const t=F(u.a.theme),n=e.animation.shellHeights.full-t.shadowOffset;return r.createElement(X.a.View,{style:[je.expandedShell,{height:n,transform:[{translate3d:"0, 0, 0"},{translateY:e.animation.animatedPan}]}]},r.createElement(Te,e))}function Te(e){const t=y.d(),n=r.useRef(new X.a.Value(He));function a(){e.animation.springTo("collapse")}function i(){e.animation.springTo("exit")}return r.useEffect((()=>{t&&(n.current=new X.a.Value(He+De))}),[t]),r.createElement(se.a,{id:"SpaceDockExpanded"},((t,o)=>r.createElement(c.a,b()({ref:t()},o({style:je.expandedShellContent})),r.createElement(X.a.View,b()({},e.animation.panResponder.panHandlers,{style:je.expandedShellHeader}),r.createElement(c.a,{style:je.expandedShellHeaderGripContainer},r.createElement(c.a,{style:je.expandedShellHeaderGrip})),r.createElement(c.a,{style:je.expandedShellHeaderButtons},r.createElement(ce.a,{accessibilityLabel:Fe.collapse,hoverLabel:{label:Fe.collapse},onPress:a,style:[je.expandedShellHeaderButton,je.expandedShellHeaderLeft]},r.createElement(we,{style:je.iconChevronDown})),r.createElement(ce.a,{onPress:i,style:[je.expandedShellHeaderButton,je.expandedShellHeaderRight]},r.createElement(d.c,{color:"magenta500",size:"body",weight:"bold"},Fe.leave))),r.createElement(Re,{audioSpaceId:e.audioSpaceId})),r.createElement(X.a.View,{style:[je.participantsContainer,{paddingBottom:X.a.add(n.current,e.animation.animatedPan)}]},e.mounted?r.createElement(_e,e):null))))}function Re(e){const t=Object(w.b)(e.audioSpaceId).utils.title(),n={hashtags:fe()(t).map((e=>(e.text=e.hashtag,e))),user_mentions:be()(t)},a=[0,t.length];return r.createElement(le.a,{displayTextRange:a,entities:n,linkify:!0,numberOfLines:3,size:"headline1",style:je.expandedShellDescription,text:t,weight:"heavy"})}function Ie(e){const[t,n]=r.useState(!1),{featureSwitches:o}=r.useContext(i.a);const s=function(e,t,n){const i=r.useRef({state:a.a.full,animatedPanOffset:0}),o=K.a.get("window"),s=r.useMemo((()=>V(o.height,e.isSideNavLayout,n)),[o.height,e.isSideNavLayout,n]),c=r.useMemo((()=>function(e){let t;switch(e){case a.a.exit:case a.a.collapse:t=0;break;case a.a.full:default:t=s.full}return s.full-t}),[s]),l=r.useRef(new X.a.Value(s.full)).current;r.useEffect((()=>{const e=c(i.current.state);X.a.spring(l,{toValue:e}).start(t)}),[]);const{onToggleCollapsed:u,onRequestClose:d}=e,p=r.useMemo((()=>function(e,t){i.current.state=e,a.d(e);const n=c(i.current.state),r=null==t?void 0:t.vy;return new Promise((t=>{X.a.spring(l,{velocity:r,toValue:n}).start((()=>{e===a.a.collapse?u():e===a.a.exit&&d(),t()}))}))}),[l,c,u,d]);return r.useEffect((()=>{a.c(p)}),[p]),{panResponder:r.useRef(he.a.create({onMoveShouldSetPanResponder:()=>!0,onPanResponderGrant:()=>{i.current.animatedPanOffset=l._value},onPanResponderMove:(e,t)=>{const n=i.current.animatedPanOffset+t.dy;n>=0&&l.setValue(n)},onPanResponderRelease:(e,t)=>{const n=(null==t?void 0:t.vy)||0,r=Math.abs(n)>=ze;l._value>s.collapse||r&&t.dy>0?p(a.a.collapse,t):p(i.current.state,t)}})).current,animatedPan:l,shellHeights:s,springTo:p}}(e,(function(){n(!0)}),e.layout),l={...e,mounted:t,animation:s},u=K.a.get("window");return r.useMemo((()=>{const t=V(u.height,e.isSideNavLayout,e.layout).full,n=e.isSideNavLayout?Ve.container:je.container,a=e.isSideNavLayout?Ve.expandedShellContainer:je.expandedShellContainer,i=e.isSideNavLayout?Ve.footerContainer:je.footerContainer,d=[je.footer,e.isSideNavLayout&&Ve.footer];return r.createElement(X.a.View,{style:[n,je.forceGPULayer,{height:t},{opacity:s.animatedPan.interpolate({inputRange:[s.shellHeights.collapse,s.shellHeights.full],outputRange:[1,0]})}]},r.createElement(c.a,{style:a},r.createElement(Pe,l)),r.createElement(c.a,{style:i},r.createElement(O,{height:De}),r.createElement(c.a,{style:d},r.createElement(c.a,{style:je.footerLeft},o.isTrue("voice_rooms_speaking_enabled")&&r.createElement(U.a,{accessibilityLabel:"Request to speak",borderColor:"transparent",color:"text",hoverLabel:{label:"Request to speak"},icon:r.createElement(ae,null),onPress:()=>{},size:"xLarge",type:"neutral"})),r.createElement(c.a,{style:je.footerRight},r.createElement(Le,null),o.isTrue("voice_rooms_reactions_enabled")&&r.createElement(r.Fragment,null,r.createElement(c.a,{style:je.footerButtonSpacer}),r.createElement(U.a,{accessibilityLabel:"Reactions",borderColor:"transparent",color:"text",hoverLabel:{label:"Reactions"},icon:r.createElement(ke.a,null),onPress:()=>{},size:"normal",type:"neutral"})),o.isTrue("voice_rooms_share_dock_enabled")&&r.createElement(r.Fragment,null,r.createElement(c.a,{style:je.footerButtonSpacer}),r.createElement(ie.a,{audioSpaceId:e.audioSpaceId,isFixed:!0,type:"icon"}))))),r.createElement(ee,{audioSpaceId:e.audioSpaceId,dockAnimation:s,isSideNavLayout:e.isSideNavLayout}))}),[e.audioSpaceId,e.isSideNavLayout,t,u.height,e.layout])}function Le(){const{openSheet:e}=a.f(),[t,n]=r.useState(!1);let i=null;return t&&(i=r.createElement(ue.a,{isFixed:!0,items:[{text:Fe.reportThisSpace,isEmphasized:!0,onClick:()=>{e(a.b.report)}}],onCloseRequested:()=>n(!1),shouldCloseOnClick:!0})),r.createElement(r.Fragment,null,r.createElement(U.a,{accessibilityLabel:Fe.more,borderColor:"transparent",color:"text",hoverLabel:{label:Fe.more},icon:r.createElement(xe.a,null),onPress:()=>n(!0),size:"normal",type:"neutral"}),i)}function _e(e){const{all:t}=Object(s.b)(e.audioSpaceId),n=K.a.get("window"),a=(e.isSideNavLayout?e.width:n.width)-2*Be(u.a.theme).container.paddingHorizontal,i=Object(ye.b)(u.a.theme),o=i.getHeight(),c=i.getWidth(),l=Math.min(4,Math.floor(a/c)),d=a/l;r.useEffect((()=>(e.isSideNavLayout||de.a.disable(),function(){de.a.enable()})),[e.isSideNavLayout]);const p=r.useMemo((()=>{const e=d;return t.map((t=>({...t,width:e})))}),[t,d]);return r.useMemo((()=>{const t={data:p,numColumns:l,keyExtractor:function(e){return e.key},getItemLayout:function(e,t){return{length:o,offset:o*t,index:t}},renderItem:Ae,ListHeaderComponent:r.createElement(P,{audioSpaceId:e.audioSpaceId})};return r.createElement(pe.a,b()({key:l},t))}),[p])}function Ae({item:e}){return r.createElement(Me,{isVerified:e.user.is_verified,key:e.key,kind:e.kind,name:e.user.display_name,periscopeUserId:e.periscopeUserId,profile_image_url_https:e.user.avatar_url,screenName:e.user.twitter_screen_name,width:e.width})}function Me(e){const{periscopeUserId:t,...n}=e,a=s.b.isParticipantHost(n.kind),i=s.b.canParticipantSpeak(n.kind)?r.createElement(Oe,{isHost:a,periscopeUserId:t}):null,o=Object.assign({},{speakingIndicator:i},n);return r.createElement(ye.a,o)}function Oe(e){const{isHost:t,periscopeUserId:n}=e,a=o.f({isHost:t,periscopeUserId:n});return r.createElement(c.a,{style:Ne.container},r.createElement(l.a,{audioLevel:a||0,size:u.a.theme.spacesPx.space16}))}const He=100,ze=.5,De=100;function Be(e){return{container:{paddingHorizontal:e.spacesPx.space8}}}const je=u.a.create((e=>{const t=F(e),n=t.paddingHorizontal,a=t.borderRadius,r=Be(e);return{forceGPULayer:{transform:[{translate3d:"0, 0, 0"}]},container:{position:"fixed",bottom:0,width:"100%",backgroundColor:e.colors.maskColor},expandedShellContainer:{width:"100%",borderRadius:a},expandedShell:{boxShadow:e.boxShadows.xSmall,width:"100%",height:"100%",borderRadius:"inherit"},expandedShellHeader:{userSelect:"none",borderRadius:"inherit"},expandedShellHeaderGripContainer:{paddingVertical:5,justifyContent:"center",alignItems:"center"},expandedShellHeaderGrip:{height:5,width:e.spaces.space36,backgroundColor:e.colors.gray200,borderRadius:e.borderRadiiPx.xLarge},expandedShellHeaderButtons:{flexDirection:"row",justifyContent:"space-between"},expandedShellHeaderButton:{paddingVertical:e.spaces.space12,paddingHorizontal:n},expandedShellHeaderLeft:{},iconChevronDown:{color:e.colors.text,width:e.spaces.space16},expandedShellHeaderRight:{},expandedShellContent:{borderRadius:"inherit",height:"100%",backgroundColor:e.colors.navigationBackground},expandedShellDescription:{marginTop:e.spaces.space4,marginBottom:e.spaces.space16,paddingHorizontal:n},participantsContainer:{...r.container,flex:1,paddingBottom:He},footerContainer:{position:"absolute",bottom:0,width:"100%"},footer:{paddingHorizontal:n,width:"100%",height:He,flexDirection:"row",alignItems:"center",justifyContent:"space-between",boxShadow:`0px -1px 0px ${e.colors.gray50}`,backgroundColor:e.colors.navigationBackground},footerButtonSpacer:{width:e.spaces.space16},footerLeft:{flexDirection:"row"},footerRight:{flexDirection:"row"}}}));const Ne=u.a.create((e=>({container:{position:"absolute",left:-1*(function(e){return{size:e.spacesPx.space16}}(e).size+e.spacesPx.space4)}}))),Ve=u.a.create((e=>{const t=F(e);return{root:{alignItems:"center",alignSelf:"flex-end",width:"100%",marginVertical:t.marginVertical,marginRight:e.spacesPx.space20},container:{width:"100%"},expandedShellContainer:{width:"100%",borderRadius:t.borderRadius,overflow:"hidden",paddingTop:t.shadowOffset/2,paddingHorizontal:t.shadowOffset/2,marginLeft:t.shadowOffset/2},footer:{borderBottomLeftRadius:t.borderRadius,borderBottomRightRadius:t.borderRadius,boxShadow:e.boxShadows.xSmall},footerContainer:{position:"absolute",bottom:0,left:t.shadowOffset/2,paddingHorizontal:t.shadowOffset/2,width:"100%"}}})),Fe={more:v.a.h63a5c3b,share:v.a.ifea3114,collapse:v.a.d227d19e,leave:v.a.bb1d57b6,host:v.a.cededf29,speaker:v.a.i48f4ed8,listener:v.a.a77c8e02,reportThisSpace:v.a.b3481ffd};var qe=n("zCf4");function Ue(e){const t=e.audioSpaceId,{space:n,utils:a}=Object(w.b)(t),i=a.title(),o=(null==n?void 0:n.participants.total)||0;return r.createElement(f.a,{activeSpeakers:r.createElement(p,{audioSpaceId:t}),isWide:e.isSideNavLayout,onDockPress:e.onToggleCollapsed,onRequestClose:e.onRequestClose,title:i,totalParticipants:o,wideDockMaxWidth:e.width})}function We(e){const{featureSwitches:t}=r.useContext(i.a),[n,o]=r.useState(!1);const s=t.isTrue("voice_rooms_expanded_dock")&&!n,c={...e,onToggleCollapsed:function(){n||a.e.reset(),o(Je)}};return r.createElement(r.Fragment,null,r.createElement(Ue,c),s?r.createElement(Ee,c):null,r.createElement($e,e))}function $e(e){return function(e){const{utils:t}=Object(w.b)(e),n=a.h();r.useEffect((()=>{t.is.Running||n("exit")}),[t.is.Running,n])}(e.audioSpaceId),function(e){const t=a.i(),n=a.h(),{pathname:i,key:o}=Object(qe.g)(),s=r.useRef({key:o,pathname:i});r.useEffect((()=>{if(!e){if(s.current.key!==o){Xe.spaceUrl.test(s.current.pathname)||"collapse"===t||n("collapse")}s.current.key=o,s.current.pathname=i}}),[o,i,e,n,t])}(e.isSideNavLayout),null}function Je(e){return!e}const Xe={spaceUrl:/i\/spaces\/.+/}},qrPT:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("KEM+"),r=n.n(a),i=n("CEs6");class o extends Error{constructor(e,t,n){super(`${o.displayName}: ${e} HTTP-${t} message: ${n}`),this.url=e,this.status=t}}r()(o,"displayName","ProxseeApiError");var s=n("epkG"),c=n("SrIh"),l=n("RqPI");let u,d=0;class p{constructor(e=g){r()(this,"reportSpaceFor",{SelfHarm:e=>this._reportSpace({abuse_type:y.SelfHarm,...e}),Violence:e=>this._reportSpace({abuse_type:y.Violence,...e}),SexualContent:e=>this._reportSpace({abuse_type:y.SexualContent,...e}),ChildSafety:e=>this._reportSpace({abuse_type:y.ChildSafety,...e}),PrivateInformation:e=>this._reportSpace({abuse_type:y.PrivateInformation,...e}),AbusiveBehavior:e=>this._reportSpace({abuse_type:y.AbusiveBehavior,...e})});const{httpConfig:t}=e;this.client=new s.a({...b,...t}),this._authToken=void 0,this._authPromise=null}init(e){u=e}initialized(){return!!u}isLoggedIn(){return!!this._authToken}isTwitterAuthenticated(){if(!this.initialized())return!1;const e=u.store.getState();return Object(l.l)(e)}authToken(){return this._authToken}dispatch(e){return this.initialized()?this.client.dispatch(e).then(i.a):Promise.reject(new Error("[ProxseeApi] config not initialized"))}post(e,t,n={}){const{params:a}=n,r=Object.assign(function(){const e=Date.now();return d=e<=d?d+1:e,Object.assign({},m,{[h]:d,"content-type":"application/json"})}(),n.headers),i=JSON.stringify({...t,cookie:this._authToken}),o="Twitter"===this._authUserType?`twitter/${e}`:e;return this.dispatch({method:"POST",path:`/api/v2/${o}`,headers:r,params:a,data:i})}login(){return this._authPromise?this._authPromise:this.initialized()?this.isTwitterAuthenticated()?this.isLoggedIn()?Promise.resolve():(this._authPromise=u.api.Auth.authenticatePeriscope().then((e=>this.loginTwitterToken(e.token))).then((e=>{if(!e)throw new Error("[ProxseeApi] invalid loginTwitterToken response");this._authToken=e.cookie,this._authUserType=e.type})).catch((e=>{const t={err:e};Object(c.a)("[ProxseeApi] failed to login",{extra:t})})).then((()=>{this._authPromise=null})),this._authPromise):Promise.resolve():Promise.reject(new Error("[ProxseeApi] config not initialized"))}loginTwitterToken(e){const t={jwt:e,vendor_id:f,create_user:!1,direct:!0};return this.post("loginTwitterToken",t)}accessChat(e){const t=this.isLoggedIn()?"accessChat":"accessChatPublic";return this.post(t,{chat_token:e})}_reportSpace(e){return this.post("markAbuse",e).catch((e=>{Object(c.a)("[ProxseeApi] failed to report space",{extra:{err:e}})}))}}const h="X-Idempotence",m={["X-Periscope-User-Agent"]:"Twitter/m5",["X-Attempt"]:1};const f="m5-proxsee-login-a2011357b73e",g={},b={host:"https://proxsee.pscp.tv",errorFilter:function(e,t){return t(e).then((t=>{return t.status&&((n=t.status)<200||n>399)?Promise.reject(function(e,t){const{uri:n}=e,{status:a}=t,r=Object(i.a)(t);return new o(n,a,r.msg)}(e,t)):t;var n}))}};const y=Object.freeze({SelfHarm:"SELF_HARM",Violence:"VIOLENCE",SexualContent:"SEXUAL_CONTENT",ChildSafety:"CSE",PrivateInformation:"PRIVATE_INFO",AbusiveBehavior:"HARASSMENT"})},qzrz:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var a=n("97Jx"),r=n.n(a),i=(n("kYxP"),n("ERkP")),o=n("t62R"),s=n("/yvb"),c=n("n4Eu"),l=n("3XMw"),u=n.n(l),d=n("cm6r"),p=n("/NU0"),h=n("wD1h"),m=n("Oe3h"),f=n("0FVZ"),g=n("pjBI"),b=n("FBXD"),y=n("9RkS"),S=n("rHpw"),v=n("MH+I"),w=n("oSwX"),k=n("jV+4"),x=n("MWbm"),E=n("kRXa"),C=n("5Ixf"),P=n("AtEG"),T=n("hOZg");function R(e){const t=D(e.onDockPress),n=D(e.onUserPress),a=D(e.onRequestClose),c=D(e.onTogglePlayback);return i.createElement(i.Fragment,null,i.createElement(x.a,{style:H.sliderContainer},i.createElement(L,e)),i.createElement(x.a,{style:H.dockContentRow},i.createElement(w.default,{accessibilityHidden:!0,focusable:!1,onClick:n,screenName:e.user.screen_name,size:"large",uri:e.user.profile_image_url_https,withLink:!0}),i.createElement(x.a,{style:H.dockContentTitle},i.createElement(g.a,{size:"subtext2"},i.createElement(k.a,{isVerified:e.user.verified,name:e.user.name,nameSize:"subtext2",onLinkClick:n,screenName:e.user.screen_name,screenNameSize:"subtext2",weight:"normal",withLink:!0}),i.createElement(v.a,{size:"subtext2",timeMs:e.durationMs})),i.createElement(o.c,{numberOfLines:1,onPress:t,size:"subtext2",weight:"bold"},e.title)),i.createElement(s.a,r()({accessibilityLabel:e.isPlaying?M.pause:M.play,icon:e.isPlaying?i.createElement(C.a,null):i.createElement(P.a,null),onPress:c,testID:"togglePlayback"},O)),i.createElement(x.a,{style:H.dockContentButtonSpacer}),i.createElement(s.a,r()({accessibilityLabel:M.close,icon:i.createElement(T.a,null),onPress:a,testID:"close"},O))))}function I(e){const t=D(e.onDockPress),n=D(e.onRequestClose),a=D(e.onTogglePlayback),l=D(e.onUserPress),u=i.useMemo((()=>{var t;const n=null==(t=e.user.profile_image_extensions_media_color)?void 0:t.palette;if(n){const e=c.a.get(n);if(e)return B(e.rgb)}return S.a.theme.colors.primary}),[e.user]),d=e.isMuted?M.unmute:M.mute;return i.createElement(x.a,{style:[z.wideContainer,z.wideContainerBorderRadius]},i.createElement(x.a,{style:z.mainContentContainer},i.createElement(x.a,{style:[z.wideAvatarContainer,{backgroundColor:u}]},i.createElement(w.default,{accessibilityHidden:!0,focusable:!1,onClick:l,screenName:e.user.screen_name,size:"xLarge",uri:e.user.profile_image_url_https,withLink:!0})),i.createElement(x.a,{style:z.mainContent},i.createElement(k.a,{isVerified:e.user.verified,name:e.user.name,nameSize:"subtext2",onLinkClick:l,screenName:e.user.screen_name,screenNameSize:"subtext2",weight:"normal",withLink:!0,withScreenName:!0}),i.createElement(o.c,{numberOfLines:2,onPress:t,size:"subtext2",weight:"bold"},e.title))),i.createElement(x.a,{style:z.belowMainContent},i.createElement(x.a,{style:z.slider},i.createElement(L,r()({},e,{withTimes:!0}))),i.createElement(x.a,{style:z.iconRow},i.createElement(E.a,r()({accessibilityLabelIcon:d,accessibilityLabelSlider:M.volumeSlider,isMuted:e.isMuted,onMuteToggle:e.onMuteToggle,onSliderChange:e.onVolumeChange,sliderColor:"purple500",type:void 0,volumePercent:e.volume,withGraySliderTrack:!0,withNavigationSliderBackground:!0},O)),i.createElement(s.a,r()({accessibilityLabel:e.isPlaying?M.pause:M.play,icon:e.isPlaying?i.createElement(C.a,null):i.createElement(P.a,null),onPress:a,testID:"togglePlayback"},O)))),i.createElement(s.a,r()({accessibilityLabel:M.close,icon:i.createElement(T.a,null),onPress:n,style:z.closeIcon,testID:"close"},O)))}function L(e){const t=i.useRef({}),[n,a]=i.useState(!1),[r,o]=i.useState(e.progressMs),s=n||e.isScrubbing?r:e.progressMs,c=i.createElement(y.a,{accessibilityLabel:M.seekSlider,color:"purple500",keepLTR:!0,keyboardStep:5e3,max:e.durationMs,min:0,onActive:n=>{e.onSliderActive(n),t.current.isSliderActive=n,!0===n?o(e.progressMs):e.onSeek(r),a(n)},onChange:n=>{t.current.isSliderActive?o(n):e.onSeek(n)},step:"any",value:s,withGrayBackground:!0,withHidingThumb:!0});if(!e.withTimes)return c;const l=e.durationMs-s;return i.createElement(x.a,null,i.createElement(x.a,{style:z.sliderRow},i.createElement(x.a,{style:z.slider},c)),i.createElement(x.a,{style:z.sliderTimes},i.createElement(v.a,{size:"subtext2",timeMs:Object(p.a)(s)?s:0}),i.createElement(v.a,{countdown:!0,size:"subtext2",timeMs:Object(p.a)(l)?l:0,withCountdownSymbol:!0})))}function _(e){const t=i.useRef({}),n=i.useRef(null),a=e.isWide&&z.wideContainerBorderRadius,r=D((()=>{t.current.isSliderActive||e.onDockPress()})),o=i.useMemo((()=>function(){n.current&&n.current.focus()}),[]);i.useEffect((()=>{const t=function(e){return function(t){switch(t.code){case"Space":return function(e){e.preventDefault(),e.stopPropagation()}(t),e.onTogglePlayback()}}}(e);return n.current&&n.current.addEventListener("keydown",t),function(){n.current&&n.current.removeEventListener("keydown",t)}}),[n.current,e.onTogglePlayback]),i.useEffect((()=>function(){clearTimeout(t.current.onSliderActiveTimeout)}),[]);const s=e.title||M.untitled,c={...e,title:s,onSliderActive:function(e){clearTimeout(t.current.onSliderActiveTimeout),e?t.current.isSliderActive=e:t.current.onSliderActiveTimeout=setTimeout((()=>{t.current.isSliderActive=e}),j)}};return i.createElement(h.a,{enabled:!0,handlers:{[h.a.shortcuts.audio.dock]:o,[h.a.shortcuts.audio.play]:e.onTogglePlayback}},i.createElement(d.a,{accessibilityLabel:M.voiceDock,onPress:r,ref:function(e){n.current=e},style:[H.container,a]},i.createElement(x.a,{style:[H.innerContainer,a]},e.isWide?i.createElement(I,c):i.createElement(R,c))))}function A(e){const t=e.isWide?f.a.DesktopVoiceTweetDock:f.a.MobileVoiceTweetDock,n=[e.isWide?[z.root,{maxWidth:e.width}]:H.root];return i.createElement(t,null,i.createElement(m.a,{id:"VoiceTweetDock"},((t,a)=>i.createElement(x.a,r()({ref:t()},a({style:n})),i.createElement(_,e)))))}const M={untitled:u.a.gfaaead7,close:u.a.af8fa2ad,pause:u.a.fb236727,play:u.a.f17dfdb5,voiceDock:u.a.cfd13f46,unmute:u.a.b8b6344a,mute:u.a.ec8ab8b4,volumeSlider:u.a.c9a642f9,seekSlider:u.a.hea01797},O={borderColor:"transparent",color:"text",size:"normal"},H=S.a.create((e=>({root:{},container:{backgroundColor:e.colors.navigationBackground,boxShadow:e.boxShadows.xSmall},innerContainer:{backgroundColor:e.colors.navigationBackground},sliderContainer:{position:"absolute",zIndex:1,top:0,left:0,right:0,marginTop:-1*e.spacesPx.space20,transform:[{translateY:e.spacesPx.space20/2}]},dockContentRow:{padding:e.spaces.space4,flexDirection:"row",justifyContent:"center",alignItems:"center"},dockContentTitle:{marginHorizontal:e.spaces.space12,marginVertical:e.spaces.space4,flexDirection:"column",flex:1},dockContentButtonSpacer:{width:e.spaces.space12}}))),z=S.a.create((e=>{const t=e.spaces.space16,n=e.borderRadii.xLarge,a=e.spaces.space4;return{root:{alignSelf:"flex-end",width:"100%",marginVertical:e.spaces.space20,marginRight:e.spaces.space20},wideContainerBorderRadius:{borderRadius:n},wideContainer:{padding:t,paddingRight:a},wideAvatarContainer:{borderRadius:e.borderRadii.medium,padding:e.spaces.space12},mainContentContainer:{flexDirection:"row"},mainContent:{marginLeft:e.spaces.space12,marginRight:e.spaces.space40,flex:1,flexDirection:"column"},username:{color:e.colors.gray700},closeIcon:{position:"absolute",top:a,right:a},belowMainContent:{marginTop:e.spaces.space12,flexDirection:"row"},sliderRow:{flexDirection:"row"},slider:{flex:1},sliderTimes:{flexDirection:"row",justifyContent:"space-between"},iconRow:{marginLeft:e.spaces.space12,flexDirection:"row",justifyContent:"center"}}}));function D(e){return Object(b.a)((t=>{"function"==typeof e&&e()}))}const B=(e,t=1)=>`rgba(${e.red}, ${e.green}, ${e.blue}, ${t})`,j=200},ssnq:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("kYxP");var a=n("ERkP"),r=n("JH+F"),i=n("fs1G"),o=n("oECP"),s=n("9EWH");function c(e){const t=e||{},n=Object(r.a)(t);let o=Object(r.a)(n);const c=new Set;function u(e){return c.add(e),function(){c.delete(e)}}function d(e){return function(t){const n=e.current.slice,a=e.current.state,r=e.current.selector(t);e.current.equality(r,n,t,a)||(e.current.slice=r,e.current.state=t,e.current.onUpdate(e.current.slice,n,e.current.state,a))}}function p(e){o=Object(s.a)(o,(t=>{const n=e(t);n&&"object"==typeof n&&function(e,t){const n={};Object.keys(t).forEach((a=>{n[a]=!0,e[a]=t[a]})),Object.keys(e).forEach((t=>{n[t]||delete e[t]}))}(t,n)})),c.forEach((e=>{e(o)}))}return{getState:function(){return o},setState:p,reset:function(){p((()=>Object(r.a)(n)))},useSlice:function(e=l.selector,t={equalityFn:l.equality}){const n=a.useRef({state:o,slice:e(o),selector:e,equality:t.equalityFn,onUpdate:i.a});n.current.selector=e,n.current.equality=t.equalityFn;const[r,s]=a.useState((()=>n.current.slice));return a.useEffect((()=>{let e=!0;n.current.onUpdate=e=>s((()=>e));const t=d(n);function a(n){e&&t(n)}a(o);const r=u(a);return function(){e=!1,r()}}),[]),r},subscribe:function(e=l.selector,t={equalityFn:l.equality}){const n={current:{state:o,slice:e(o),selector:e,equality:t.equalityFn,onUpdate:i.a}},a=d(n);return{onUpdate:e=>{n.current.onUpdate=e;const t=u(a);return n.current.onUpdate(n.current.slice,n.current.slice,n.current.state,n.current.state),t}}}}}Object(s.b)();const l={selector:o.a,equality:(e,t,n,a)=>e===t}},tno6:function(e,t,n){"use strict";var a=n("ERkP"),r=(n("kYxP"),n("rHpw"));function i(e){const{audioLevel:t}=e,n=a.useRef(),r=a.useRef({ctx:null,width:-1,height:-1,barWidth:-1,maxBarHeight:-1,xStart:-1,xMove:-1,bars:new Array(s).fill([0,0]),shouldAnimate:!0});a.useEffect((()=>{r.current.bars=r.current.bars.map(((e,n)=>{const[a]=e,r=o[n];return[a,Math.random()*r*t*.95]})),r.current.shouldAnimate=p(r)})),a.useEffect((()=>{const e=window.devicePixelRatio,t=n.current;if(t){const{offsetWidth:n,offsetHeight:a}=t;r.current.ctx=t.getContext("2d"),r.current.width=n*e,r.current.height=a*e,t.width=r.current.width,t.height=r.current.height;const i=r.current.width*l;r.current.barWidth=r.current.width*c,r.current.maxBarHeight=r.current.height,r.current.xStart=r.current.barWidth/2,r.current.xMove=r.current.barWidth+i}}),[]);const i=0!==t;return a.useEffect((()=>{const{ctx:t}=r.current;if(!t)return;let n=requestAnimationFrame((function a(){const{width:i,height:o,barWidth:c,maxBarHeight:l,xStart:f,xMove:g,bars:b}=r.current;t.clearRect(0,0,i,o);for(let e=0;e<s;e++){const[n,a]=b[e],r=h(n,a*l,u);b[e]=[r,a];const i=f+e*g,s=(o-r)/2;t.beginPath(),t.moveTo(i,s),t.strokeStyle=d,t.lineWidth=c,t.lineCap="round",t.lineTo(i,s+r),t.stroke()}r.current.shouldAnimate=p(r),r.current.shouldAnimate?n=requestAnimationFrame(a):!e.withPersistZeroLevel&&function(e){const{bars:t}=e.current;return t.every((e=>{const[t]=e;return 0===m(t,2)}))}(r)&&t.clearRect(0,0,i,o)}));return function(){cancelAnimationFrame(n)}}),[r.current.ctx,r.current.shouldAnimate,i,e.withPersistZeroLevel]),a.createElement("canvas",{ref:n,style:f})}const o=[.25,.5,1,.5,.25],s=o.length,c=25/170,l=11/170,u=.2,d=r.a.theme.colors.purple500;function p(e){const{bars:t,maxBarHeight:n}=e.current;return!t.every((e=>{const[t,a]=e;return 0===m(t-n*a,2)}))}function h(e,t,n){return(1-n)*e+n*t}function m(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const f={width:"100%",height:"100%"};const g=e=>({width:e,height:e});var b=n("MWbm");function y({audioLevel:e}){const t=a.useRef(null),n=a.useRef({size:void 0});function r({size:t}){const n=Math.ceil(t/(1.5*w));return a.createElement(a.Fragment,null,x(w).map(((r,i)=>a.createElement(S,{key:E(r,i),optimized:!0,scale:k(e,t,r),size:t,width:n}))))}return a.useEffect((()=>{var e;n.current.size=null==t||null==(e=t.current)?void 0:e.getBoundingClientRect().width}),[]),a.createElement(b.a,{ref:t,style:v.root},n.current.size?a.createElement(r,{size:n.current.size}):null)}function S({optimized:e,scale:t,size:n,width:r}){const i=a.useRef(null),o={borderRadius:`${Math.ceil(r/2)}px`,maxHeight:`${t}px`,minHeight:`${r}px`,width:`${r}px`,...C(e,t,n)};return a.useEffect((()=>{const e=requestAnimationFrame((function(){var e;const t=i.current,n=null==t||null==(e=t.style)?void 0:e.maxHeight;t&&n&&(t.style.height=n)}));return function(){cancelAnimationFrame(e)}}),[t]),a.createElement(b.a,{ref:i,style:[o,v.bar]})}const v=r.a.create((e=>({root:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",justifyContent:"center",width:"100%"},bar:{animationDuration:"600ms",animationKeyframes:[{"0%":{transform:[{scaleY:"0.8"}]},"50%":{transform:[{scaleY:"1"}]},"100%":{transform:[{scaleY:"0.8"}]}}],animationTimingFunction:"linear",animationIterationCount:"infinite",backgroundColor:"#794BC4",display:"inline-block",margin:"auto",pointerEvents:"none",position:"relative",transition:"height 200ms steps(6, jump-none)",willChange:"height, transform"}}))),w=5,k=(e,t,n)=>.95*t*Math.abs(e-function(e=1,t=0){return Math.random()*(e-t)+t}(.3))*n,x=e=>Array(e).fill(0).map(((t,n)=>Math.max(Math.sin(Math.PI*n/(e-1)),.35))),E=(e,t)=>`AudioBar-${e}-${t}-${Date.now()}`,C=function(e,t,n){let a={};return e&&(a={result:a,transition:"unset"}),t/(n+1)<.25&&(a={result:a,animationName:"none"}),a};function P(e){const{muted:t,useDOM:n=!1}=e,r=t?0:e.audioLevel;return n?a.createElement(y,{audioLevel:r}):a.createElement(i,{audioLevel:r,withPersistZeroLevel:e.withPersistZeroLevel})}const T=r.a.create((e=>({root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"}})));t.a=function({size:e,...t}){const n={...g(e)};return a.createElement(b.a,{style:[n,T.root]},a.createElement(P,t))}},vbJ7:function(e,t,n){"use strict";var a=n("8WKW");t.a={hexToCss:a.c,hexToRgba:a.d,rgbaToCss:a.g}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.AudioDock~bundle.AudioSpacePeek~bundle.AudioSpaceLoggedIn~loader.AudioContextSpaceMedia~loader..cfdc1c55.js.map