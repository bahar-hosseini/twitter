(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+/sI":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a("ERkP"),r=a("TGcR"),s=a("t62R"),i=a("a6qo"),o=a("rHpw");const c="animated_gif",l="video";class d extends n.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let a;if(t===c||"vine"===t)a=t===c?n.createElement(s.c,{weight:"bold"},"GIF"):n.createElement(r.a,{style:u.icon});else if(t===l&&e){const t=Math.trunc(e/6e4),r=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);a=n.createElement(s.c,{color:"white"},`${t}:${r}`)}return a?n.createElement(i.a,{align:"left"},a):null}}const u=o.a.create((e=>({icon:{color:e.colors.white}})));t.c=d},"/Imo":function(e,t,a){"use strict";var n=a("97Jx"),r=a.n(n),s=a("KEM+"),i=a.n(s),o=(a("kYxP"),a("ERkP")),c=a("/yvb"),l=a("k/Ka"),d=a("3XMw"),u=a.n(d),p=a("rHpw");const h=u.a.i5450beb,m=u.a.f7432494;class f extends o.Component{constructor(...e){super(...e),i()(this,"_handlePress",(e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()})),i()(this,"_handleChange",(e=>{const{onChange:t}=this.props,a=e.target,n=a.files;n.length&&t&&t(n),a.value=""})),i()(this,"_handleFileInputButtonRef",(e=>{this._fileInput=e}))}render(){const{accept:e,disabled:t,multiple:a,onChange:n,testID:s,...i}=this.props,d=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return o.createElement(o.Fragment,null,o.createElement(c.a,r()({},i,{disabled:t,hoverLabel:e?{label:d?m:h}:void 0,onPress:this._handlePress})),Object(l.a)("input",{accept:e,disabled:t,multiple:a,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:b.input,tabIndex:-1,testID:s,type:"file"}))}}i()(f,"defaultProps",{disabled:!1,multiple:!1});const b=p.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=f},"4bHO":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"7myi":function(e,t,a){"use strict";var n=a("KEM+"),r=a.n(n),s=(a("kYxP"),a("ERkP")),i=a("oEoC"),o=(a("SrCX"),a("2dXj")),c=a("4bHO"),l=a("GZwR");class d extends s.Component{constructor(...e){super(...e),r()(this,"_genericWrapperRef",s.createRef()),r()(this,"state",{queryContext:void 0,canShowTypeahead:!1}),r()(this,"render",(()=>{const{contextText:e,children:t,isInline:a,onTypeaheadStateChange:n,source:r}=this.props,{queryContext:i,canShowTypeahead:c}=this.state,d=c&&i?{word:i.word,resultType:i.resultType}:void 0;return s.createElement(o.a,{contextText:e,isInline:a,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:n,query:d,ref:this._genericWrapperRef,source:r||l.d.Compose},t(this._handleInputChange))})),r()(this,"_handleSelectItem",(e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(c.a)(e,a.resultType),{newCursor:r,newTweetText:s}=this._replaceToken(n,a);t({target:{value:s}}),this._updateDOMTextArea(r,s)}this._setQueryContext(void 0)})),r()(this,"_updateDOMTextArea",((e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())})),r()(this,"_handleInputChange",(e=>{const t=e&&(e.currentTarget||e.target),{queryContext:a}=this.state;this._textAreaRef=t;const n=a&&a.word,r=t.value,{word:s,start:o,end:c}=i.c(t.selectionStart,r),l=i.d(s||"","compose");if((null==l?void 0:l.q)!==n)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===o)this._setQueryContext(void 0);else if(l){const{q:e,result_type:a}=l;this._setQueryContext({word:e,resultType:a,fullText:t.value,startIndex:o,endIndex:c})}else this._setQueryContext(void 0)})),r()(this,"_setQueryContext",(e=>this.setState({queryContext:e,canShowTypeahead:!!e}))),r()(this,"_handleDismiss",(()=>this.setState({canShowTypeahead:!1})))}_replaceToken(e,t){const{fullText:a,startIndex:n,endIndex:r}=t,s=a.slice(0,n);return{newTweetText:s+e+a.slice(r),newCursor:s.length+e.length}}}t.a=d},KqB4:function(e,t,a){"use strict";var n=a("HJWM");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=[],n=(0,r.default)(e,t),s=0;s<n.length;s++)a.push(n[s].url);return a};var r=n(a("vwfs"));e.exports=t.default},LCtV:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a("KEM+"),r=a.n(n),s=(a("kYxP"),a("ERkP")),i=a("3XMw"),o=a.n(i),c=a("mN6z"),l=a("Qwev"),d=a("rHpw"),u=a("1auM"),p=a("ude7"),h=a("U+bB"),m=a("MWbm");const f=o.a.gff1f69e,b=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class y extends s.Component{constructor(...e){super(...e),r()(this,"state",{imagePreviewUrl:null}),r()(this,"_getImageSrc",(()=>{const{mediaItem:e,enableGif:t}=this.props,{imagePreviewUrl:a}=this.state;if(e&&e.mediaFile)return e.mediaFile.isGif&&!t?a:e.mediaFile.url}))}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:a}=this.state;e||a||t instanceof u.a&&t.isGif&&Object(p.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(c.a)(e,this.props)||!Object(c.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:n}=this.props,{imagePreviewUrl:r}=this.state||{},i=a.mediaFile&&a.mediaFile.isGif&&!t&&!r,o=a.needsProcessing||i,c=[_.root,g[e],o&&_.loadingBorder],d=this._getImageSrc();return s.createElement(m.a,{onClick:n,style:c},o||!d?s.createElement(l.a,{accessibilityLabel:f,style:_.activityIndicator}):s.createElement(h.a,{resizeMode:"cover",source:d,style:_.image}))}}r()(y,"defaultProps",{borderRadius:b.NONE,enableGif:!0});const g=d.a.create((e=>({[b.INFINITE]:{borderRadius:e.borderRadii.infinite},[b.MEDIUM]:{borderRadius:e.borderRadii.small},[b.NONE]:{borderRadius:e.borderRadii.none}}))),_=d.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=y},MLl7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s}));const n=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),r=e=>Object.values(n).indexOf(e)>=0,s=(e,t)=>"boolean"==typeof e?e:t},VPdC:function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));var n=a("97Jx"),r=a.n(n),s=a("KEM+"),i=a.n(s),o=a("ERkP"),c=a("3XMw"),l=a.n(c),d=a("cjZk"),u="fileInput",p=a("sjK1"),h=a("/Imo"),m=a("rHpw"),f=a("9HgX");const b=l.a.b9960f31,y={viewType:"media_picker"},g=o.createElement(d.a,null),_=({acceptGifs:e,acceptImages:t=!0,acceptVideo:a})=>(t?f.b:[]).concat(e?[f.a]:[]).concat(a?p.a:[]);class v extends o.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:a,customMimeTypes:n,icon:s,style:i,withIcon:c,...l}=this.props,d=_({acceptGifs:e,acceptImages:t,acceptVideo:a}).concat(n).join(",");return o.createElement(h.a,r()({},l,{accept:d,clientEventContext:y,icon:c?s:void 0,style:[w.root,i],testID:u}))}}i()(v,"defaultProps",{acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:b,icon:g,size:"normal",withIcon:!0});const w=m.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=v},cIoY:function(e,t,a){"use strict";var n=a("ERkP"),r=a("1YZw"),s=a("rxPX"),i=Object(s.a)().propsFromActions((()=>({addToast:r.b}))),o=a("KEM+"),c=a.n(o),l=(a("kYxP"),a("k/Ka")),d=a("3XMw"),u=a.n(d),p=a("sgih"),h=a("t62R"),m=a("/yvb"),f=a("rHpw");const b=u.a.cfd2f35d;class y extends n.Component{constructor(...e){super(...e),c()(this,"_handleOnFocus",(e=>{e.currentTarget.select()}))}render(){const{cancelButtonLabel:e,description:t,headerText:a,link:r,onCancel:s}=this.props,i=Object(l.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:g.linkInput,value:r});return n.createElement(p.a,{onMaskClick:s,style:g.container,type:"center",withMask:!0},a&&n.createElement(h.c,{align:"center",color:"normal",style:g.headerText,weight:"bold"},a),t&&n.createElement(h.c,{align:"center",color:"gray700",style:g.labelText},t),i,n.createElement(m.a,{onPress:s,size:"normalLarge",style:g.cancelButton,type:"text"},e))}}c()(y,"defaultProps",{cancelButtonLabel:b});const g=f.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var _=y,v=a("I/9y"),w=a("mjJ+"),E=a("cm6r"),C=a("CaKu"),x=a("U+bB");const P=u.a.e05c00b4,I=u.a.eabf2209,k=u.a.a613e72f,M=u.a.f88553c8,R={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class S extends n.PureComponent{constructor(e){super(e),c()(this,"_renderMenu",(e=>n.createElement(w.a,{items:[{text:k,Icon:v.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}))),c()(this,"_handleCopyGifLinkButtonClick",(e=>{const{addToast:t,gifUrl:a}=this.props;C.a.isAvailable()?(C.a.setString(a),t({text:M})):this.setState({showCopyLinkSheet:!0}),e&&e()})),c()(this,"_handleCopyLinkSheetCancel",(()=>{this.setState({showCopyLinkSheet:!1})})),this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{provider:t,gifUrl:a}=this.props,{display_name:r,name:s}=t,i=R[s];return i?n.createElement(n.Fragment,null,e?n.createElement(_,{description:I({providerName:r}),headerText:P,link:a,onCancel:this._handleCopyLinkSheetCancel}):null,n.createElement(h.c,{align:"center",color:"gray700",style:T.root},n.createElement(u.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(r,i)))):null}_renderAttribution(e,t){return n.createElement(E.a,{interactiveStyles:null,renderMenu:this._renderMenu},n.createElement(h.c,{weight:"bold",withInteractiveStyling:!0},n.createElement(x.a,{source:{uri:t},style:T.image}),n.createElement(h.c,{color:"normal"},e.toUpperCase())))}}const T=f.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var D=S;const O=i((({addToast:e,provider:t,gifUrl:a})=>n.createElement(D,{addToast:e,gifUrl:a,provider:t})));t.a=O},gpVt:function(e,t,a){"use strict";a.d(t,"b",(function(){return M}));var n=a("KEM+"),r=a.n(n),s=a("ERkP"),i=(a("kYxP"),a("VnFT")),o=a("xVN5"),c=a("vjRr"),l=a("rxPX"),d=a("0KEI");const u=(e,t)=>{const{urls:a}=t,n=[...a];let r;for(const t of n.reverse())if(r=c.a.select(e,t),r)break;return r};var p=Object(l.a)().propsFromState((()=>({card:u}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(d.d)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:c.a.fetchCardPreviewIfNeeded,updateDMComposer:i.e,updateTweetComposer:o.z}))),h=a("KqB4"),m=a.n(h),f=a("aX4+"),b=a("3XMw"),y=a.n(b),g=a("hOZg"),_=a("cnVF"),v=a("MWbm"),w=a("v6aA"),E=a("/yvb"),C=a("rHpw"),x=a("VY6S"),P=a("mN6z");const I=y.a.f6fec9f6,k=/^https?:\/\//i,M=e=>{const t=m()(e);if(t.length)return t.map((e=>!k.test(e)&&`http://${e}`||e))};class R extends s.Component{constructor(e,t){super(e,t),r()(this,"_fetchCardPreviewIfNeeded",(()=>{const{fetchCardPreviewIfNeeded:e,urls:t,createLocalApiErrorHandler:a}=this.props;t.forEach((t=>{e(t).catch(a())}))})),r()(this,"_handleCardPreviewDismissal",(e=>this._updateSingleComposer({cardUrl:_.A}))),r()(this,"_updateSingleComposer",(e=>{const{conversationId:t,index:a,updateDMComposer:n,updateTweetComposer:r}=this.props,{cardUrl:s}=e||{};this._isDMComposer?t&&n(t,s):r({updates:{cardUrl:s},index:a})})),this._debouncedFetchCardPreview=Object(x.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(P.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:a}=this.props,{loggedInUserId:n}=this.context;return e&&!t&&n?s.createElement(v.a,{style:a},s.createElement(f.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:n},isInteractive:!1,preventVideoPlayback:!0}),s.createElement(E.a,{accessibilityLabel:I,icon:s.createElement(g.a,null),onPress:this._handleCardPreviewDismissal,size:"small",style:S.closeButton,type:"onMedia"})):null}}r()(R,"contextType",w.a);const S=C.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),T=p(R);t.a=T},kIAd:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a("0vv5");const r=500,s={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.n(n).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},krmn:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),r=a("zb92"),s=a("RuTB"),i=a("3XMw"),o=a.n(i);var c=Object(r.a)({loader:()=>o.a.emoji.then((()=>Promise.all([a.e(0),a.e(21),a.e(184)]).then(a.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>n.createElement(s.a,{hasError:e,onRetry:t})}),l=a.p+"twemoji_sprite.9eb34115.png",d=a.p+"twemoji_sprite_high_res.efa6b9d5.png",u=a("rHpw"),p=a("U+bB"),h=a("kLqS"),m=a("MWbm");const f=u.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var b=e=>{const{partialRender:t,onSelect:a}=e,r=h.a.get()>1?d:l;return n.createElement(n.Fragment,null,n.createElement(m.a,{style:[f.content,f.dimensions]},n.createElement(c,{onSelect:a,partialRender:t,rowSize:9,spriteUrl:r})),n.createElement(p.a,{source:r,style:f.hidden}))},y=a("pNJr"),g=a("2ZFc"),_=a("OiMc"),v=a("/yvb");const w=o.a.d4a4842d,E=n.createElement(y.a,null),C=o.a.fec16c1c,x={viewType:"emoji_picker"},P=e=>{const{disabled:t,onEmojiSelect:a,onPress:r,size:s,style:i,textInputRef:o}=e,[l,d]=n.useState(!0);n.useEffect((()=>{setTimeout((()=>{c.preload(),g.a.get("emojiPicker2")}),5e3)}),[]);return n.createElement(_.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>d(!1),onDismiss:()=>d(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>o&&o.focus()))},renderContent:()=>n.createElement(b,{onSelect:a,partialRender:l}),withArrow:!0},n.createElement(v.a,{accessibilityHasPopup:"menu",accessibilityLabel:w,clientEventContext:x,disabled:t,hoverLabel:{label:C},icon:E,onPress:e=>r&&r(e),size:s,style:i,type:"text"}))};P.defaultProps={disabled:!1,size:"small"};t.a=P},oEoC:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return c}));a("kYxP");var n=a("kIAd");a("GZwR");function r(e,t){let a;const r=n.b.scoper.find((n=>{if(-1!==n.srcInputs.indexOf(t))return a=e.match(n.regexp),a}));let s="";return a&&(s=a&&(1===a.length?a[0]:a[1])),r?{...r.scope,src:t,q:s}:null}function s(e,t){const a=t.slice(0,e),r=t.slice(e,t.length),s=a.search(n.b.WordEnd),i=s>=0?a.slice(s):"",o=r.search(n.b.WordBoundary),c=i+r.slice(0,o);return c.trim()?{start:s,end:e+o,word:c}:{start:-1,end:-1,word:""}}function i(){return`typeaheadFocus-${Math.random()}`}function o(e){const{altKey:t,ctrlKey:a,metaKey:n}=e;return!(t||a||n)}function c(e,t){const a=[];e.forEach((e=>{const n=t.find((t=>t.id===e.id));n&&n.data&&n.data.result_context?a.push(n):a.push(e)}));const n=a.map((e=>e.id)),r=t.filter((e=>n.indexOf(e.id)<0));return[...a,...r]}},pKoL:function(e,t,a){"use strict";var n=a("KEM+"),r=a.n(n),s=(a("kYxP"),a("ERkP")),i=a("HPNB"),o=a("9HgX"),c=a("3XMw"),l=a.n(c),d=a("LCtV"),u=a("zb92"),p=a("RuTB"),h=Object(u.a)({loader:()=>Promise.all([a.e(0),a.e(4),a.e(14),a.e(158)]).then(a.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__}))),renderPlaceholder:(e,t)=>s.createElement(p.a,{hasError:e,onRetry:t})}),m=a("k/Ka"),f=a("eXeu"),b=a("iOGT");class y extends s.Component{constructor(...e){super(...e),r()(this,"_setVideoRef",(e=>{const{getVideoRef:t}=this.props;t&&t(e)}))}render(){const{children:e,dataSaverMode:t,getVideoRef:a,style:n,variants:r,...i}=this.props,o=Object(b.b)(r,t?b.a.MEDIUM:b.a.HIGH)||[],c=Object(f.e)(o.map((e=>({src:e.url,type:e.content_type}))));return Object(m.a)("video",{...i,children:[c.map((e=>s.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:n})}}r()(y,"defaultProps",{dataSaverMode:!1,variants:[]});var g=a("62wY"),_=a("sjK1"),v=a("v6aA"),w=a("cHvH"),E=a("mXq/"),C=a("/yvb"),x=a("a6qo"),P=a("rHpw"),I=a("hOZg"),k=a("tuke"),M=a("U+bB"),R=a("MWbm"),S=a("+/sI");const T=l.a.gd80afba,D=l.a.abd845fd,O=l.a.df1b0707,F=l.a.cd959e5b,L=l.a.e68b09b4,V=l.a.add55c97;class B extends s.Component{constructor(...e){super(...e),r()(this,"state",{isVideoPaused:!0,playGif:!1}),r()(this,"_handleGifClick",(()=>{this.setState({playGif:!this.state.playGif})})),r()(this,"_handleMediaPreviewLayout",(e=>{const{mediaItem:t,resizeIfNeeded:a}=this.props,n=t.mediaFile||t.externalMediaDetails;if(!n)return;const{nativeEvent:{layout:{height:r,width:s}}}=e,{height:i,width:o}=n,c=o/i;Math.abs(c-s/r)>.05&&this._mediaContainer&&("width"===a?this._mediaContainer.setNativeProps({style:{width:r*c}}):"height"===a&&this._mediaContainer.setNativeProps({style:{height:s/c}}))})),r()(this,"_handleVideoOnPlay",(e=>{this.setState({isVideoPaused:!1})})),r()(this,"_handleVideoOnPause",(e=>{this.setState({isVideoPaused:!0})})),r()(this,"_setMediaContainerRef",(e=>{this._mediaContainer=e})),r()(this,"_setVideoRef",(e=>{this._video=e})),r()(this,"playVideo",(()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}})),r()(this,"pauseVideo",(()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}))}render(){var e;const{accessibilityLabel:t,accessibilityRole:a,enableGif:n,mediaItem:r,onEdit:c,onRemove:l,style:d,withAltTextLabel:u,withCloseButton:p,withEditButton:h,withEditIcon:m}=this.props,{playGif:f}=this.state,b=r.externalMediaDetails&&r.externalMediaDetails.mediaType===o.a,y=b||n&&r.mediaFile&&r.mediaFile.isGif,g=!(null==(e=r.mediaFile)||!e.isVideo);return s.createElement(w.a,null,(({windowWidth:e})=>{const n=void 0!==m?m:!i.a.isTwoColumnLayout(e);return s.createElement(R.a,{accessibilityLabel:t||V,accessibilityRole:a,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[d,j.cursor,b&&j.gifPlayButton]},this._renderPreview(),b&&!f&&s.createElement(E.a,{accessibilityLabel:O,onPress:this._handleGifClick,size:"small"}),p?s.createElement(C.a,{accessibilityLabel:F,hoverLabel:{label:L},icon:s.createElement(I.a,null),onPress:l,size:"experimentalSmall",style:j.close,type:"onMedia"}):null,y?s.createElement(S.c,{type:S.a}):null,u&&!g?s.createElement(x.a,{align:"left",altLabel:t}):null,h?s.createElement(C.a,{accessibilityLabel:T,icon:n?s.createElement(k.a,null):void 0,onPress:c,size:n?"small":"normalCompact",style:g?j.editVideo:j.editImage,type:"onMedia"},n?void 0:D):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,a=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,a)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):s.createElement(R.a,{style:P.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:a}=this.state,n={uri:a?e:t};return s.createElement(R.a,{onClick:this._handleGifClick,style:P.a.absoluteFill},s.createElement(M.a,{resizeMode:"cover",source:n,style:j.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:n}=this.props;return s.createElement(d.b,{borderRadius:e,enableGif:t,mediaItem:a,onClick:n})}_renderVideoPreview(e,t,a,n){var r;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:i}=this.props,o=null==(r=i.mediaMetadata)?void 0:r.subtitles;if(this._configurableVideoPlayerEnabled&&n instanceof _.c){const r=[{src:t,type:e}],i=`${a}`;return s.createElement(h,{mediaFile:n,mediaId:i,subtitles:o,variants:r})}{var c;const a=[{content_type:e,url:t}],r=(null==o||null==(c=o.upload)?void 0:c.mediaFile)instanceof g.b?o.upload.mediaFile.vtt:void 0;return s.createElement(y,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:n instanceof _.c?n.thumbnail:"",style:j.video,variants:a},o&&r?s.createElement("track",{default:!0,kind:"subtitles",label:o.displayName,src:r,srcLang:o.lang}):null)}}}r()(B,"contextType",v.a),r()(B,"defaultProps",{enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1});const j=P.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editImage:{position:"absolute",right:e.spaces.space4,bottom:e.spaces.space4},editVideo:{position:"absolute",right:e.spaces.space4,top:e.spaces.space4},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=B},rFBM:function(e,t,a){"use strict";var n=a("KEM+"),r=a.n(n),s=(a("kYxP"),a("ERkP")),i=a("rHpw"),o=a("k/Ka"),c=a("MWbm");const l=e=>Object(o.a)("div",e);class d extends s.Component{constructor(...e){super(...e),r()(this,"_dragEnterCount",0),r()(this,"state",{active:!1}),r()(this,"_handleDragDrop",(e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)})),r()(this,"_handleDragEnter",(e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)})),r()(this,"_handleDragLeave",(e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)})),r()(this,"_handleDragOver",(e=>{e.preventDefault()}))}render(){const{allowDragDrop:e,children:t,style:a}=this.props,{active:n}=this.state,r=e?u.dragBorderValid:u.dragBorderInvalid;return s.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[u.root,a,n&&r]},s.createElement(c.a,{style:u.inner},"function"==typeof t?t(n):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}r()(d,"defaultProps",{allowDragDrop:!0});const u=i.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.magenta500},inner:{flexGrow:1}})));t.a=d},tuke:function(e,t,a){"use strict";var n=a("ERkP"),r=a("Lsrn"),s=a("k/Ka");const i=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style],viewBox:"0 0 24 24"},n.createElement("g",null,n.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));i.metadata={width:24,height:24},t.a=i},w3n3:function(e,t,a){"use strict";var n=a("ERkP"),r=a("/yvb"),s=(a("MLl7"),a("3XMw")),i=a.n(s),o=a("3rWK"),c=a("Irs7");const l=i.a.a4993fa1,d=n.createElement(o.a,null),u=i.a.i0db46e6,p={viewType:"gif_search"};t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:a,history:s,style:i,onPress:o})=>{const h=Object(c.b)(),m=n.useCallback((()=>{o&&o(),h.scribe({element:"found_media_button",action:"click"}),s.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:a,dmConversationId:e}})}),[e,h,a,s,o]);return n.createElement(r.a,{accessibilityLabel:l,clientEventContext:p,disabled:!t,hoverLabel:{label:u},icon:d,onPress:m,size:"normal",style:[i],type:"text"})}},wpu3:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return m}));a("kYxP");var n=a("oEoC"),r=a("1auM"),s=(a("S1qy"),a("kIAd")),i=a("VAyw"),o=a("/Ikv"),c=a("s1N3"),l=a("lnti");const d=({inReplyToStatus:e,loggedInUserId:t,excludeReplyUser:a})=>{const{retweeted_status:n}=e,{entities:r}=n||e,{user:s}=e.retweeted_status||e,o=n?n.user:{},d=n?e.user:{},p=(null==r?void 0:r.user_mentions)||[],h=i.a.mergeTaggedUsers((null==r?void 0:r.media)||[]),m=u(n||e)||{},f={[o.id_str]:o,[d.id_str]:d,[s.id_str]:s,[m.id_str]:m};p.forEach((e=>{f[e.id_str]=e})),h.forEach((({user_id:e,name:t,screen_name:a})=>{f[e]={id_str:e,name:t,screen_name:a}}));const b=Object(c.a)(Object(l.a)([o.id_str,d.id_str,s.id_str,...p.map((e=>e.id_str)),...h.map((e=>e.user_id))])).filter((e=>e!==t));let y=t&&s.id_str===t?[t,...b]:b;return a&&(y=y.filter((e=>e!==s.id_str))),y.map((e=>f[e]))},u=({card:e})=>{let t=null;if(e){const a=o.a.getBindingValue(e.binding_values,"site");a&&e.users&&(t=e.users[a.id_str])}return t},p=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const a=t.some((e=>!!e.externalMediaDetails)),n=!a&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),s=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof r.a)&&e.mediaFile.isVideo));if(n||a||s)return 1===t.length;{const a=t.length<=e,n=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return a&&n}},h=p({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const a=e.split(s.b.WordBoundary);return t&&a.pop(),!!a.find((e=>{const t=Object(n.d)(e,"compose");return t&&"users"===t.result_type}))}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.DMDrawer~bundle.Compose~bundle.RichTextCompose~bundle.DirectMessages~bundle.DMRichTextCompose~b.0bdd9045.js.map