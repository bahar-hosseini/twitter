(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{cOLG:function(e,t,n){"use strict";n.r(t),n.d(t,"HomeTimeline",(function(){return et}));var s=n("KEM+"),a=n.n(s),i=n("ERkP"),r=n("es0u"),o=n("wM4e"),c=n("QK5w"),l=n("G6rE"),h=n("rxPX"),d=Object(h.a)().propsFromState((()=>({canGoBack:c.a,configurationFetchStatus:o.a,loggedInUser:l.e.selectLoggedInUser,useLatest:o.c}))).adjustStateProps((({canGoBack:e,configurationFetchStatus:t,loggedInUser:n,useLatest:s})=>({configurationFetchStatus:t,isInitialScreen:!e,loggedInUserAvatarURI:n&&n.profile_image_url_https,loggedInUserName:n&&n.name,useLatest:s}))),m=n("s14A"),p=n("dwig"),u=n("v//M"),_=n("0+qk"),f=(n("kYxP"),n("1YZw")),b=Object(h.a)().propsFromActions((()=>({addToast:f.b,updateBehavior:o.d}))).withAnalytics(),g=n("3XMw"),E=n.n(g),w=n("/yvb"),T=n("yZDr");var v=({accessibilityLabel:e,hoverLabel:t,renderMenu:n,onPress:s})=>{const a=i.createElement(T.a,null);return i.createElement(w.a,{accessibilityLabel:e,hoverLabel:{label:t},icon:a,onPress:s,pullRight:!0,renderMenu:n,type:"experimentalText"})},y=n("mjJ+"),S=n("rHpw"),L=n("Lsrn"),I=n("k/Ka");const x=(e={})=>Object(I.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[L.a.root,e.style],viewBox:"0 0 36 36"},i.createElement("g",null,i.createElement("path",{d:"M27.325 20.595c0 7.333-5.913 13.278-13.206 13.278S.912 27.928.912 20.595 6.825 7.317 14.12 7.317s13.205 5.944 13.205 13.278",fill:"#71C9F8"}),i.createElement("path",{d:"M24.576 20.682c0 5.802-4.678 10.506-10.45 10.506-5.77 0-10.448-4.704-10.448-10.506s4.678-10.506 10.45-10.506c5.77 0 10.448 4.704 10.448 10.506",fill:"#97E3FF"}),i.createElement("path",{d:"M18.98 20.94l-3.86-.583v-6.215c0-.552-.45-1-1-1s-1 .448-1 1v7.076c0 .06.023.112.033.17.007.042.012.082.025.123.026.084.063.158.11.23.022.038.044.075.072.11.05.06.11.11.173.158.042.03.08.06.128.086.065.034.133.055.204.074.04.01.072.035.114.04l4.704.71c.05.01.1.012.15.012.487 0 .914-.355.988-.85.08-.548-.295-1.058-.84-1.14z",fill:"#005FD1"}),i.createElement("path",{d:"M24.553 20.682c0 5.79-4.68 10.5-10.434 10.5S3.683 26.47 3.683 20.68c0-2.953 1.227-5.707 3.31-7.665l.674 1.127c.38.635 1.227.668 1.524.06l1.153-2.36 1.312-2.687c.24-.49-.104-1.067-.65-1.088l-2.988-.116-2.625-.1c-.678-.027-1.05.735-.67 1.37l.804 1.344C2.613 13.065.883 16.736.883 20.683c0 7.333 5.937 13.298 13.234 13.298s13.234-5.964 13.234-13.297h-2.8z",fill:"#1DA1F2"}),i.createElement("path",{d:"M35 13.36h-1.467v-1.34c0-.552-.448-1-1-1s-1 .448-1 1v1.34h-1.467c-.552 0-1 .45-1 1s.448 1 1 1h1.467v1.342c0 .552.448 1 1 1s1-.448 1-1v-1.34H35c.552 0 1-.45 1-1s-.448-1-1-1z",fill:"#FFAD1F"}),i.createElement("path",{d:"M28.646 4.138h-2.01v-2.01c0-.552-.448-1-1-1s-1 .448-1 1v2.01h-2.01c-.552 0-1 .448-1 1s.448 1 1 1h2.01v2.01c0 .552.448 1 1 1s1-.448 1-1v-2.01h2.01c.552 0 1-.448 1-1s-.447-1-1-1z",fill:"#F6809A"})));x.metadata={width:36,height:36};var C=x;const F=(e={})=>Object(I.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[L.a.root,e.style],viewBox:"0 0 36 36"},i.createElement("g",null,i.createElement("path",{d:"M35.508 15.41l-9.295-3.387L22.438 1.47c-.108-.302-.357-.48-.722-.495-.322.007-.604.22-.698.53l-3.293 10.71-9.132 3.805c-.285.118-.467.4-.46.708.007.308.203.58.492.686L17.92 20.8l3.775 10.552c.107.298.39.496.704.496h.016c.322-.007.604-.22.698-.53l3.293-10.712 9.132-3.803c.284-.118.466-.4.46-.708-.007-.308-.203-.58-.492-.686z",fill:"#61BCF6"}),i.createElement("path",{d:"M9.57 4.715l-2.906.065-.06-2.715C6.585 1.34 5.983.763 5.256.78 4.53.796 3.955 1.4 3.97 2.125l.063 2.715-2.747.062C.56 4.92-.016 5.522 0 6.248c.017.726.62 1.302 1.346 1.285l2.747-.062.062 2.716c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.062-2.715 2.905-.066c.725-.017 1.3-.62 1.285-1.346-.017-.726-.62-1.302-1.346-1.285z",fill:"#F16888"}),i.createElement("path",{d:"M14.205 29.69l-1.65.036-.034-1.518c-.016-.726-.618-1.302-1.344-1.286s-1.302.62-1.286 1.345l.034 1.518-1.54.035c-.726.016-1.302.62-1.286 1.345.017.726.62 1.302 1.345 1.286l1.54-.034.034 1.518c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.034-1.518 1.65-.037c.726-.016 1.302-.62 1.286-1.345-.016-.727-.62-1.303-1.345-1.286z",fill:"#FD9E1A"})));F.metadata={width:36,height:36};var M=F,P=n("3JQt"),R=n("M2x3");const k=E.a.j681ac0d,O=E.a.g8220472,z=E.a.ccdd3766,A=E.a.g2657de3,j=E.a.d126cb7c,B=E.a.c41ecf3c,D=E.a.d18aa6d4,W=E.a.bc52b0cd,U=E.a.j6382fe9,H=E.a.f89f6785,N=E.a.e4acfd11;class J extends i.PureComponent{constructor(...e){super(...e),a()(this,"_renderActionMenu",(e=>{const{useLatest:t}=this.props,n=t?D:B,s=t?C:M;return i.createElement(y.a,{DescriptionIcon:s,description:n,descriptionStyle:G.description,isFixed:!0,items:this._getActionMenuItems(),onCloseRequested:e})})),a()(this,"_getActionMenuItems",(()=>{const{useLatest:e}=this.props,t=e?N:H;return[{text:e?W:U,onClick:this._handleTimelineSwitch,Icon:P.a,subText:t},{link:"/settings/content_preferences",text:k,onClick:this._handleContentPreferences,Icon:R.a}]})),a()(this,"_handleTimelineSwitch",(e=>{const{onToggle:t}=this.props;e(),t()})),a()(this,"_handleContentPreferences",(e=>{const{onContentPreferencesSelect:t}=this.props;e(),t()}))}render(){const{useLatest:e,onPress:t}=this.props,n=e?O:z,s=e?j:A;return i.createElement(v,{accessibilityLabel:n,hoverLabel:s,onPress:t,renderMenu:this._renderActionMenu})}}const G=S.a.create((e=>({description:{fontSize:e.fontSizes.headline1,color:e.colors.text,textAlign:"center",fontWeight:e.fontWeights.bold}})));var $=J,K=n("aWzz");const Q=E.a.e4c6d14c,X=E.a.bffa2da7;class q extends i.Component{constructor(...e){super(...e),a()(this,"_handleToggle",(()=>{const{updateBehavior:e,useLatest:t,addToast:n,analytics:s}=this.props;this.context.viewport.scrollToTop(),s.scribe({component:"customize",element:t?"see_top":"see_latest",action:"click"});const a=t?Q:X;e({useLatest:!t}).then((()=>{n({text:a})}))})),a()(this,"_handleSwitchPress",(()=>{const{analytics:e}=this.props;e.scribe({section:"navigation_bar",element:"customize_button",action:"click"})})),a()(this,"_handleContentPreferencesSelect",(()=>{const{analytics:e}=this.props;e.scribe({component:"customize",element:"see_preferences",action:"click"})}))}render(){const{useLatest:e}=this.props;return i.createElement($,{onContentPreferencesSelect:this._handleContentPreferencesSelect,onPress:this._handleSwitchPress,onToggle:this._handleToggle,useLatest:e})}}a()(q,"contextTypes",{viewport:K.object,featureSwitches:K.any});var V=b(q),Y=n("2dXj"),Z=Object(h.a)().propsFromState((()=>({loggedInUser:l.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userAvatarURI:e&&e.profile_image_url_https,userName:e&&e.name}))),ee=n("N5qz"),te=n("MWbm"),ne=n("cHvH"),se=n("5mJL"),ae=n("DNho"),ie=n("XP29"),re=n("t62R"),oe=n("cjZk"),ce=n("3rWK"),le=n("ll3R"),he=n("pNJr"),de=n("J0mu");const me=E.a.g34f2c63({verb:""}),pe=E.a.e349147b,ue=S.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space8},avatarColumn:{flexGrow:1,minWidth:e.spaces.space32,maxWidth:e.spaces.space48},avatar:{width:"100%"},body:{flexDirection:"column",flexGrow:1},fakeInput:{paddingTop:`calc(${e.spaces.space12} + ${e.spaces.space2})`,paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space2},toolbar:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",marginRight:e.spaces.space2,marginTop:`calc(${e.spaces.space16} + ${e.spaces.space2})`},toolbarSection:{alignItems:"center",flexDirection:"row"},iconContainer:{marginLeft:-e.spacesPx.space2},icon:{color:e.colors.primary,height:"1.5em",marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space4} + ${e.spaces.space1})`,width:"1.5em"},firstIcon:{marginLeft:0},lastIcon:{marginRight:0},tweetButton:{marginLeft:e.spaces.space12}})));var _e=Z((({userAvatarURI:e})=>i.createElement(ne.a,null,(({windowWidth:t})=>{const n=!ee.a.isOneColumnSquishedLayout(t);return i.createElement(se.a,{avatarCell:i.createElement(ae.a.Consumer,null,(({avatarSize:t})=>i.createElement(ie.a,{size:t,style:ue.avatar,uri:e}))),avatarCellStyle:ue.avatarColumn,cellStyle:ue.body,style:ue.root},i.createElement(re.c,{color:"gray700",numberOfLines:1,size:"headline1",style:ue.fakeInput},pe),i.createElement(te.a,{style:ue.toolbar},i.createElement(te.a,{style:[ue.toolbarSection,ue.iconContainer]},i.createElement(oe.a,{style:[ue.icon,ue.firstIcon]}),i.createElement(ce.a,{style:ue.icon}),n?i.createElement(le.a,{style:ue.icon}):null,i.createElement(he.a,{style:ue.icon}),n?i.createElement(de.a,{style:[ue.icon,ue.lastIcon]}):null),i.createElement(te.a,{style:ue.toolbarSection},i.createElement(w.a,{disabled:!0,style:ue.tweetButton,type:"primary"},me))))})))),fe=n("zb92"),be=Object(fe.a)({loader:()=>(Y.a.preload()||Promise.resolve()).then((()=>Promise.all([n.e(0),n.e(3),n.e(11),n.e(9),n.e(74)]).then(n.bind(null,"M5JI")))),renderPlaceholder:()=>i.createElement(_e,null)});const ge=()=>window.performance&&"function"==typeof window.performance.now;var Ee=n("yoO3"),we=n("aeN7"),Te=Object(h.a)().propsFromActions((()=>({addToast:f.b,updateBehavior:o.d}))).withAnalytics(),ve=n("QIgh"),ye=n("8UdT"),Se=n("iu0J"),Le=n("AP4B");var Ie={...Object(ve.a)({tweetDismissable:!0,shouldSelfThreadIncludeAvatar:!0}),...Le.a,[ye.b.EventSummary]:Object(Se.a)({errorContext:"HOME_TIMELINE_SCREEN"})},xe=n("MDbM"),Ce=n("FIs5");const Fe=E.a.d2c66f1f,Me=E.a.c3fbf1da,Pe=E.a.bf17ded9;var Re=({onImpression:e})=>i.createElement(Ce.a,{buttonLink:"/i/connect_people",buttonText:Pe,header:Fe,message:Me,onImpression:e}),ke=n("EUHl"),Oe=n("7BdX"),ze=n("fTQJ"),Ae=n("v6aA"),je=n("WA1W");const Be=E.a.f089620b,De={count:void 0};class We extends i.Component{constructor(e,t){super(e,t),a()(this,"_handleEntriesRendered",(({entries:e,fetchStatus:t})=>{const{isInitialScreen:n,recordTTFT:s}=this.props;if(t===xe.a.FAILED&&(this._shouldRecordTTFT=!1),this._shouldRecordTTFT&&n&&e.length){const t=e.some((({type:e})=>e===ye.b.Tweet));this._shouldRecordTTFT=!1,t&&s()}})),a()(this,"_renderEmptyTimeline",(()=>i.createElement(Re,{onImpression:this._handleEmptyHtlImpression}))),a()(this,"_handleEmptyHtlImpression",(()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})})),this._shouldRecordTTFT=!0,this._latestTimelineSwitchEnabled=this.context.featureSwitches.isTrue("home_timeline_latest_timeline_switch_enabled")}render(){const{featureSwitches:e}=this.context,{useLatest:t,timelineRef:n}=this.props,s=((e,t,n)=>e&&t?Object(je.a)(n):Object(je.b)(n))(this._latestTimelineSwitchEnabled,t,this.context.featureSwitches),a=e.isTrue("responsive_web_home_revisit_fetch_disabled");return i.createElement(ze.a,{disableFetchOnLoadedMount:!t&&a,entryConfiguration:Ie,fetchTopOptions:De,module:s,newTweetsPillMode:ke.a.URT,onEntriesRendered:this._handleEntriesRendered,prerollDisplayLocation:Oe.c.TIMELINE_HOME,renderEmptyState:this._renderEmptyTimeline,timelineRef:n,title:Be})}}a()(We,"defaultProps",{recordTTFT:we.e}),a()(We,"contextType",Ae.a);var Ue=Te(We),He=n("7JQg"),Ne=n("VS6U"),Je=n("Es6L"),Ge=n("LsPn"),$e=n("aITJ"),Ke=n("0yYu"),Qe=n("mw9i");const Xe=E.a.i5f7b6b8,qe=E.a.d126cb7c,Ve=E.a.ha8209bb,Ye={page:"home"},Ze={page:"home_latest"};class et extends i.Component{constructor(e,t){super(e,t),a()(this,"_unmounted",!1),a()(this,"_latestBlurTimestamp",0),a()(this,"_renderTimeline",(()=>{const{useLatest:e,isInitialScreen:t}=this.props;return i.createElement(m.a,null,i.createElement(Ue,{isInitialScreen:t,timelineRef:this._setTimelineRef,useLatest:e}))})),a()(this,"_renderPrimaryContent",(()=>{const{history:e,location:t,configurationFetchStatus:n}=this.props,{isRestrictedSession:s}=this.context,a=i.createElement(_.a,{history:e});return i.createElement(i.Fragment,null,Object(Je.a)()&&!s?i.createElement(i.Fragment,null,i.createElement(be,{history:e,location:t}),i.createElement(Ke.a,null)):null,i.createElement(p.a,{component:Qe.a,fab:a},$e.b.isKaiOS()?i.createElement(Ge.a,{leftText:Xe,onLeftClick:this._handleSoftLeftClick}):null,i.createElement(u.a,{fetchStatus:n,render:this._renderTimeline})))})),a()(this,"_handleSoftLeftClick",(()=>{const{history:e}=this.props;e.push("/account")})),a()(this,"_handleTabRefresh",(()=>{this._timeline&&this._timeline.refreshOrGoTop()})),a()(this,"_handleWindowFocus",(()=>{if(this._timeline){const e=this._timeline,{featureSwitches:t}=this.context,n=Date.now();(!this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_home_refocus_fetch_interval_change_enabled")||this._latestBlurTimestamp>0&&(n-this._latestBlurTimestamp)/1e3>=t.getNumberValue("responsive_web_home_refocus_fetch_interval_seconds",30))&&e.fetchTop({onlyIfStale:!0})}})),a()(this,"_handleWindowBlur",(()=>{this._latestBlurTimestamp=Date.now()})),a()(this,"_setTimelineRef",(e=>{this._timeline=e})),this._latestTimelineSwitchEnabled=this.context.featureSwitches.isTrue("home_timeline_latest_timeline_switch_enabled")}componentDidMount(){if(window.addEventListener("focus",this._handleWindowFocus),window.addEventListener("blur",this._handleWindowBlur),this.context.featureSwitches.isTrue("responsive_web_framerate_tracking_home_enabled")){const e=`home${$e.b.isDesktopOS()?"":"_mobile"}`;(ge()?n.e(294).then(n.bind(null,"Iid0")).then((({default:e})=>e)):Promise.resolve(void 0)).then((t=>{!this._unmounted&&t&&(this._fpsTracking=t({reportNamespace:e}))}))}}componentWillUnmount(){this._unmounted=!0,window.removeEventListener("focus",this._handleWindowFocus),window.removeEventListener("blur",this._handleWindowBlur),this._fpsTracking&&this._fpsTracking.stop()}render(){const{useLatest:e,history:t}=this.props,n=this._latestTimelineSwitchEnabled?i.createElement(V,{useLatest:e}):void 0,s=this._latestTimelineSwitchEnabled&&e?qe:Ve;return i.createElement(He.b,{namespace:this._getScribeNamespace()},i.createElement(Ee.a,null,i.createElement(Ne.a,{history:t,onTabRefresh:this._handleTabRefresh,primaryContent:this._renderPrimaryContent,rightControl:n,sidebarContent:i.createElement(r.a,null),title:s})))}_getScribeNamespace(){const{useLatest:e}=this.props;return e?Ze:Ye}}a()(et,"contextType",Ae.a);t.default=d(et)}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.HomeTimeline.9b252075.js.map