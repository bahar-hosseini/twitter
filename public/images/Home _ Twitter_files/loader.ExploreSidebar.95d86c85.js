(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{"+Bsv":function(e,t,n){"use strict";var r=n("ERkP"),a=n("3XMw"),o=n.n(a),i=n("M2x3"),s=n("xIW0"),c=n("/yvb"),l=n("rHpw");const d=o.a.bb081ea1,m={viewType:"settings_button"},p=r.memo((({onPress:e,pullRight:t,to:n})=>r.createElement(c.a,{accessibilityLabel:d,clientEventContext:m,hoverLabel:{label:d},icon:r.createElement(i.a,null),link:n,onPress:e,pullRight:t,style:u.button,testID:s.a.settingsAppBar,type:"experimentalText"}))),u=l.a.create((e=>({button:{marginVertical:`calc(-${e.spaces.space12})`}})));t.a=p},"+o05":function(e,t,n){"use strict";var r=n("ezF+"),a=n("VPAj"),o=n("KEM+"),i=n.n(o),s=(n("kYxP"),n("ERkP")),c=n("ajvb"),l=n("3XMw"),d=n.n(l),m=n("qB1G"),p=n("pjBI"),u=n("t62R");const h=d.a.ccc45ee6;var b=function({eventState:e,gameClockPeriod:t,participants:n,winnerId:r}){const a=e===m.a.Completed,o=e===m.a.InProgress,i=(()=>{const e=n&&n.find((e=>e.id===r)),i=null==e?void 0:e.shortName;return a&&i?h({team:i}):o&&t?t:null})();return s.createElement(p.a,null,s.createElement(u.c,{color:o?"magenta500":"gray700",size:"subtext2",weight:"bold"},Object(c.a)(e)),i?s.createElement(u.c,{color:"gray700",size:"subtext2",weight:"normal"},i):null)};const g=864e5,E=d.a.f81a95d7,f=d.a.ccaa970e;var y=function({date:e}){const t=(e=>{const t=(new Date).setHours(0,0,0,0),n=t+g;return e>=t&&e<n?0:e>=n&&e<t+1728e5?1:-1})(e),n=(0,d.a.d725a288)(e);return-1===t?function(){const t=f(e);return s.createElement(p.a,null,s.createElement(u.c,{color:"gray700",size:"subtext2",weight:"bold"},E({date:t})),s.createElement(u.c,{color:"gray700",size:"subtext2",weight:"normal"},n))}():function(){const e=s.createElement(u.c,{color:"gray700",size:"subtext2",weight:"bold"}),r=s.createElement(u.c,{color:"gray700",size:"subtext2"});return 0===t?s.createElement(d.a.I18NFormatMessage,{$i18n:"h0d6f2c5"},s.cloneElement(e,null,d.a.ed4bea2e),s.cloneElement(r,null,d.a.j3e0ae78({formattedTime:n}))):s.createElement(d.a.I18NFormatMessage,{$i18n:"a492659f"},s.cloneElement(e,null,d.a.cabfdd05),s.cloneElement(r,null,d.a.abd0f804({formattedTime:n})))}()},w=n("MWbm"),T=n("rHpw");const S=T.a.create((e=>({eventStateContainer:{alignSelf:"flex-end",flexDirection:"row"},row:{flexDirection:"row",marginVertical:e.spaces.space4},rowElem:{flexGrow:1,alignSelf:"center"}})));var I=function({category:e,eventState:t,gameClockPeriod:n,participants:r,startTimeMillis:a,winnerId:o}){const i=t===m.a.Scheduled,c=a&&new Date(a);return s.createElement(w.a,{style:S.row},s.createElement(u.c,{align:"left",size:"subtext2",style:S.rowElem,weight:"bold"},e),s.createElement(w.a,{style:S.eventStateContainer},i&&c?s.createElement(y,{date:c}):s.createElement(b,{eventState:t,gameClockPeriod:n,participants:r,winnerId:o})))},_=n("A91F"),v=n("TIdA");class C extends s.Component{constructor(...e){super(...e),i()(this,"state",{imageError:!1}),i()(this,"_renderImage",(()=>{const{team:{imageUrl:e,logo:t}}=this.props,{imageError:n}=this.state,r=!t&&!e||n?k.translucent:{},a=t?_.a.exact(t.width/t.height):_.a.SQUARE;return s.createElement(w.a,{style:k.teamLogoContainer},s.createElement(w.a,{style:[t?k.logoContainer:k.imageContainer,r]},s.createElement(v.a,{accessibilityLabel:"",aspectMode:a,image:t||e||"",onError:this._handleImageError,rounded:!t})))})),i()(this,"_handleImageError",(()=>{this.setState({imageError:!0})}))}render(){const{team:{fullName:e,color:t},fallbackColor:n}=this.props,r={backgroundColor:t&&`rgb(${t.red}, ${t.green}, ${t.blue})`||T.a.theme.colors[n]};return s.createElement(w.a,{style:[k.root,r]},this._renderImage(),s.createElement(u.c,{align:"left",color:"white",numberOfLines:1,style:k.rowElem,weight:"heavy"},e),this._renderScore())}_renderScore(){const{winnerId:e,eventState:t,team:n}=this.props,{id:r,score:a,secondaryScore:o}=n,i=r===e,c=!e,l=t===m.a.Completed&&!i&&!c;return t===m.a.Completed||t===m.a.InProgress?s.createElement(w.a,{style:[k.teamScore,l&&k.losingTeam]},s.createElement(u.c,{color:"white",numberOfLines:1,size:o?"headline1":"title4",weight:"heavy"},a),o?s.createElement(u.c,{color:"white",numberOfLines:1,style:k.specialTeamScoreSecondary,weight:"bold"},o):null):null}}const k=T.a.create((e=>({root:{flexDirection:"row",height:e.spaces.space48,paddingHorizontal:e.spaces.space12},imageContainer:{width:e.spaces.space32},logoContainer:{width:e.spaces.space40},translucent:{borderRadius:e.borderRadii.infinite,backgroundColor:e.colors.white,opacity:.4},teamLogoContainer:{alignSelf:"center",alignItems:"center",height:e.spaces.space32,width:e.spaces.space40},teamScore:{alignSelf:"center",marginHorizontal:e.spaces.space12},specialTeamScoreMain:{alignSelf:"center",flexDirection:"column",display:"flex"},specialTeamScoreSecondary:{alignSelf:"flex-end"},rowElem:{flexGrow:1,alignSelf:"center",marginHorizontal:e.spaces.space12},losingTeam:{opacity:.5}})));var M=C,x=n("htQn");class O extends s.Component{constructor(...e){super(...e),i()(this,"_renderTeamRow",((e,t)=>{const{winnerId:n,eventState:r}=this.props,{id:a}=e;return s.createElement(M,{eventState:r,fallbackColor:t%2==0?"gray300":"gray700",key:a,team:e,winnerId:n})}))}componentDidMount(){const{onImpression:e}=this.props;e&&e()}render(){const{participants:e,url:t,onClick:n}=this.props,r=e&&e.map(this._renderTeamRow);return e&&null!=t&&t.url?s.createElement(x.a,{link:t.url,onClick:n},s.createElement(w.a,{style:D.container},this._renderDetails(),s.createElement(w.a,{style:D.teamsBorder},r))):null}_renderDetails(){const{category:e,eventState:t,gameClock:n,gameClockPeriod:r,startTimeMillis:a,summary:o,participants:i,winnerId:c}=this.props;return s.createElement(I,{category:e,eventState:t,gameClock:n,gameClockPeriod:r,participants:i,startTimeMillis:a,summary:o,winnerId:c})}}const D=T.a.create((e=>({container:{flexDirection:"column",marginHorizontal:e.spaces.space16,marginBottom:e.spaces.space12,marginTop:e.spaces.space4},teamsBorder:{borderRadius:e.borderRadii.small,overflow:"hidden"}})));var P=n("zh9S"),A=n("Rp9C"),R=n("X04g");const j=Object(a.a)({scribe:P.c});var F=e=>r.f({component:O,isFocusable:Object(a.a)(!0),bindActions:j,createProps:({entry:e,actions:{scribe:t},scribeData:n,scribeNamespace:r})=>{if(e.content.scoreEvent.eventState){const{eventState:a,participants:o,category:i,summary:s,startTimeMillis:c,gameClock:l,gameClockPeriod:d,winnerId:m,url:p}=e.content.scoreEvent;return{eventState:a,participants:o,category:i,summary:s,startTimeMillis:parseInt(c,10),gameClock:l,gameClockPeriod:d,winnerId:m,url:p,onClick:e=>{t({...r,action:"click"},n)},onImpression:()=>{t({...r,action:"impression"},n)}}}return null},getScribeDataItem:({itemMetadata:{clientEventInfo:e},content:{scoreEvent:{id:t}}})=>{const n=A.a.getAllSurfaceDetails(e);if(n)return{item_type:R.a.ItemType.EVENT,event_details:{event_id:t},...n}}}),L=n("mhlb");t.a=r.b({selectDisplayType:e=>e.content.displayType,handlers:{[L.a.Cell]:F(O)}})},"A+RP":function(e,t,n){"use strict";n.r(t),n.d(t,"UPDATE_INTERVAL",(function(){return H})),n.d(t,"ExploreSidebar",(function(){return X}));var r=n("KEM+"),a=n.n(r),o=(n("kYxP"),n("ERkP")),i=n("FIs5"),s=n("ezF+"),c=n("8UdT"),l=n("iu0J"),d=n("3XMw"),m=n.n(d),p=n("caTy"),u=n("+Bsv"),h=n("MWbm"),b=n("Irs7"),g=n("hxu0"),E=n("6vad"),f=n("rC8y");const y=m.a.c5f4befa,w=m.a.d228a9a0;class T extends o.Component{constructor(e,t){super(e,t),a()(this,"_handleShowMoreInlineClick",(()=>{const{onClick:e}=this.props;this.setState({showMoreTrends:!0}),e("show_more_inline")})),a()(this,"_handleShowMoreClick",(()=>{const{onClick:e}=this.props;e("show_more")})),this.state={showMoreTrends:!1}}componentDidMount(){const{trends:e,analytics:t}=this.props;e&&e.length>0&&t.scribe({action:"impression",component:"explore_sidebar"})}canShowMoreTrends(){const{trends:e}=this.props;return!this.state.showMoreTrends&&e.length>5}render(){const{footer:e,headerTitle:t,isInSidebar:n}=this.props,r=o.createElement(u.a,{to:"/settings/trends"});return o.createElement(h.a,null,o.createElement(E.b,{rightControl:r,text:t||y}),this._renderTrends(),this.canShowMoreTrends()?o.createElement(f.a,{onPress:this._handleShowMoreInlineClick,text:w,withBottomRadius:!0,withDarkerInteractiveBackground:n}):!!e&&o.createElement(f.a,{link:e.landingUrl?Object(p.b)(e.landingUrl):void 0,onPress:this._handleShowMoreClick,text:e.text,withBottomRadius:!0,withDarkerInteractiveBackground:n}))}_renderTrends(){const{trends:e}=this.props,{showMoreTrends:t}=this.state;return(t?e:e.slice(0,5)).map((e=>o.createElement(o.Fragment,{key:e.key},e.item)))}}var S=Object(b.a)(Object(g.a)(T)),I=n("+o05"),_=n("zh9S"),v=n("5Y9N"),C=n("XtkE"),k=n("xN10"),M=n("VPAj");const x="TrendsModule",O="EXPLORE_SIDEBAR",D={[c.b.TimelineCursor]:s.d(s.a()),[c.b.Label]:s.d(s.a()),[c.b.Message]:s.d(s.a()),[c.b.News]:s.d(s.a()),[c.b.Trend]:Object(C.a)({withThirdPartyCards:!1,errorContext:O}),[c.b.EventSummary]:Object(l.a)({errorContext:O}),[c.b.ScoreEventSummary]:I.a},P={[x]:s.f({bindActions:()=>({scribeAction:_.c}),component:S,createProps:({entry:e,renderEntry:t,scribeNamespace:n,actions:{scribeAction:r}})=>{const{footer:a,header:o,items:i}=e.content;return{footer:a,headerTitle:o&&o.text,onClick:e=>{r({...n,element:e,action:"click"})},trends:i.map((e=>({item:t(e),key:e.entryId})))}},shouldDisplayBorder:Object(M.a)(!1)})};var A={...Object(v.a)({customHandlers:P,customSelectDisplayType:e=>(e=>{const{content:{items:t}}=e;return t.length>0&&Object(k.a)(t,(e=>e.type===c.b.Trend))})(e)?x:e.content.displayType,isInSidebar:!0}),...D},R=n("oQhu"),j=n("fTQJ"),F=n("b8qQ"),L=n("2g+p"),U=n("v6aA"),z=n("BxsD");const N=m.a.b8e930fd,B=m.a.ae05f268,H=3e5,$=()=>o.createElement(i.a,{message:B}),V=Object(R.a)(((e,t)=>Object(z.c)({featureSwitches:t,displayLocation:z.a.WebSidebar,focalTweetId:e}))),W=Object(R.a)(((e,t)=>Object(z.c)({featureSwitches:t,displayLocation:z.a.WebSidebar,profileUserId:e})));class X extends o.Component{constructor(...e){super(...e),a()(this,"_getModule",(()=>{const{focalTweetId:e,profileUserId:t}=this.props;return e?V(e,this.context.featureSwitches):t?W(t,this.context.featureSwitches):Object(z.e)(this.context.featureSwitches)})),a()(this,"_setTimelineRef",(e=>{this._timeline=e})),a()(this,"_onAppForegrounded",(e=>{"active"===e&&this._fetchUpdates()})),a()(this,"_fetchUpdates",(()=>{this._timeline&&"active"===L.a.currentState&&this._timeline.fetchTop({})}))}componentDidMount(){L.a.addEventListener("change",this._onAppForegrounded)}componentWillUnmount(){L.a.removeEventListener("change",this._onAppForegrounded)}render(){return o.createElement(h.a,null,o.createElement(j.a,{entryConfiguration:A,module:this._getModule(),pollingIntervalMsOverride:H,renderUnavailable:$,scroller:F.a,showFooter:!1,timelineRef:this._setTimelineRef,title:N,withKeyboardShortcuts:!1}))}}a()(X,"contextType",U.a);t.default=X},BxsD:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return g}));var r=n("NbBL"),a=n("vXCH"),o=n("oQhu"),i=n("ZNT5"),s=n("eR3e");const c=Object.freeze({Trends:"trends"}),l=Object.freeze({WebSidebar:"web_sidebar"}),d="explore-",m=({featureSwitches:e,contentType:t,displayLocation:n,focalTweetId:a,includePageConfiguration:o=!1,initialTabId:s,profileUserId:c}={})=>{const l=t||n||"main",m=a?`${d}${l}-tweet-${a}`:c?`${d}${l}-user-${c}`:`${d}${l}`,u=r.b.isFeatureSwitchEnabled(e,{shouldScribeImpression:!1});return Object(i.a)({timelineId:m,formatResponse:p(u),getEndpoint:e=>e.URT.fetchExplore,getEndpointParams:e=>({...e,candidate_source:t,display_location:n,focal_tweet_id:a,include_page_configuration:o,initial_tab_id:s,profile_user_id:c,entity_tokens:u}),context:"FETCH_EXPLORE",perfKey:`${d}${l}`,staleIntervalMs:9e5})},p=e=>t=>{const{pageConfiguration:n}=t;if(e&&n&&n.tabs){const r=n.tabs.tabs.map((t=>{var n,r,a;const o={...null==(n=t.urtEndpoint)||null==(r=n.urtEndpointOptions)?void 0:r.requestParams,entity_tokens:e};return{...t,urtEndpoint:{...t.urtEndpoint,urtEndpointOptions:{...null==(a=t.urtEndpoint)?void 0:a.urtEndpointOptions,requestParams:o}}}})),o={...t,pageConfiguration:{...n,tabs:{...n.tabs,tabs:r}}};return Object(a.a)(o)}return Object(a.a)(t)},u=(e,t)=>m({featureSwitches:e,includePageConfiguration:!0,initialTabId:t}),h=Object(o.a)((e=>m({featureSwitches:e,contentType:c.Trends}))),b=Object(o.a)((e=>m({featureSwitches:e,displayLocation:l.WebSidebar}))),g=()=>(e,t)=>e(Object(s.t)(t()).filter((e=>0===e.indexOf(d))).map((e=>Object(s.g)(e))))},XtkE:function(e,t,n){"use strict";var r=n("ezF+"),a=n("6rlp"),o=n("ERkP"),i=n("vjRr"),s=n("/Ikv"),c=n("VPAj"),l=n("0KEI"),d=n("aX4+"),m=n("caTy"),p=n("cFuS"),u=n("NeVM"),h=n("zh9S"),b=n("Rp9C"),g=n("X04g"),E=(n("MvUL"),n("aTAq")),f=n("b5s6"),y=n("i7AQ"),w=n("zOwA"),T="metadata",S="trend",I=n("MWbm"),_=n("hxu0"),v=n("PbQQ"),C=n("htQn"),k=n("pjBI"),M=n("t62R"),x=n("e5HP"),O=n("rHpw");const D=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,P=(e,t=0)=>e.replace("#","").charAt(t).match(D)?"rtl":"ltr";class A extends o.Component{render(){const{associatedTweetIds:e,attachment:t,description:n,domainContext:r,groupedTrends:a,isInSidebar:i,link:s,name:c,onClick:l,rank:d,trendFeedbackMenu:m}=this.props,p=P(c),u=s&&("string"==typeof s?{pathname:s}:s),h=e&&e.length?e[0]:void 0;return o.createElement(v.c.Consumer,null,(e=>o.createElement(o.Fragment,null,o.createElement(C.a,{link:u?e.withAnchorless(u):void 0,onPress:l,style:j.rootLink,testID:S,withDarkerInteractiveBackground:i},o.createElement(I.a,{style:j.content},o.createElement(k.a,null,d?o.createElement(M.c,{accessibilityHidden:!0,color:"gray700",size:"subtext2"},d):null,o.createElement(M.c,{color:"gray700",size:"subtext2"},r||null)),o.createElement(M.c,{dir:p,style:j.name,weight:"bold",withHashflags:!0},c),n?o.createElement(M.c,{color:"gray700",style:j.description},n):null,h?o.createElement(f.a,{isCondensed:!0,style:j.withMarginTop,tweetId:h}):null,t?o.createElement(I.a,{style:j.attachment},t):null,o.createElement(y.a,{groupedTrends:a}),this._renderMetadata(),o.createElement(I.a,{style:j.trendFeedbackMenuContainer},m))))))}_renderMetadata(){const{metaDescription:e,promotedContent:t,socialProofUser:n}=this.props;let r;t?r=o.createElement(x.a,{label:e,promotedContent:t}):n&&e?r=o.createElement(w.a,{image:n.profile_image_url_https,key:n.id_str,label:e,textSize:"subtext2"}):e&&(r=e);const a=Object(E.a)(r)&&r.length?P(r,r.length-1):void 0;return r?o.createElement(M.c,{color:"gray700",dir:a,size:"subtext2",style:j.withMarginTop,testID:T},r):null}}var R=Object(_.a)(A);const j=O.a.create((e=>({rootLink:{display:"flex",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},trendFeedbackMenuContainer:{position:"absolute",top:1,right:0},attachment:{alignSelf:"stretch",paddingBottom:e.spaces.space4,paddingTop:e.spaces.space12},description:{paddingTop:e.spaces.space2},content:{flexGrow:1,position:"relative"},name:{paddingTop:e.spaces.space2},withMarginTop:{marginTop:e.spaces.space4}})));var F=n("G6rE");const{CardNames:L}=s.a,U=e=>{const{name:t,promotedMetadata:n}=e.content,r={item_type:g.a.ItemType.TREND,item_query:t,name:t,...b.a.getAllSurfaceDetails(e.itemMetadata.clientEventInfo)};return n&&(r.disclosure_type=n.disclosureType),r},z=e=>e&&e.promotedTrendId?{disclosure_type:e.disclosureType,impression_id:e.promotedTrendId}:void 0,N=Object.freeze({[L.LIVE_EVENT]:!0,[L.MOMENT]:!0,[L.SUMMARY]:!0,[L.SUMMARY_LARGE_IMAGE]:!0,[L.AUDIOSPACE]:!0}),B=(e,t)=>{if(e&&e.length>0){const n=e[0];if(!t&&n.name!==L.LIVE_EVENT&&n.name!==L.AUDIOSPACE)return;const r=n.name===L.SUMMARY_LARGE_IMAGE?L.SUMMARY:n.name;if(!N[r])return;return o.createElement(d.a,{card:{url:n.url,name:r,binding_values:n.binding_values,users:n.users},cardContext:{locationKey:"trend",tweetUserId:"TREND_CARD_NO_TWEET_USER_ID"},cardState:"secondary"})}},H=({entry:e})=>({cards:i.a.createManyHydratedSelector(e.content.associatedCardUrls||[]),socialProofUsers:t=>F.e.selectMany(t,e.content.associatedUserIds||[])});var $=(e,t)=>r.f({isFocusable:Object(c.a)(!0),component:R,bindActions:({module:e})=>({logTrend:a.c,scribe:h.c,createLocalApiErrorHandler:Object(l.d)(t)}),selectData:H,createProps:({actions:{logTrend:t,scribe:n,createLocalApiErrorHandler:r},data:{cards:a,socialProofUsers:o},entry:i,feedbackItems:s,module:{selectFeedbackActions:c},scribeNamespace:l,scribeData:d})=>{const{content:h}=i,{promotedMetadata:b}=h,g=h.groupedTrends?h.groupedTrends.map((e=>({name:e.name,link:Object(m.b)(e.url)}))):[];return{associatedTweetIds:h.associatedTweetIds,attachment:B(a,e),description:h.description,domainContext:h.trendMetadata.domainContext,groupedTrends:g,link:Object(m.b)(h.url),metaDescription:h.trendMetadata&&h.trendMetadata.metaDescription,name:h.name,onClick:()=>{n({...l,action:"search"},d),b&&b.promotedTrendId&&t({promoted_trend_id:b.promotedTrendId,impression_id:b.impressionString,event:p.d.TREND_CLICK}).catch(r())},promotedContent:z(b),rank:h.rank,trendFeedbackMenu:Object(u.a)({feedbackItems:s,scribe:n,scribeData:d,scribeNamespace:l}),socialProofUser:o&&o[0]}},getScribeDataItem:U,onImpression:({entry:e,actions:{logTrend:t,createLocalApiErrorHandler:n}})=>{const{promotedMetadata:r}=e.content;r&&r.promotedTrendId&&t({promoted_trend_id:r.promotedTrendId,impression_id:r.impressionString,event:p.d.TREND_VIEW}).catch(n())}});t.a=({withThirdPartyCards:e=!1,errorContext:t})=>r.d($(e,t))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.ExploreSidebar.95d86c85.js.map